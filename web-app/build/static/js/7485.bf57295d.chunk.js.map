{"version":3,"file":"static/js/7485.bf57295d.chunk.js","mappings":"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","sources":["screens/Console/IDP/DeleteIDPConfigurationModal.tsx","screens/Console/IDP/IDPConfigurations.tsx","screens/Console/IDP/IDPOpenIDConfigurations.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useState } from \"react\";\nimport { ConfirmDeleteIcon } from \"mds\";\nimport {\n  setErrorSnackMessage,\n  setServerNeedsRestart,\n} from \"../../../systemSlice\";\nimport { useAppDispatch } from \"../../../store\";\nimport ConfirmDialog from \"../Common/ModalWrapper/ConfirmDialog\";\nimport { api } from \"api\";\nimport { SetIDPResponse } from \"../../../api/consoleApi\";\nimport { errorToHandler } from \"../../../api/errors\";\n\ninterface IDeleteIDPConfigurationModalProps {\n  closeDeleteModalAndRefresh: (refresh: boolean) => void;\n  deleteOpen: boolean;\n  idp: string;\n  idpType: string;\n}\n\nconst DeleteIDPConfigurationModal = ({\n  closeDeleteModalAndRefresh,\n  deleteOpen,\n  idp,\n  idpType,\n}: IDeleteIDPConfigurationModalProps) => {\n  const dispatch = useAppDispatch();\n  const onDelSuccess = (res: SetIDPResponse) => {\n    closeDeleteModalAndRefresh(true);\n    dispatch(setServerNeedsRestart(res.restart === true));\n  };\n\n  const onClose = () => closeDeleteModalAndRefresh(false);\n  const [deleteLoading, setDeleteLoading] = useState<boolean>(false);\n\n  if (!idp) {\n    return null;\n  }\n\n  const onConfirmDelete = () => {\n    setDeleteLoading(true);\n    api.idp\n      .deleteConfiguration(idp, idpType)\n      .then((res) => {\n        onDelSuccess(res.data);\n      })\n      .catch((err) => dispatch(setErrorSnackMessage(errorToHandler(err.error))))\n      .finally(() => setDeleteLoading(false));\n  };\n\n  const displayName = idp === \"_\" ? \"Default\" : idp;\n\n  return (\n    <ConfirmDialog\n      title={`Delete ${displayName}`}\n      confirmText={\"Delete\"}\n      isOpen={deleteOpen}\n      titleIcon={<ConfirmDeleteIcon />}\n      isLoading={deleteLoading}\n      onConfirm={onConfirmDelete}\n      onClose={onClose}\n      confirmButtonProps={{\n        disabled: deleteLoading,\n      }}\n      confirmationContent={\n        <Fragment>\n          Are you sure you want to delete IDP <b>{displayName}</b>{\" \"}\n          configuration? <br />\n        </Fragment>\n      }\n    />\n  );\n};\n\nexport default DeleteIDPConfigurationModal;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { AddIcon, Button, PageLayout, RefreshIcon, Grid, DataTable } from \"mds\";\nimport { useNavigate } from \"react-router-dom\";\nimport { api } from \"api\";\nimport { errorToHandler } from \"api/errors\";\nimport { useAppDispatch } from \"../../../store\";\nimport {\n  CONSOLE_UI_RESOURCE,\n  IAM_SCOPES,\n} from \"../../../common/SecureComponent/permissions\";\nimport {\n  hasPermission,\n  SecureComponent,\n} from \"../../../common/SecureComponent\";\nimport { setErrorSnackMessage, setHelpName } from \"../../../systemSlice\";\nimport { actionsTray } from \"../Common/FormComponents/common/styleLibrary\";\nimport TooltipWrapper from \"../Common/TooltipWrapper/TooltipWrapper\";\nimport DeleteIDPConfigurationModal from \"./DeleteIDPConfigurationModal\";\nimport PageHeaderWrapper from \"../Common/PageHeaderWrapper/PageHeaderWrapper\";\nimport HelpMenu from \"../HelpMenu\";\n\ntype IDPConfigurationsProps = {\n  idpType: string;\n};\n\nconst IDPConfigurations = ({ idpType }: IDPConfigurationsProps) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [selectedIDP, setSelectedIDP] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [records, setRecords] = useState<any[]>([]);\n\n  const deleteIDP = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  const viewIDP = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  const displayIDPs = hasPermission(CONSOLE_UI_RESOURCE, [\n    IAM_SCOPES.ADMIN_CONFIG_UPDATE,\n  ]);\n\n  useEffect(() => {\n    fetchRecords();\n  }, []);\n\n  useEffect(() => {\n    if (loading) {\n      if (displayIDPs) {\n        api.idp\n          .listConfigurations(idpType)\n          .then((res) => {\n            setLoading(false);\n            if (res.data.results) {\n              setRecords(\n                res.data.results.map((r: any) => {\n                  r.name = r.name === \"_\" ? \"Default\" : r.name;\n                  r.enabled = r.enabled === true ? \"Enabled\" : \"Disabled\";\n                  return r;\n                }),\n              );\n            }\n          })\n          .catch((err) => {\n            setLoading(false);\n            dispatch(setErrorSnackMessage(errorToHandler(err.error)));\n          });\n      } else {\n        setLoading(false);\n      }\n    }\n  }, [loading, setLoading, setRecords, dispatch, displayIDPs, idpType]);\n\n  const fetchRecords = () => {\n    setLoading(true);\n  };\n\n  const confirmDeleteIDP = (idp: string) => {\n    setDeleteOpen(true);\n    idp = idp === \"Default\" ? \"_\" : idp;\n    setSelectedIDP(idp);\n  };\n\n  const viewAction = (idp: any) => {\n    let name = idp.name === \"Default\" ? \"_\" : idp.name;\n    navigate(`/identity/idp/${idpType}/configurations/${name}`);\n  };\n\n  const closeDeleteModalAndRefresh = async (refresh: boolean) => {\n    setDeleteOpen(false);\n\n    if (refresh) {\n      fetchRecords();\n    }\n  };\n\n  const tableActions = [\n    {\n      type: \"view\",\n      onClick: viewAction,\n      disableButtonFunction: () => !viewIDP,\n    },\n    {\n      type: \"delete\",\n      onClick: confirmDeleteIDP,\n      sendOnlyId: true,\n      disableButtonFunction: (idp: string) => !deleteIDP || idp === \"Default\",\n    },\n  ];\n\n  useEffect(() => {\n    dispatch(setHelpName(\"idp_configs\"));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Fragment>\n      {deleteOpen && (\n        <DeleteIDPConfigurationModal\n          deleteOpen={deleteOpen}\n          idp={selectedIDP}\n          idpType={idpType}\n          closeDeleteModalAndRefresh={closeDeleteModalAndRefresh}\n        />\n      )}\n      <PageHeaderWrapper\n        label={`${idpType.toUpperCase()} Configurations`}\n        actions={<HelpMenu />}\n      />\n      <PageLayout>\n        <Grid container>\n          <Grid\n            item\n            xs={12}\n            sx={{\n              ...actionsTray.actionsTray,\n              justifyContent: \"flex-end\",\n              gap: 8,\n            }}\n          >\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <TooltipWrapper tooltip={\"Refresh\"}>\n                <Button\n                  id={\"refresh-keys\"}\n                  variant=\"regular\"\n                  icon={<RefreshIcon />}\n                  onClick={() => setLoading(true)}\n                />\n              </TooltipWrapper>\n            </SecureComponent>\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <TooltipWrapper tooltip={`Create ${idpType} configuration`}>\n                <Button\n                  id={\"create-idp\"}\n                  label={\"Create Configuration\"}\n                  variant={\"callAction\"}\n                  icon={<AddIcon />}\n                  onClick={() =>\n                    navigate(`/identity/idp/${idpType}/configurations/add-idp`)\n                  }\n                />\n              </TooltipWrapper>\n            </SecureComponent>\n          </Grid>\n          <Grid item xs={12}>\n            <SecureComponent\n              scopes={[IAM_SCOPES.ADMIN_CONFIG_UPDATE]}\n              resource={CONSOLE_UI_RESOURCE}\n              errorProps={{ disabled: true }}\n            >\n              <DataTable\n                itemActions={tableActions}\n                columns={[\n                  { label: \"Name\", elementKey: \"name\" },\n                  { label: \"Type\", elementKey: \"type\" },\n                  { label: \"Enabled\", elementKey: \"enabled\" },\n                ]}\n                isLoading={loading}\n                records={records}\n                entityName=\"Keys\"\n                idField=\"name\"\n              />\n            </SecureComponent>\n          </Grid>\n        </Grid>\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default IDPConfigurations;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport IDPConfigurations from \"./IDPConfigurations\";\n\nconst IDPOpenIDConfigurations = () => {\n  return <IDPConfigurations idpType={\"openid\"} />;\n};\n\nexport default IDPOpenIDConfigurations;\n"],"names":["_ref","closeDeleteModalAndRefresh","deleteOpen","idp","idpType","dispatch","useAppDispatch","deleteLoading","setDeleteLoading","useState","displayName","_jsx","ConfirmDialog","title","confirmText","isOpen","titleIcon","ConfirmDeleteIcon","isLoading","onConfirm","onConfirmDelete","api","deleteConfiguration","then","res","setServerNeedsRestart","restart","onDelSuccess","data","catch","err","setErrorSnackMessage","errorToHandler","error","finally","onClose","confirmButtonProps","disabled","confirmationContent","_jsxs","Fragment","children","navigate","useNavigate","setDeleteOpen","selectedIDP","setSelectedIDP","loading","setLoading","records","setRecords","deleteIDP","hasPermission","CONSOLE_UI_RESOURCE","IAM_SCOPES","ADMIN_CONFIG_UPDATE","viewIDP","displayIDPs","useEffect","fetchRecords","listConfigurations","results","map","r","name","enabled","tableActions","type","onClick","disableButtonFunction","sendOnlyId","setHelpName","DeleteIDPConfigurationModal","async","refresh","PageHeaderWrapper","label","toUpperCase","actions","HelpMenu","PageLayout","Grid","container","item","xs","sx","actionsTray","justifyContent","gap","SecureComponent","scopes","resource","errorProps","TooltipWrapper","tooltip","Button","id","variant","icon","RefreshIcon","AddIcon","DataTable","itemActions","columns","elementKey","entityName","idField","IDPOpenIDConfigurations","IDPConfigurations"],"sourceRoot":""}