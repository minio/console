(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[88],{649:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(6797),o=n.n(s),i=n(3097),r=n.n(i),a=n(6483),l=n(4710);const d=new class{invoke(e,t,n,s){let i=t;"/"===i[0]&&(i=i.slice(1));let r=o()(e,i);if(s)for(let o in s)r.set(o,s[o]);return r.send(n).then((e=>e.body)).catch((e=>401===e.status&&localStorage.getItem("userLoggedIn")&&!i.includes("api/v1/login")?("/"!==window.location.pathname&&localStorage.setItem("redirect-path",window.location.pathname),(0,a.q7)(),void(window.location.href=`${l.p}login`)):this.onError(e)))}onError(e){if(e.status){const t=r()(e.response,"body.message",`Error ${e.status.toString()}`);let n=r()(e.response,"body.detailedMessage","");t===n&&(n="");const s={errorMessage:t.charAt(0).toUpperCase()+t.slice(1),detailedError:n.charAt(0).toUpperCase()+n.slice(1),statusCode:e.status};return Promise.reject(s)}(0,a.q7)(),window.location.href=`${l.p}login`}}},6483:(e,t,n)=>{"use strict";n.d(t,{K7:()=>u,Tw:()=>j,eQ:()=>m,nO:()=>l,oK:()=>x,q7:()=>h,qO:()=>d,qf:()=>p});var s=n(9816),o=n(3097),i=n.n(o);const r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=["Ki","Mi","Gi","Ti","Pi","Ei"],l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseInt(e,10)||0;return d(n,t)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;for(;e>=1024&&++n;)e/=1024;const s=["B",...a];return e.toFixed(1)+" "+(t?s[n]:r[n])},c=e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},h=()=>{s.Ay.removeItem("token"),s.Ay.removeItem("auth-state"),c("token"),c("idp-refresh-token")},u=e=>{const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),o=e%60,i=[];return t>0&&i.push(`${t} day${1!==t?"s":""}`),n>0&&i.push(`${n} hour${1!==n?"s":""}`),s>0&&i.push(`${s} minute${1!==s?"s":""}`),o>0&&i.push(`${o} second${1!==o?"s":""}`),i.join(" and ")},m=function(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"s"){case"ns":e=Math.floor(1e-9*e);break;case"ms":e=Math.floor(.001*e)}const t=Math.floor(e/86400);e-=3600*t*24;const n=Math.floor(e/3600);e-=3600*n;const s=Math.floor(e/60);if(e-=60*s,t>365){const e=t/365;return`${e} year${1===Math.floor(e)?"":"s"}`}if(t>30){const e=Math.floor(t/30),n=t-30*e;return`${e} month${1===Math.floor(e)?"":"s"} ${n>0?`${n} day${n>1?"s":""}`:""}`}if(t>=7&&t<=30){const e=Math.floor(t/7);return`${Math.floor(e)} week${1===e?"":"s"}`}return t>=1&&t<=6?`${t} day${t>1?"s":""}`:`${n>=1?`${n} hour${n>1?"s":""}`:""} ${s>=1&&0===n?`${s} minute${s>1?"s":""}`:""} ${e>=1&&0===s&&0===n?`${e} second${e>1?"s":""}`:""}`},x=()=>{const e=i()(window.navigator,"platform","undefined");return e||"undefined"},p=e=>e.split("\u202e").join("<\ufffd202e>"),j=e=>{try{return decodeURIComponent(e)}catch(t){return e}}},3263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ne});var s=n(5043),o=n(2166),i=n(3216),r=n(6629),a=n(3635),l=n(9161),d=n(6035),c=n(3097),h=n.n(c),u=n(9923),m=n(3518),x=n(8789),p=n(4241),j=n(6483),g=n(1476),b=n.n(g),f=n(4574),v=n(5475),S=n(7938),_=n(579);const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,_.jsx)(s.Suspense,{fallback:t,children:(0,_.jsx)(e,{...n})})}};var y=n(4159);const O=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(O(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),i=e.substring(0,e.indexOf("/*."));return o&&(i===`arn:aws:s3:::${t}`&&"arn:aws:s3:::*"!==e)}))},T=w(s.lazy((()=>n.e(774).then(n.bind(n,7774))))),E=f.Ay.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",[`@media (max-width: ${u.nmC.lg}px)`]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),I=e=>{let{bucketName:t,internalPaths:n,hidePathButton:r,additionalOptions:c}=e;const h=(0,a.j)(),m=(0,i.Zp)(),x=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),p=(0,o.d4)((e=>e.objectBrowser.versionsMode)),g=(0,o.d4)((e=>e.objectBrowser.versionedFile)),f=(0,o.d4)((e=>e.system.anonymousMode)),[w,O]=(0,s.useState)(!1),[I,k]=(0,s.useState)(!1),A=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],N=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{}));let B=n;""!==n&&(B=`/${n}`);const F=B.split("/").filter((e=>""!==e)),$=F.length-1,V=t+B||t,D=C(N,V,A);(0,s.useEffect)((()=>{k(!1),Object.keys(N).forEach((e=>{e.includes(V)&&e.includes("/*")&&k(!0)}))}),[V,n,N]);const L=(0,S._)([V,...D],A)||f||I;let P=F.map(((e,n)=>{const o=`${F.slice(0,n+1).join("/")}/`,i=`/browser/${encodeURIComponent(t)}/${o?`${encodeURIComponent(o)}`:""}`;return n===$&&e===g?null:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===$?(0,_.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,j.Tw)(e)}):(0,_.jsx)(v.N_,{style:{whiteSpace:"pre"},to:i,onClick:()=>{h((0,d.cQ)({status:!1,objectName:""}))},children:(0,j.Tw)(e)})]},`breadcrumbs-${n.toString()}`)})),R=[];p&&(R=[(0,_.jsx)(s.Fragment,{children:(0,_.jsxs)("span",{children:[(0,_.jsx)("span",{className:"slashSpacingStyle",children:"/"}),g," - Versions"]})},"breadcrumbs-versionedItem")]);const z=[(0,_.jsx)(s.Fragment,{children:(0,_.jsx)(v.N_,{to:`/browser/${t}`,onClick:()=>{h((0,d.cQ)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...P,...R];return(0,_.jsxs)(s.Fragment,{children:[(0,_.jsxs)(E,{children:[w&&(0,_.jsx)(T,{modalOpen:w,bucketName:t,folderName:n,onClose:()=>{O(!1)},limitedSubPath:I&&!((0,S._)([V,...D],A)||f)}),(0,_.jsx)(u.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(p)h((0,d.cQ)({status:!1,objectName:""}));else{if(0===F.length)return;const e=F.slice(0,-1);m(`/browser/${t}${e.length>0?`/${encodeURIComponent(`${e.join("/")}/`)}`:""}`)}},additionalOptions:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)(b(),{text:`${t}/${F.join("/")}`,children:(0,_.jsx)(u.$nd,{id:"copy-path",icon:(0,_.jsx)(u.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{h((0,y.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,_.jsx)(u.azJ,{className:"additionalOptions",children:c})]}),children:z}),!r&&(0,_.jsx)(u.m_M,{tooltip:L?"Choose or create a new path":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,_.jsx)(u.$nd,{id:"new-path",onClick:()=>{O(!0)},disabled:!f&&(x||!L),icon:(0,_.jsx)(u.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,_.jsx)(u.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},[`@media (max-width: ${u.nmC.lg}px)`]:{display:"flex"}},children:c})]})};var k=n(3445);const A=e=>"Enabled"===e||"Suspended"===e;var N=n(7414),B=n(9947),F=n(1708),$=n(6681);const V=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:r,uploadFolderFunction:a,overrideStyles:d={}}=e;const[c,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),p=(0,o.d4)((e=>e.system.anonymousMode)),j=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),g=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],b=C(j,t,g),f=Boolean(c),v=()=>{h(null)},w=(0,S._)([t,...b],g)||p,y=(0,S._)([n,...b],g,!1,!0),O=w||y;return(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)($.A,{tooltip:O?"Upload Files":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,_.jsx)(u.$nd,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":f?"true":void 0,onClick:e=>{x(!m),h(e.currentTarget)},label:"Upload",icon:(0,_.jsx)(u.JMY,{}),variant:"callAction",disabled:i||!O,sx:d})}),(0,_.jsx)(u.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,_.jsx)(u.JMY,{}),value:"file",disabled:!w||i},{label:"Upload Folder",icon:(0,_.jsx)(u.nDF,{}),value:"folder",disabled:!y||i}],selectedOption:"",onSelect:e=>{"folder"!==e?r(v):a(v)},hideTriggerAction:()=>{x(!1)},open:m,anchorEl:c,anchorOrigin:"end",useAnchorWidth:!0})]})},D=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,_.jsxs)(u.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:`${t?"open":""} ${s}`,children:[(0,_.jsx)(u.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,_.jsx)(u._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var L=n(8245);const P=e=>{let{icon:t,strings:n}=e;return(0,_.jsxs)(u.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,_.jsx)("span",{className:"fileNameText",children:(0,j.qf)(n[n.length-1])})]})},R=[{icon:(0,_.jsx)(u.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,_.jsx)(u.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,_.jsx)(u.yTC,{}),extensions:["pdf"]},{icon:(0,_.jsx)(u.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,_.jsx)(u.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,_.jsx)(u.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,_.jsx)(u.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,_.jsx)(u.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,_.jsx)(u.ITz,{}),extensions:["sql"]},{icon:(0,_.jsx)(u.PcO,{}),extensions:["ttf","otf"]},{icon:(0,_.jsx)(u.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,_.jsx)(u.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,_.jsx)(u.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,_.jsx)(u.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,_.jsx)(u.KlI,{});e.endsWith("/")&&(s=(0,_.jsx)(u.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const r of R)for(const e of r.extensions)o.endsWith(`.${e}`)&&(s=r.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,_.jsx)(u.YJK,{}));const i=n.split("/");return t?s:(0,_.jsx)(P,{icon:s,strings:i})};var U=n(7524);const M=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,_.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(j.Tw).join(", "):(0,j.Tw)(e))(t[e]);return(0,_.jsxs)(u.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,_.jsx)("strong",{children:e}),(0,_.jsx)("br",{}),s]},`box-meta-${e}-${n.toString()}`)}))})};var G=n(718),J=n(8661),W=n(5448);const K=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:r,versioningInfo:d,selectedVersion:c=""}=e;const h=(0,a.j)(),[m,x]=(0,W.A)((()=>t(!0)),(e=>{h((0,y.C9)(e)),"Access Denied."===e.detailedError&&t(!0)})),[p,j]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),f=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),v=(0,S._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if(!r)return null;return(0,_.jsx)(J.A,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,_.jsx)(u.xWY,{}),isLoading:m,onConfirm:()=>{const e=r.endsWith("/");x("DELETE",`/api/v1/buckets/${encodeURIComponent(i)}/objects?prefix=${encodeURIComponent(r)}${""!==c?`&version_id=${encodeURIComponent(c)}`:`&recursive=${e}&all_versions=${p}`}${g?"&bypass=true":""}`)},onClose:()=>t(!1),confirmationContent:(0,_.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:r})," ",""!==c?(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),"Version ID:",(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:c})]}):"","? ",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),A(null===d||void 0===d?void 0:d.status)&&""===c&&(0,_.jsx)(s.Fragment,{children:(0,_.jsx)(u.dOG,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:p,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{j(!p)},description:""})}),v&&(p||""!==c)&&(0,_.jsx)(s.Fragment,{children:(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)(u.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!g)},description:""})})}),p&&(0,_.jsxs)(s.Fragment,{children:[(0,_.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,_.jsx)("br",{}),"This action is irreversible."]}),(0,_.jsx)("br",{}),"Are you sure you want to continue?"]})]})})};var H=n(4141),Y=n(7403);const Z=f.Ay.b((e=>{let{theme:t}=e;return{color:h()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),q=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:d,actualInfo:c}=e;const x=(0,a.j)(),p=(0,o.d4)(y.Rq),[j,g]=(0,s.useState)(""),[b,f]=(0,s.useState)(""),[v,w]=(0,s.useState)(!1),[O,C]=(0,s.useState)(!1),[T,E]=(0,s.useState)(""),[I,k]=(0,s.useState)(""),A=c.tags,N=Object.keys(A||{}),B=null===(t=c.name)||void 0===t?void 0:t.split("/"),F=(null===B||void 0===B?void 0:B.pop())||"",$=e=>(0,_.jsxs)(u.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,_.jsx)("strong",{children:F})]});return(0,_.jsx)(s.Fragment,{children:(0,_.jsx)(H.A,{modalOpen:n,title:O?"Delete Tag":"Edit Tags",onClose:()=>{i(!0)},iconColor:O?"delete":"default",titleIcon:O?(0,_.jsx)(u.aaC,{}):(0,_.jsx)(u.cGQ,{}),children:O?(0,_.jsx)(s.Fragment,{children:(0,_.jsxs)(u.xA9,{container:!0,children:[$(!1),"Are you sure you want to delete the tag"," ",(0,_.jsxs)(Z,{children:[T," : ",I]})," ","?",(0,_.jsxs)(u.xA9,{item:!0,xs:12,sx:Y.U.modalButtonBar,children:[(0,_.jsx)(u.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{E(""),k(""),C(!1)},label:"Cancel"}),(0,_.jsx)(u.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e={...A};delete e[T];const t=p?c.version_id||"":"null";r.F.buckets.putObjectTags(d,{prefix:c.name||"",version_id:t},{tags:e}).then((()=>{i(!0),w(!1)})).catch((e=>{x((0,y.Dy)((0,m.S)(e.error))),w(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,_.jsxs)(u.azJ,{children:[(0,_.jsx)(S.R,{scopes:[l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS],resource:d,children:(0,_.jsxs)(u.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[$(!0),(0,_.jsxs)(u.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,_.jsx)("br",{}),0===N.length?(0,_.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,_.jsx)(s.Fragment,{}),(0,_.jsx)(u.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:N.map(((e,t)=>{const n=h()(A,`${e}`,"");return""!==n?(0,_.jsx)(S.R,{scopes:[l.OV.S3_DELETE_OBJECT_TAGGING,l.OV.S3_DELETE_ACTIONS],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,_.jsx)(u.vwO,{id:`${e} : ${n}`,label:`${e} : ${n}`,variant:"regular",color:"default",onDelete:()=>{((e,t)=>{E(e),k(t),C(!0)})(e,n)}})},`chip-${t}`):null}))})]})]})}),(0,_.jsx)(S.R,{scopes:[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,_.jsxs)(u.azJ,{children:[(0,_.jsx)(u._xt,{icon:(0,_.jsx)(u.b_$,{}),separator:!1,children:"Add New Tag"}),(0,_.jsxs)(u.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,_.jsx)(u.cl_,{value:j,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{g(e.target.value)}}),(0,_.jsx)(u.cl_,{value:b,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{f(e.target.value)}}),(0,_.jsxs)(u.xA9,{item:!0,xs:12,sx:Y.U.modalButtonBar,children:[(0,_.jsx)(u.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{f(""),g("")},label:"Clear"}),(0,_.jsx)(u.$nd,{type:"submit",variant:"callAction",disabled:""===b.trim()||""===j.trim()||v,onClick:()=>{w(!0);const e={};e[j]=b;const t={...A,...e},n=p?c.version_id||"":"null";r.F.buckets.putObjectTags(d,{prefix:c.name||"",version_id:n},{tags:t}).then((()=>{i(!0),w(!1)})).catch((e=>{x((0,y.Dy)((0,m.S)(e.error))),w(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})},Q=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:r,bucketName:l}=e;const d=(0,a.j)(),[c,h]=(0,s.useState)(o),[m,x]=(0,s.useState)(!1);return(0,_.jsxs)(H.A,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,_.jsx)(u.qUP,{}),children:[(0,_.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,_.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{})," We recommend to rename the file download"]}),(0,_.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,L._)(d,l,i,r),n()})(e)},children:(0,_.jsxs)(u.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,_.jsx)(u.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{h(e.target.value)},label:"",type:"text",value:c,error:c.length>200&&!m?"Filename should be less than 200 characters long.":""}),(0,_.jsx)(u.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:m,onChange:e=>{x(e.target.checked),e.target.checked&&h(o)},label:"Use Original Name"}),(0,_.jsx)(u.xA9,{item:!0,xs:12,sx:Y.U.modalButtonBar,children:(0,_.jsx)(u.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:c.length>200&&!m,label:"Download File"})})]})})]})},X={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},ee=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,onClosePanel:c}=e;const m=(0,a.j)(),x=(0,o.d4)(y.Rq),p=(0,o.d4)((e=>e.objectBrowser.versionsMode)),g=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),b=(0,o.d4)((e=>e.objectBrowser.loadingObjectInfo)),[f,v]=(0,s.useState)(!1),[w,O]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null),[E,I]=(0,s.useState)([]),[A,N]=(0,s.useState)(null),[B,F]=(0,s.useState)([]),[V,D]=(0,s.useState)(!1),[P,R]=(0,s.useState)(!1),[J,W]=(0,s.useState)(0),[H,Y]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(null),[te,ne]=(0,s.useState)(!1),se=(t||"").split("/").pop()||"";let oe=[];C&&C.name&&(oe=C.name.split("/")),(0,s.useEffect)((()=>{if(x&&E&&E.length>=1){let e=E.find((e=>e.is_latest))||X;""!==g&&(e=E.find((e=>e.version_id===g))||X),e.is_delete_marker||ne(!0),T(e)}}),[g,x,E]),(0,s.useEffect)((()=>{b&&""!==t&&r.F.buckets.listObjects(n,{prefix:t,with_versions:x}).then((e=>{const t=e.data.objects||[];if(x){I(t),F(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);W(e)}else{const e=t[0];T(e),F([]),e.is_delete_marker||ne(!0)}m((0,d.oe)(!1))})).catch((e=>{console.error("Error loading object details",e.error),m((0,d.oe)(!1))}))}),[b,n,t,m,x,g]),(0,s.useEffect)((()=>{te&&""!==t&&r.F.buckets.getObjectMetadata(n,{prefix:t,versionID:(null===C||void 0===C?void 0:C.version_id)||""}).then((e=>{let t=h()(e.data,"objectMetadata",{});ee(t),ne(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),ne(!1)}))}),[n,t,te,null===C||void 0===C?void 0:C.version_id]);let ie=[];C&&C.tags&&(ie=Object.keys(C.tags));const re=(0,_.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,_.jsx)(u.aHM,{})});if(!C)return b?re:null;const ae=oe.length>0?oe[oe.length-1]:C.name,le=[n,se,[n,C.name].join("/")],de=(0,S._)(le,[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS]),ce=(0,S._)(le,[l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),he=(0,S._)(le,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),ue=(0,S._)([n,se,[n,C.name].join("/")],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]);let me=(0,k.IZ)(Z,se);const xe=[{action:()=>{(0,L._)(m,n,t,C)},label:"Download",disabled:!!C.is_delete_marker||!he,icon:(0,_.jsx)(u.s3U,{}),tooltip:he?"Download this Object":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{v(!0)},label:"Share",disabled:!!C.is_delete_marker||!he,icon:(0,_.jsx)(u.liv,{}),tooltip:he?"Share this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{R(!0)},label:"Preview",disabled:!!C.is_delete_marker||"none"===me&&!he,icon:(0,_.jsx)(u.cyn,{}),tooltip:he?"Preview this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{O(!0)},label:"Tags",disabled:!!C.is_delete_marker||""!==g||!de,icon:(0,_.jsx)(u.P3Z,{}),tooltip:de?"Change Tags for this File":(0,l.vj)([l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{m((0,d.cQ)({status:!p,objectName:ae}))},label:p?"Hide Object Versions":"Display Object Versions",icon:(0,_.jsx)(u.j1U,{}),disabled:!x||!(C.version_id&&"null"!==C.version_id)||!ce,tooltip:ce?C.version_id&&"null"!==C.version_id?"Display Versions for this file":"":(0,l.vj)([l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,_.jsxs)(s.Fragment,{children:[f&&C&&(0,_.jsx)(G.default,{open:f,closeModalAndRefresh:()=>{N(null),v(!1)},bucketName:n,dataObject:A||C}),V&&(0,_.jsx)(K,{deleteOpen:V,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{D(!1),e&&""===g?c(!0):(m((0,d.SK)(!0)),m((0,d.Ai)("")),m((0,d.oe)(!0)))},versioningInfo:x?i:void 0,selectedVersion:g}),P&&C&&(0,_.jsx)(U.default,{open:P,bucketName:n,actualInfo:C,onClosePreview:()=>{R(!1)}}),w&&C&&(0,_.jsx)(q,{modalOpen:w,bucketName:n,actualInfo:C,onCloseAndUpdate:e=>{O(!1),e&&m((0,d.oe)(!0))}}),H&&C&&(0,_.jsx)(Q,{open:H,closeModal:()=>{Y(!1)},currentItem:se,bucketName:n,internalPaths:t,actualInfo:C}),b?(0,_.jsx)(s.Fragment,{children:re}):(0,_.jsxs)(u.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,_.jsx)(u.Smc,{title:(0,_.jsxs)("div",{className:"ObjectDetailsTitle",children:[z(ae||"",!0),(0,_.jsx)("span",{className:"objectNameContainer",children:ae})]}),items:xe}),(0,_.jsx)($.A,{tooltip:ue?"":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete this object"),children:(0,_.jsx)(u.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,_.jsx)(S.R,{resource:[n,se,[n,C.name].join("/")],scopes:[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],errorProps:{disabled:!0},children:(0,_.jsx)(u.$nd,{id:"delete-element-click",icon:(0,_.jsx)(u.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{D(!0)},disabled:""===g&&C.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete"+(""!==g?" version":"")})})})}),(0,_.jsx)(u.kCK,{icon:(0,_.jsx)(u.Hch,{}),label:"Object Info"}),(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Name:"}),(0,_.jsx)("br",{}),(0,_.jsx)("div",{style:{overflowWrap:"break-word"},children:ae})]}),""!==g&&(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Version ID:"}),(0,_.jsx)("br",{}),g]}),(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Size:"}),(0,_.jsx)("br",{}),(0,j.nO)(`${C.size||"0"}`)]}),C.version_id&&"null"!==C.version_id&&""===g&&(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Versions:"}),(0,_.jsx)("br",{}),B.length," version",1!==B.length?"s":"",","," ",(0,j.qO)(J)]}),""===g&&(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Last Modified:"}),(0,_.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,j.eQ)(s,"ms");return""!==o.trim()?`${o} ago`:"Just now"})(C.last_modified||"")]}),(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"ETAG:"}),(0,_.jsx)("br",{}),C.etag||"N/A"]}),(0,_.jsxs)(u.azJ,{className:"detailContainer",children:[(0,_.jsx)("strong",{children:"Tags:"}),(0,_.jsx)("br",{}),0===ie.length?"N/A":ie.map(((e,t)=>(0,_.jsxs)("span",{children:[e,":",h()(C,`tags.${e}`,""),t<ie.length-1?", ":""]},`key-vs-${t.toString()}`)))]}),(0,_.jsx)(u.azJ,{className:"detailContainer",children:(0,_.jsx)(S.R,{scopes:[l.OV.S3_GET_OBJECT_LEGAL_HOLD,l.OV.S3_GET_ACTIONS],resource:n,children:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("strong",{children:"Legal Hold:"}),(0,_.jsx)("br",{}),C.legal_hold_status?"On":"Off"]})})}),(0,_.jsx)(u.azJ,{className:"detailContainer",children:(0,_.jsx)(S.R,{scopes:[l.OV.S3_GET_OBJECT_RETENTION,l.OV.S3_GET_ACTIONS],resource:n,children:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("strong",{children:"Retention Policy:"}),(0,_.jsx)("br",{}),(0,_.jsx)("span",{className:"capitalizeFirst",children:(C.version_id&&C.version_id,(0,_.jsx)(s.Fragment,{children:C.retention_mode?C.retention_mode.toLowerCase():"None"}))})]})})}),!C.is_delete_marker&&(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)(u.kCK,{label:"Metadata",icon:(0,_.jsx)(u.$vN,{})}),(0,_.jsx)(u.azJ,{className:"detailContainer",children:C&&Z?(0,_.jsx)(M,{metaData:Z}):null})]})]})]})},te=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:l}=e;const c=(0,a.j)(),[h,x]=(0,s.useState)(!1);return(0,_.jsx)(J.A,{title:"Restore File Version",confirmText:"Restore",isOpen:i,isLoading:h,titleIcon:(0,_.jsx)(u.YkU,{}),onConfirm:()=>{x(!0),r.F.buckets.putObjectRestore(n,{prefix:o,version_id:t.version_id||""}).then((()=>{x(!1),l(!0),c((0,d.NV)({prefix:o,objectInfo:t}))})).catch((e=>{c((0,y.C9)((0,m.S)(e.error))),x(!1)}))},confirmButtonProps:{variant:"secondary",disabled:h},onClose:()=>{l(!1)},confirmationContent:(0,_.jsxs)(u.azJ,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:o})," ",(0,_.jsx)("br",{})," with Version ID:",(0,_.jsx)("br",{}),(0,_.jsx)("b",{children:t.version_id}),"?"]})})},ne=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,_.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},se=f.Ay.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:h()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:`${h()(t,"borderColor","#F8F8F8")} 1px solid`,padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:h()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),oe=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:r,onShare:a,onDownload:l,onRestore:d,onPreview:c,globalClick:h,index:m,key:x,style:g}=e;const b=n.is_delete_marker,f=[{icon:(0,_.jsx)(u.cyn,{}),action:c,tooltip:"Preview"},{icon:(0,_.jsx)(u.s3U,{}),action:l,tooltip:"Download this version"},{icon:(0,_.jsx)(u.liv,{}),action:a,tooltip:"Share this version"},{icon:(0,_.jsx)(u.YkU,{}),action:d,tooltip:"Restore this version"}];let v=null;n.is_delete_marker?v="deleted":n.is_latest?v="current":"null"===n.version_id&&(v="null");let S=p.c9.now();return n.last_modified&&(S=p.c9.fromISO(n.last_modified)),(0,_.jsx)(se,{children:(0,_.jsx)(u.xA9,{container:!0,className:"ctrItem",onClick:()=>{h(n)},style:g,children:(0,_.jsx)(u.xA9,{item:!0,xs:12,className:"intermediateLayer "+(s?"selected":""),children:(0,_.jsxs)(u.xA9,{item:!0,xs:!0,className:"mainFileVersionItem "+(n.is_delete_marker?"deleted":""),children:[(0,_.jsx)(u.xA9,{item:!0,xs:12,children:(0,_.jsxs)(u.xA9,{container:!0,children:[(0,_.jsxs)(u.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,_.jsx)(u.Sc0,{checked:i,id:`select-${n.version_id}`,name:`select-${n.version_id}`,onChange:e=>{e.stopPropagation(),r(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),z(t,!0)," v",m.toString(),(0,_.jsx)("span",{className:"versionItem",children:v&&(0,_.jsx)(ne,{type:v})})]}),(0,_.jsx)(u.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:f.map(((e,t)=>(0,_.jsx)(u.m_M,{tooltip:e.tooltip,children:(0,_.jsx)(u.K0,{size:"small",id:`version-action-${e.tooltip}-${t.toString()}`,className:"spacing "+(b?"buttonDisabled":""),disabled:b,onClick:t=>{t.stopPropagation(),b?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},`version-action-${e.tooltip}-${t.toString()}`)))})]})}),(0,_.jsx)(u.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,_.jsxs)(u.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,_.jsxs)("span",{className:"versionData",children:[(0,_.jsx)("strong",{children:"Last modified:"})," ",S.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,_.jsxs)("span",{className:"versionData",children:[(0,_.jsx)("strong",{children:"Size:"})," ",(0,j.nO)(`${n.size||"0"}`)]})]})]})})},x)})},ie=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:d}=e;const c=(0,a.j)(),[h,x]=(0,s.useState)(!1),[p,j]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),f=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),v=(0,S._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if((0,s.useEffect)((()=>{h&&r.F.buckets.deleteObject(i,{prefix:d,non_current_versions:!0,bypass:g}).then((()=>{t(!0)})).catch((e=>{c((0,y.C9)((0,m.S)(e.error))),x(!1)}))}),[h,t,c,d,i,g]),!d)return null;return(0,_.jsx)(J.A,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,_.jsx)(u.xWY,{}),isLoading:h,onConfirm:()=>{x(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==p||h},confirmationContent:(0,_.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,_.jsx)("b",{children:d}),"? ",(0,_.jsx)("br",{}),v&&(0,_.jsx)(s.Fragment,{children:(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)(u.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!g)},description:""})})}),(0,_.jsx)("br",{}),"To continue please type ",(0,_.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)(u.xA9,{item:!0,xs:12,children:(0,_.jsx)(u.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{j(e.target.value)},label:"",value:p})})]})})},re=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:d,selectedObject:c}=e;const h=(0,a.j)(),[x,p]=(0,s.useState)(!1),[j,g]=(0,s.useState)(!1),b=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),f=(0,S._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===b||void 0===b?void 0:b.mode);return(0,s.useEffect)((()=>{if(x){const e=d.map((e=>({path:c,versionID:e,recursive:!1})));e.length>0&&r.F.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:j}).then((()=>{p(!1),t(!0)})).catch((e=>{h((0,y.C9)((0,m.S)(e.error))),p(!1)}))}}),[x,t,i,c,d,j,h]),d?(0,_.jsx)(J.A,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,_.jsx)(u.xWY,{}),isLoading:x,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,_.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",d.length," ","versions for ",(0,_.jsx)("strong",{children:c}),"?",f&&(0,_.jsx)(s.Fragment,{children:(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)(u.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!j)},description:""})})})]})}):null};var ae=n(9198);const le={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},de=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,a.j)(),l=(0,o.d4)((e=>e.objectBrowser.searchVersions)),c=(0,o.d4)((e=>e.objectBrowser.loadingVersions)),x=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),p=(0,o.d4)(y.Rq),[g,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[S,w]=(0,s.useState)(null),[O,C]=(0,s.useState)([]),[T,E]=(0,s.useState)(!1),[k,A]=(0,s.useState)(null),[N,B]=(0,s.useState)("date"),[F,V]=(0,s.useState)(!1),[D,P]=(0,s.useState)(!1),[R,z]=(0,s.useState)(!1),[M,J]=(0,s.useState)([]),[W,K]=(0,s.useState)(!1);let H=[];f&&f.name&&(H=f.name.split("/")),(0,s.useEffect)((()=>{c||f||i((0,d.SK)(!0))}),[c,f,i]),(0,s.useEffect)((()=>{c&&""!==t&&r.F.buckets.listObjects(n,{prefix:t,with_versions:p}).then((e=>{const n=h()(e.data,"objects",[]).filter((e=>e.name===t));p?(v(n.find((e=>e.is_latest))||le),C(n)):(v(n[0]),C([])),i((0,d.SK)(!1))})).catch((e=>{i((0,y.C9)((0,m.S)(e.error))),i((0,d.SK)(!1))}))}),[c,n,t,i,p]);const Y=e=>{w(e),b(!0)},Z=e=>{w(e),V(!0)},q=e=>{A(e),E(!0)},Q=e=>{(0,L._)(i,n,t,e)},X=e=>{i((0,d.Ai)(e.version_id||""))},ee=O.filter((e=>!!e.version_id&&e.version_id.includes(l))),ne=O.reduce(((e,t)=>t.size?e+t.size:e),0);ee.sort(((e,t)=>{if("size"===N)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const se=e=>{if(M.includes(e)){const t=M.filter((t=>t!==e));return void J(t)}const t=[...M];t.push(e),J(t)};return(0,_.jsxs)(s.Fragment,{children:[g&&f&&(0,_.jsx)(G.default,{open:g,closeModalAndRefresh:()=>{w(null),b(!1),V(!1)},bucketName:n,dataObject:S||f}),T&&f&&k&&(0,_.jsx)(te,{restoreOpen:T,bucketName:n,versionToRestore:k,objectPath:f.name||"",onCloseAndUpdate:e=>{E(!1),A(null),e&&(i((0,d.SK)(!0)),i((0,d.oe)(!0)))}}),F&&f&&(0,_.jsx)(U.default,{open:F,bucketName:n,actualInfo:{name:f.name||"",version_id:S&&S.version_id?S.version_id:"null",size:S&&S.size?S.size:0,content_type:"",last_modified:f.last_modified||""},onClosePreview:()=>{V(!1)}}),D&&(0,_.jsx)(ie,{deleteOpen:D,closeDeleteModalAndRefresh:e=>{P(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)))},selectedBucket:n,selectedObject:t}),W&&(0,_.jsx)(re,{selectedBucket:n,selectedObject:t,deleteOpen:W,selectedVersions:M,closeDeleteModalAndRefresh:e=>{K(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)),J([]))}}),(0,_.jsxs)(u.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!f&&(0,_.jsx)(u.xA9,{item:!0,xs:12,children:(0,_.jsx)(u.z21,{})}),f&&(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)(u.xA9,{item:!0,xs:12,children:(0,_.jsx)(I,{bucketName:n,internalPaths:t,hidePathButton:!0})}),(0,_.jsx)(u.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},[`@media (max-width: ${u.nmC.md}px)`]:{"&::before":{display:"none"}}},children:(0,_.jsx)(u.lcx,{icon:(0,_.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,_.jsx)(u.j1U,{style:{width:20,height:20}})}),title:`${H.length>0?H[H.length-1]:f.name} Versions`,subTitle:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)("span",{className:"detailsSpacer",children:(0,_.jsxs)("strong",{children:[O.length," Version",1===O.length?"":"s","\xa0\xa0\xa0"]})}),(0,_.jsx)("span",{className:"detailsSpacer",children:(0,_.jsx)("strong",{children:(0,j.qO)(ne)})})]}),actions:(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)($.A,{tooltip:"Select Multiple Versions",children:(0,_.jsx)(u.$nd,{id:"select-multiple-versions",onClick:()=>{z(!R)},icon:(0,_.jsx)(u.IN,{}),variant:R?"callAction":"regular",style:{marginRight:8}})}),R&&(0,_.jsx)($.A,{tooltip:"Delete Selected Versions",children:(0,_.jsx)(u.$nd,{id:"delete-multiple-versions",onClick:()=>{K(!0)},icon:(0,_.jsx)(u.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===M.length})}),(0,_.jsx)($.A,{tooltip:"Delete Non Current Versions",children:(0,_.jsx)(u.$nd,{id:"delete-non-current",onClick:()=>{P(!0)},icon:(0,_.jsx)(u.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:O.length<=1})}),(0,_.jsx)(u.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:N,label:"Sort by",onChange:e=>{B(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,_.jsx)(u.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",[`@media (max-width: ${u.nmC.md}px)`]:{height:600}},children:f.version_id&&"null"!==f.version_id&&(0,_.jsx)(ae.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:ee.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const r=O.length-n;return(0,_.jsx)(oe,{style:i,fileName:(null===f||void 0===f?void 0:f.name)||"",versionInfo:ee[n],index:r,onDownload:Q,onRestore:q,onShare:Y,onPreview:Z,globalClick:X,isSelected:x===ee[n].version_id,checkable:R,onCheck:se,isChecked:M.includes(ee[n].version_id||"")},t)}})})]})]})]})},ce=e=>{if(e.name.endsWith("/"))return"";const t=p.c9.now(),n=p.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?`Today, ${n.toFormat("HH:mm")}`:n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},he=e=>e.name.endsWith("/")||!e.size?"-":(0,j.nO)(String(e.size)),ue=[{label:"Name",elementKey:"name",renderFunction:z,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:ce,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:he,renderFullObject:!0,width:100,enableSort:!0}],me=[{label:"Name",elementKey:"name",renderFunction:z,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:ce,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:he,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var xe=n(6537);const pe=()=>{const e=(0,a.j)(),t=(0,i.g)(),n=(0,i.Zp)(),[r,c]=(0,s.useState)("ASC"),[m,x]=(0,s.useState)("name"),p=t.bucketName||"",j=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),g=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),b=(0,o.d4)(xe.s$),f=!(null===b||void 0===b||!b.includes("object-browser-only")),v=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),w=(0,o.d4)((e=>e.objectBrowser.records)),y=(0,o.d4)((e=>e.objectBrowser.searchObjects)),O=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),C=(0,o.d4)((e=>e.objectBrowser.connectionError)),T=(0,o.d4)((e=>e.system.anonymousMode)),E=(0,S._)(p,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET]),I=w.filter((e=>{if(""===y)return!0;return e.name.toLowerCase().indexOf(y.toLowerCase())>=0})).sort((0,k.$w)(m));let A=[];A="ASC"===r?I:I.reverse();const N=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i=`/browser/${encodeURIComponent(p)}${o?`/${encodeURIComponent(o)}`:""}`;!T||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,d.KX)([])),n(i),T||(e((0,d.TO)(!0)),e((0,d.SK)(!0))),e((0,d.A7)(o))):(0,L._)(e,p,o,t)},sendOnlyId:!1}];let B=E||T?"This location is empty"+(v?"":", please try uploading a new file"):(0,l.vj)([l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");C&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let F="calc(100vh - 290px)";return f&&(F="calc(100vh - 315px)"),(0,_.jsx)(u.bQt,{itemActions:N,columns:v?me:ue,isLoading:g,entityName:"Objects",idField:"name",records:A,customPaperHeight:F,selectedItems:O,onSelect:T?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...O];return o?i.push(s):i=i.filter((e=>e!==s)),e((0,d.KX)(i)),e((0,d.A7)(null)),i},customEmptyMessage:B,sortEnabled:{currentSort:m,currentDirection:r,onSortClick:t=>{const n=h()(t,"sortDirection","DESC");x(t.sortBy),c(n),e((0,d.Yw)(!0))}},onSelectAll:()=>{if(e((0,d.A7)(null)),O.length===A.length)return void e((0,d.KX)([]));const t=A.map((e=>e.name));e((0,d.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=A[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:j?"100%":"initial"},noBackground:!0})},je=e=>{let{placeholder:t="",onChange:n,overrideClass:s,value:o,id:i="search-resource",label:r="",sx:a}=e;return(0,_.jsx)(u.cl_,{placeholder:t,className:s||"",id:i,label:r,onChange:e=>{n(e.target.value)},value:o,startIcon:(0,_.jsx)(u.WIv,{}),sx:a})},ge=()=>{const e=(0,a.j)(),t=(0,o.d4)((e=>e.objectBrowser.searchObjects));return(0,_.jsx)(je,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,d.$X)(t))},value:t})},be=w(s.lazy((()=>n.e(941).then(n.bind(n,5941))))),fe=w(s.lazy((()=>Promise.resolve().then(n.bind(n,718))))),ve=w(s.lazy((()=>n.e(704).then(n.bind(n,2704))))),Se=w(s.lazy((()=>Promise.resolve().then(n.bind(n,7524))))),_e={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},we={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},ye={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Oe=()=>{var e;const t=(0,a.j)(),n=(0,i.g)(),c=(0,i.Zp)(),g=(0,i.zy)(),b=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),f=(0,o.d4)((e=>e.objectBrowser.rewind.bucketToRewind)),v=(0,o.d4)((e=>e.objectBrowser.versionsMode)),w=(0,o.d4)((e=>e.objectBrowser.showDeleted)),T=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),E=(0,o.d4)((e=>e.objectBrowser.selectedInternalPaths)),L=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),P=(0,o.d4)((e=>e.objectBrowser.simplePath)),R=(0,o.d4)((e=>e.objectBrowser.versionInfo)),z=(0,o.d4)((e=>e.objectBrowser.downloadRenameModal)),U=(0,o.d4)((e=>e.objectBrowser.selectedPreview)),M=(0,o.d4)((e=>e.objectBrowser.shareFileModalOpen)),G=(0,o.d4)((e=>e.objectBrowser.previewOpen)),J=(0,o.d4)((e=>e.system.anonymousMode)),W=(0,o.d4)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),K=(0,o.d4)(B.Nx),H=(0,o.d4)(B.fT),[Y,Z]=(0,s.useState)(!1),[q,X]=(0,s.useState)(!1),[te,ne]=(0,s.useState)(!1),[se,oe]=(0,s.useState)(!1),[ie,re]=(0,s.useState)(!1),[ae,le]=(0,s.useState)(null),[ce,he]=(0,s.useState)(null),[ue,me]=(0,s.useState)(!1),xe=A(R.status),je=n.bucketName||"",Oe=g.pathname.split(`/browser/${je}/`),Ce=2===Oe.length?decodeURIComponent(Oe[1]):"",Te=Ce.split("/").filter((e=>""!==e));let Ee=[je];Te.length>0&&(Ee=Ee.concat(Te));const Ie=(0,s.useRef)(null),ke=(0,s.useRef)(null),Ae=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),Ne=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],Be=Ee.join("/"),Fe=function(e,t){const n=C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=O(t);return n&&e.push(`.${n}`),e}),[]);return[...new Set(n)].join(",")}(Ae,Be,Ne),$e=C(Ae,Be,Ne),Ve=(0,S._)([Be,...$e],[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),De=(0,S._)(je,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING]),Le=(0,S._)([Be,...$e],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]),Pe=(0,S._)([Be,...$e],Ne)||J,Re=(0,S._)(je,[l.OV.S3_GET_BUCKET_POLICY,l.OV.S3_PUT_BUCKET_POLICY,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),ze=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),Ue=(()=>{let e=!1;if(1===ze.length){e=!!W.find((e=>e.name===`${ze[0]}`&&e.delete_flag))}return e})(),Me=(0,s.useCallback)((()=>{const e=ze[0];!ue&&e&&r.F.buckets.getObjectMetadata(je,{prefix:e}).then((e=>{let t=h()(e.data,"objectMetadata",{});me(!0),he(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),me(!0)}))}),[je,ze,ue]);(0,s.useEffect)((()=>{je&&!Ue&&Me()}),[je,ze,Me,Ue]),(0,s.useEffect)((()=>{b&&f!==je&&t((0,d.rS)())}),[b,f,je,t]),(0,s.useEffect)((()=>{null!==ke.current&&(ke.current.setAttribute("directory",""),ke.current.setAttribute("webkitdirectory",""))}),[ke]),(0,s.useEffect)((()=>{if(1===ze.length){const e=ze[0],t=e.endsWith("/");let n=(0,k.IZ)(ce,e);re(!("none"===n||!Ve)),oe(!(!Ve||t))}else oe(!1),re(!1)}),[ze,Ve,ce]),(0,s.useEffect)((()=>{ae||J||r.F.buckets.getBucketQuota(je).then((e=>{let t=null;e.data.quota&&(t=e.data),le(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),le(null)}))}),[ae,je,J]),(0,s.useEffect)((()=>{ze.length>0?t((0,d.TO)(!0)):0!==ze.length||null!==E||L||t((0,d.TO)(!1))}),[ze,E,t,L]),(0,s.useEffect)((()=>{te||(t((0,B.ZU)(!0)),ne(!0))}),[te,t,ne]),(0,s.useEffect)((()=>{!L&&!K||J||r.F.buckets.bucketInfo(je).then((e=>{t((0,B.ZU)(!1)),t((0,B.$T)(e.data))})).catch((e=>{t((0,B.ZU)(!1)),t((0,y.C9)((0,m.S)(e)))}))}),[je,K,t,J,L]);const Ge=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);Je(t,""),e.target.value=""}},Je=(0,s.useCallback)(((e,n)=>{let s="";P&&(s=P.endsWith("/")?P:P+"/");((e,n,s,o)=>{let i=i=>new Promise(((r,a)=>{let l=`api/v1/buckets/${n}/objects/upload`;const c=i.name,u=new Blob([i],{type:i.type}),m=(e=>e.replace(/(^|\/)\.\//g,"/"))(h()(i,"path","")),x=h()(i,"webkitRelativePath","");let p=o;const j=(0,N.E0)(8);""!==m?p=m:""!==x&&(p=x);let g="";if(""!==s||""!==p){const e=p.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;g=`${t}${t.endsWith("/")||""===e||e.startsWith("/")?"":"/"}${e}${!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":""}`}l=""!==g?`${l}?prefix=${encodeURIComponent(g+c)}`:`${l}?prefix=${encodeURIComponent(c)}`;const b=encodeURIComponent(`${n}-${g}-${(new Date).getTime()}-${Math.random()}`);let f=new XMLHttpRequest;f.open("POST",l,!0),J&&f.setRequestHeader("X-Anonymous","1");let v=`An error occurred while uploading the file${e.length>1?"s":""}.`;const S={413:"Error - File size too large"};f.withCredentials=!1,f.onload=function(){if(f.status>=200&&f.status<300)t((0,d.rx)(b)),r({status:f.status}),(0,N.vy)(j);else{if(S[f.status])v=S[f.status];else if(f.response)try{const e=JSON.parse(f.response);v=e.detailedMessage}catch(e){v="something went wrong"}t((0,d.iL)({instanceID:b,msg:v})),a({status:f.status,message:v}),(0,N.vy)(j)}},f.upload.addEventListener("error",(()=>{a(v),t((0,d.iL)({instanceID:b,msg:"A network error occurred."}))})),f.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,d.DW)({instanceID:b,progress:n}))})),f.onerror=()=>{a(v),t((0,d.iL)({instanceID:b,msg:"A network error occurred."}))},f.onloadend=()=>{0===e.length&&t((0,d.Yw)(!0))},f.onabort=()=>{t((0,d.Dm)(b))};const _=new FormData;void 0!==i.size&&(_.append(i.size.toString(),u,c),(0,N.FP)(j,f),t((0,d.cP)({ID:j,bucketName:n,done:!1,instanceID:b,percentage:0,prefix:`${g}${c}`,type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,N.vx)(j,_))}));const r=[];t((0,d.Nu)());for(let t=0;t<e.length;t++){const n=e[t];r.push(i(n))}Promise.allSettled(r).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=r.length,s={errorMessage:"There were some errors during file upload",detailedError:`Uploaded files ${r.length-n.length}/${e}`};t((0,y.C9)(s))}t((0,d.Yw)(!0))}))})(e,je,s,n)}),[je,t,P,J]),We=(0,s.useCallback)((e=>{if(e&&e.length>0&&Pe){let n=e[0].path,s=e;Fe.length>0&&(s=e.filter((e=>{const t=O(e.name);return Fe.includes(t)}))),s.length?(Je(s,n),console.log(`${s.length} Allowed Files Processed out of ${e.length}.`,Be,...$e),s.length!==e.length&&t((0,y.C9)({errorMessage:"Upload is restricted.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,y.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Be,...$e))}Pe||t((0,y.C9)({errorMessage:"Upload not allowed",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))}),[Je]),{getRootProps:Ke,getInputProps:He,isDragActive:Ye,isDragAccept:Ze}=(0,x.VB)({noClick:!0,onDrop:We}),qe=(0,s.useMemo)((()=>({..._e,...Ye?we:{},...Ze?ye:{}})),[Ye,Ze]),Qe=e=>{if(t((0,d.A7)(null)),t((0,d.cQ)({status:!1})),T&&null!==E){const e=Ce.split("/");e.pop();let t="";e&&e.length>0&&(t=`${e.join("/")}/`),c(`/browser/${encodeURIComponent(je)}/${encodeURIComponent(t)}`)}t((0,d.TO)(!1)),e&&t((0,d.Yw)(!0))};let Xe=p.c9.now();null!==H&&void 0!==H&&H.creation_date&&(Xe=p.c9.fromISO(H.creation_date));const et=(null===ze||void 0===ze?void 0:ze.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",tt=[{action:()=>{t((0,F.op)(je))},label:"Download",disabled:!Ve||Ue,icon:(0,_.jsx)(u.s3U,{}),tooltip:Ve?et:(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,F.mS)())},label:"Share",disabled:1!==ze.length||!se||Ue,icon:(0,_.jsx)(u.liv,{}),tooltip:se?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,F.HS)())},label:"Preview",disabled:1!==ze.length||!ie||Ue,icon:(0,_.jsx)(u.cyn,{}),tooltip:ie?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,F.oz)())},label:"Anonymous Access",disabled:1!==ze.length||!ze[0].endsWith("/")||!Re,icon:(0,_.jsx)(u._kf,{}),tooltip:1===ze.length&&ze[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{Z(!0)},label:"Delete",icon:(0,_.jsx)(u.d7y,{}),disabled:!Le||0===ze.length,tooltip:Le?"Delete Selected Files":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete objects in this bucket")}];return(0,_.jsxs)(s.Fragment,{children:[M&&U&&(0,_.jsx)(fe,{open:M,closeModalAndRefresh:()=>{t((0,d.Lf)(!1)),t((0,d.go)(null))},bucketName:je,dataObject:{name:U.name,last_modified:"",version_id:U.version_id}}),Y&&(0,_.jsx)(be,{deleteOpen:Y,selectedBucket:je,selectedObjects:ze,closeDeleteModalAndRefresh:e=>{Z(!1),e&&(t((0,y.Hk)("Objects deleted successfully.")),t((0,d.KX)([])),t((0,d.Yw)(!0)))},versioning:R}),q&&(0,_.jsx)(ve,{open:q,closeModalAndRefresh:()=>{X(!1)},bucketName:je}),G&&U&&(0,_.jsx)(Se,{open:G,bucketName:je,actualInfo:{name:U.name||"",last_modified:"",version_id:U.version_id||"",size:U.size||0},onClosePreview:()=>{t((0,d.xE)(!1)),t((0,d.go)(null))}}),!!z&&(0,_.jsx)(Q,{open:!!z,closeModal:()=>{t((0,d.Ew)(null))},currentItem:(null===(e=z.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:je,internalPaths:Ce,actualInfo:{name:z.name,last_modified:"",version_id:z.version_id,size:z.size}}),(0,_.jsxs)(u.Mxu,{variant:"full",children:[J&&(0,_.jsx)("div",{style:{paddingBottom:16},children:(0,_.jsx)(ge,{})}),(0,_.jsx)(u.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,_.jsx)(u.lcx,{icon:(0,_.jsx)("span",{children:(0,_.jsx)(u.brV,{style:{width:30}})}),title:je,subTitle:J?null:(0,_.jsxs)(u.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,_.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,_.jsx)("strong",{children:null!==H&&void 0!==H&&H.creation_date?Xe.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,_.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,_.jsx)("strong",{children:(null===H||void 0===H?void 0:H.access)||""})]}),H&&(0,_.jsx)(s.Fragment,{children:(0,_.jsxs)("span",{className:"detailsSpacer",children:[H.size&&(0,_.jsx)(s.Fragment,{children:(0,j.qO)(H.size)}),H.size&&ae&&(0,_.jsxs)(s.Fragment,{children:[" ","/ ",(0,j.qO)(ae.quota||0)]}),H.size&&H.objects?" - ":"",H.objects&&(0,_.jsxs)(s.Fragment,{children:[H.objects,"\xa0Object",H.objects&&1!==H.objects?"s":""]})]})})]}),actions:(0,_.jsxs)(s.Fragment,{children:[!J&&(0,_.jsx)($.A,{tooltip:De?"Rewind Bucket":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING],"apply rewind in this bucket"),children:(0,_.jsx)(u.$nd,{id:"rewind-objects-list",label:"Rewind",icon:(0,_.jsx)(u.Exy,{color:"alert",dotOnly:!0,invisible:!b,children:(0,_.jsx)(u.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{X(!0)},disabled:!xe||!De})}),(0,_.jsx)($.A,{tooltip:"Reload List",children:(0,_.jsx)(u.$nd,{id:"refresh-objects-list",label:"Refresh",icon:(0,_.jsx)(u.fNY,{}),variant:"regular",onClick:()=>{v?t((0,d.SK)(!0)):(t((0,d.A3)()),t((0,d.Yw)(!0)))},disabled:!J&&(!(0,S._)(je,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||b)})}),(0,_.jsx)("input",{type:"file",multiple:!0,accept:Fe||void 0,onChange:Ge,style:{display:"none"},ref:Ie}),(0,_.jsx)("input",{type:"file",multiple:!0,onChange:Ge,style:{display:"none"},ref:ke}),(0,_.jsx)(V,{bucketName:je,uploadPath:Be,uploadFileFunction:e=>{Ie&&Ie.current&&Ie.current.click(),e()},uploadFolderFunction:e=>{ke&&ke.current&&ke.current.click(),e()}})]}),bottomBorder:!1})}),(0,_.jsxs)("div",{id:"object-list-wrapper",...Ke({style:{...qe}}),children:[(0,_.jsx)("input",{...He()}),(0,_.jsxs)(u.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[v?(0,_.jsx)(s.Fragment,{children:null!==E&&(0,_.jsx)(de,{internalPaths:E,bucketName:je})}):(0,_.jsx)(S.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:je,errorProps:{disabled:!0},children:(0,_.jsxs)(u.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:T?"detailsOpen":"",children:[!J&&(0,_.jsx)(u.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,_.jsx)(I,{bucketName:je,internalPaths:Ce,additionalOptions:!xe||b?null:(0,_.jsx)(u.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,d.A3)()),t((0,d.lA)(!w)),Qe(!0)},checked:w,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,_.jsx)(pe,{})]})}),!J&&(0,_.jsx)(S.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:je,errorProps:{disabled:!0},children:(0,_.jsxs)(D,{open:T,closePanel:()=>{Qe(!1)},className:""+(v?"hideListOnSmall":""),children:[ze.length>0&&(0,_.jsx)(u.Smc,{items:tt,title:"Selected Objects:"}),null!==E&&(0,_.jsx)(ee,{internalPaths:E,bucketName:je,onClosePanel:Qe,versioningInfo:R})]})})]})]})]})]})};var Ce=n(8218);const Te=e=>{let{marginRight:t,marginTop:s}=e,i=n(3498);const r=(0,o.d4)((e=>e.system.overrideStyles)),a=i((null===r||void 0===r?void 0:r.backgroundColor)||"#fff").getBrightness()<=128;return(0,_.jsx)(u.xA9,{sx:{"& svg":{width:105,marginRight:t,marginTop:s,fill:a?"#fff":"#081C42"}},children:(0,_.jsx)(u.xul,{})})};var Ee=n(8793),Ie=n(9707),ke=n(8617);const Ae=e=>{let{bucketName:t}=e;const n=(0,a.j)(),i=(0,o.d4)(xe.s$),r=(0,o.d4)((e=>e.objectBrowser.versionsMode)),c=(0,o.d4)((e=>e.objectBrowser.versionedFile)),h=(0,o.d4)((e=>e.objectBrowser.searchVersions)),m=!(null===i||void 0===i||!i.includes("object-browser-only")),x=(0,_.jsx)(s.Fragment,{children:r?(0,_.jsx)(s.Fragment,{children:(0,_.jsx)(je,{placeholder:`Start typing to filter versions of ${c}`,onChange:e=>{n((0,d.aj)(e))},value:h})}):(0,_.jsx)(S.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,_.jsx)(ge,{})})});return(0,s.useEffect)((()=>{n((0,y.ph)("object_browser"))}),[]),(0,_.jsx)(s.Fragment,{children:m?(0,_.jsxs)(u.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,_.jsx)(u.xA9,{children:(0,_.jsx)(Te,{marginRight:30,marginTop:10})}),(0,_.jsxs)(u.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[x,(0,_.jsx)(Ie.A,{})]})]}):(0,_.jsx)(Ee.A,{label:"Object Browser",actions:(0,_.jsx)(s.Fragment,{children:(0,_.jsx)(ke.A,{})}),middleComponent:x})})},Ne=()=>{const e=(0,a.j)(),t=(0,i.g)(),n=(0,i.zy)(),c=(0,o.d4)((e=>e.objectBrowser.loadingVersioning)),h=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),u=(0,o.d4)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.d4)((e=>e.objectBrowser.showDeleted)),x=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),p=(0,o.d4)((e=>e.objectBrowser.reloadObjectsList)),j=(0,o.d4)((e=>e.objectBrowser.simplePath)),g=(0,o.d4)((e=>e.system.anonymousMode)),b=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),f=(0,o.d4)((e=>e.objectBrowser.records)),v=t.bucketName||"",S=n.pathname.split(`/browser/${encodeURIComponent(v)}/`),w=2===S.length?decodeURIComponent(S[1]):"",y=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==u&&h&&(n=u);e({type:"socket/OBRequest",payload:{bucketName:v,path:t,rewindMode:h||m,date:n}})}),[v,m,u,h,e]),O=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e((0,d.cQ)({status:!1}));let n=w;w.endsWith("/")||""===w||(n=`${w.split("/").slice(0,-1).join("/")}/`),"/"===n&&(n=""),(n!==j||v!==b||t)&&(e((0,d.u)(!0)),y(n))}),[w,e,j,b,v,y]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{e((0,d.vn)(!0)),w.endsWith("/")||""===w?(e((0,d.TO)(!1)),e((0,d.A7)(null)),e((0,d.Qy)(!0))):(e((0,d.oe)(!0)),e((0,d.TO)(!0)),e((0,d.SK)(!0)),e((0,d.A7)(w||"")))}),[v,w,u,h,e]),(0,s.useEffect)((()=>{O(!1)}),[O]),(0,s.useEffect)((()=>{p&&0===f.length&&!x&&O(!0)}),[p,f,x,O]);const C=(0,Ce.A)(v,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||g;return(0,s.useEffect)((()=>{c&&!g&&(C?r.F.buckets.getBucketVersioning(v).then((t=>{e((0,d.AP)(t.data)),e((0,d.vn)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.vn)(!1))})):(e((0,d.vn)(!1)),e((0,d.A3)())))}),[v,c,e,C,g]),(0,_.jsxs)(s.Fragment,{children:[!g&&(0,_.jsx)(Ae,{bucketName:v}),(0,_.jsx)(Oe,{})]})}},718:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var s=n(5043),o=n(2166),i=n(9923),r=n(1476),a=n.n(r),l=n(4141),d=n(4241),c=n(579);const h=e=>{let{id:t,label:n,maxSeconds:o,entity:r,onChange:a}=e;const l=Math.floor(o/86400),h=Math.floor(o%86400/3600),u=Math.floor(o%3600/60),[m,x]=(0,s.useState)(0),[p,j]=(0,s.useState)(0),[g,b]=(0,s.useState)(0),[f,v]=(0,s.useState)(!0),[S,_]=(0,s.useState)(null);(0,s.useEffect)((()=>{x(l),j(h),b(u)}),[l,h,u]),(0,s.useEffect)((()=>{var e,t,n;isNaN(p)||isNaN(m)||isNaN(g)||_((e=m,t=p,n=g,d.c9.now().plus({hours:t+24*e,minutes:n}).toISO()))}),[m,p,g]),(0,s.useEffect)((()=>{if(f&&S){const e=d.c9.fromISO(S).toFormat("yyyy-MM-dd HH:mm:ss");a(e.split(" ").join("T"),!0)}else a("0000-00-00",!1)}),[S,a,f]),(0,s.useEffect)((()=>{let e=!0;(m<0||m>7||m>l||isNaN(m))&&(e=!1),(p<0||p>23||isNaN(p))&&(e=!1),(g<0||g>59||isNaN(g))&&(e=!1),m===l&&(p>h&&(e=!1),p===h&&g>u&&(e=!1)),m<=0&&p<=0&&g<=0&&(e=!1),v(e)}),[S,l,h,u,a,m,p,g]);const w={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,c.jsxs)(i.azJ,{className:"inputItem",children:[(0,c.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,c.jsx)(i.l1Y,{htmlFor:t,children:n})}),(0,c.jsxs)(i.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"7",label:"Days",name:t,onChange:e=>{x(parseInt(e.target.value))},value:m.toString(),sx:w,noLabelMinWidth:!0})}),(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{j(parseInt(e.target.value))},value:p.toString(),sx:w,noLabelMinWidth:!0})}),(0,c.jsx)(i.azJ,{children:(0,c.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{b(parseInt(e.target.value))},value:g.toString(),sx:w,noLabelMinWidth:!0})})]}),(0,c.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:f&&S?(0,c.jsxs)("div",{className:"validityText",children:[(0,c.jsx)(i.qYV,{}),(0,c.jsxs)("div",{children:[r," will be available until:"]})," ",(0,c.jsx)("div",{className:"validTill",children:d.c9.fromISO(S).toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,c.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var u=n(6483),m=n(4159),x=n(3635),p=n(6629),j=n(3518),g=n(1708),b=n(6035),f=n(3950),v=n.n(f);const S=e=>{let{open:t,closeModalAndRefresh:n,bucketName:r,dataObject:d}=e;const f=(0,x.j)(),S=(0,o.d4)(m.Rq),_=(0,o.d4)(b.yL),[w,y]=(0,s.useState)(""),[O,C]=(0,s.useState)(!0),[T,E]=(0,s.useState)(!1),[I,k]=(0,s.useState)(""),[A,N]=(0,s.useState)(!0),[B,F]=(0,s.useState)("null"),$=v()(((e,t)=>{N(t),t?k(e):(k(""),y(""))}),300);return(0,s.useEffect)((()=>{f((0,g.Ex)())}),[f]),(0,s.useEffect)((()=>{if(void 0===d.version_id)return S?(p.F.buckets.listObjects(r,{prefix:d.name||"",with_versions:S}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));F(t?`${t.version_id}`:"null")})).catch((e=>{f((0,m.Dy)((0,j.S)(e.error)))})),void C(!1)):(F("null"),void C(!1));F(d.version_id||"null"),C(!1)}),[r,d,S,f]),(0,s.useEffect)((()=>{if(A&&!O){E(!0),y("");const e=new Date(`${I}`),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.F.buckets.shareObject(r,{prefix:d.name||"",version_id:B,expires:""!==I?`${n}s`:""}).then((e=>{y(e.data),E(!1)})).catch((e=>{f((0,m.Dy)((0,j.S)(e.error))),y(""),E(!1)}))}}),[d,I,r,A,y,f,S,O,B]),(0,c.jsx)(s.Fragment,{children:(0,c.jsxs)(l.A,{title:"Share File",titleIcon:(0,c.jsx)(i.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[O&&(0,c.jsx)(i.xA9,{item:!0,xs:12,children:(0,c.jsx)(i.z21,{})}),!O&&(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(i.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,c.jsx)(i.m_M,{placement:"right",tooltip:(0,c.jsxs)("span",{children:["You can reset your session by logging out and logging back in to the web UI. ",(0,c.jsx)("br",{})," ",(0,c.jsx)("br",{}),"You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes. ",(0,c.jsx)("br",{})," ",(0,c.jsx)("br",{}),"You can use ",(0,c.jsx)("b",{children:"mc share"})," as an alternative to this UI, where the session length does not limit the URL validity."]}),children:(0,c.jsxs)("span",{children:["The following URL lets you share this object without requiring a login. ",(0,c.jsx)("br",{}),"The URL expires automatically at the earlier of your configured time (",(0,u.K7)(_),") or the expiration of your current web session."]})})}),(0,c.jsx)("br",{}),(0,c.jsx)(i.xA9,{item:!0,xs:12,children:(0,c.jsx)(h,{id:"date",label:"Active for",maxSeconds:_,onChange:$,entity:"Link"})}),(0,c.jsx)(i.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,c.jsx)(i.EmB,{actionButton:(0,c.jsx)(a(),{text:w,children:(0,c.jsx)(i.$nd,{id:"copy-path",variant:"regular",onClick:()=>{f((0,m.h0)("Share URL Copied to clipboard"))},disabled:""===w||T,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,c.jsx)(i.TdU,{})})}),children:w})})]})]})})}},7524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var s=n(5043),o=n(4141),i=n(9923),r=n(3097),a=n.n(r),l=n(3445),d=n(6629),c=n(9355),h=n(7806),u=n(6584),m=n(579);c.EA.workerSrc="./scripts/pdf.worker.min.mjs";const x=e=>{let{path:t,loading:n,onLoad:o,downloadFile:r}=e;const[a,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(0);if(!t)return null;const x=d>5?5:d,p=Array.from(Array(x).keys());return(0,m.jsxs)(s.Fragment,{children:[a&&0===d&&(0,m.jsx)(i.Wei,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:r,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!a&&(0,m.jsx)(i.Wei,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:r,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!a&&(0,m.jsx)(i.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(h.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;c(t.numPages||0),l(!1),o()},onLoadError:e=>{l(!0),o(),console.error(e)},children:p.map((e=>(0,m.jsx)(u.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},`render-page-${e}`)))})})]})};var p=n(8245),j=n(3635);const g=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const r=(0,j.j)(),[c,h]=(0,s.useState)(!0),[u,g]=(0,s.useState)(null),[b,f]=(0,s.useState)(!1),v=(null===n||void 0===n?void 0:n.name)||"",S=(0,s.useCallback)((()=>{b||d.F.buckets.getObjectMetadata(t,{prefix:v,versionID:n.version_id||""}).then((e=>{let t=a()(e.data,"objectMetadata",{});f(!0),g(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),f(!0)}))}),[t,v,b,n.version_id]);(0,s.useEffect)((()=>{t&&v&&S()}),[t,v,S]);let _="";if(n){let e=document.baseURI.replace(window.location.origin,"");_=`${window.location.origin}${e}api/v1/buckets/${encodeURIComponent(t)}/objects/download?preview=true&prefix=${encodeURIComponent(n.name||"")}`,n.version_id&&(_=_.concat(`&version_id=${n.version_id}`))}let w=(0,l.IZ)(u,v);const y=()=>{h(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==w&&c&&(0,m.jsx)(i.xA9,{item:!0,xs:12,children:(0,m.jsx)(i.z21,{})}),b?(0,m.jsxs)(i.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===w&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:_,type:"video/mp4"})}),"audio"===w&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:_,type:"audio/mpeg"})}),"image"===w&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:_,alt:"preview",onLoad:y}),"pdf"===w&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(x,{path:_,onLoad:y,loading:c,downloadFile:()=>(0,p._)(r,t,_,n)})}),"none"===w&&(0,m.jsx)("div",{children:(0,m.jsx)(i.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==w&&"video"!==w&&"audio"!==w&&"image"!==w&&"pdf"!==w&&(0,m.jsx)("div",{className:"iframeBase "+(c?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:_,title:"File Preview",allowTransparency:!0,className:`iframeContainer ${o?"fullHeight":w}`,onLoad:y,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},b=e=>{let{open:t,bucketName:n,actualInfo:r,onClosePreview:a}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.A,{modalOpen:t,title:`Preview - ${null===r||void 0===r?void 0:r.name}`,onClose:a,wideLimit:!1,titleIcon:(0,m.jsx)(i.jG,{}),children:(0,m.jsx)(g,{bucketName:n,actualInfo:r})})})}},7403:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});const s={modalButtonBar:{marginTop:15,display:"flex",alignItems:"center",justifyContent:"flex-end",gap:10},modalFormScrollable:{maxHeight:"calc(100vh - 300px)",overflowY:"auto",paddingTop:10}}},5448:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(5043),o=n(649);const i=(e,t)=>{const[n,i]=(0,s.useState)(!1);return[n,(n,s,r,a)=>{i(!0),o.A.invoke(n,s,r,a).then((t=>{i(!1),e(t)})).catch((e=>{i(!1),t(e)}))}]}},8661:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var s=n(9923),o=n(579);const i=e=>{let{isOpen:t=!1,onClose:n,onCancel:i,onConfirm:r,title:a="",isLoading:l,confirmationContent:d,cancelText:c="Cancel",confirmText:h="Confirm",confirmButtonProps:u,cancelButtonProps:m,titleIcon:x=null,confirmationButtonSimple:p=!1}=e;return(0,o.jsxs)(s.ngX,{title:a,titleIcon:x,onClose:n,open:t,customMaxWidth:510,children:[(0,o.jsx)(s.azJ,{children:d}),(0,o.jsxs)(s.azJ,{sx:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:20},children:[(0,o.jsx)(s.$nd,{onClick:i||n,disabled:l,type:"button",...m,variant:"regular",id:"confirm-cancel",label:c}),(0,o.jsx)(s.$nd,{id:"confirm-ok",onClick:r,label:h,disabled:l,variant:"secondary",...u})]})]})}},1708:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>p,HS:()=>u,mS:()=>m,op:()=>h,oz:()=>x});var s=n(907),o=n(6483),i=n(7414),r=n(3445),a=n(6035),l=n(4159),d=n(4241),c=n(6629);const h=(0,s.zD)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:c}=t;const h=n(),u=t=>{const n=encodeURIComponent(`${e}-${t.name}-${(new Date).getTime()}-${Math.random()}`),s=(0,i.E0)(8),o=(0,r.RG)(e,t.name,t.version_id,t.size,null,s,(e=>{c((0,a.DW)({instanceID:n,progress:e}))}),(()=>{c((0,a.rx)(n))}),(e=>{c((0,a.iL)({instanceID:n,msg:e}))}),(()=>{c((0,a.Dm)(n))}),(()=>{c((0,l.Hk)("File download will be handled directly by the browser."))}));(0,i.FP)(s,o),c((0,a.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==h.objectBrowser.selectedObjects.length){let t=[];const n=e=>h.objectBrowser.selectedObjects.includes(e.name);if(t=h.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void c((0,a.Ew)(t[0]));u(t[0])}else if(1===t.length)u(t[0]);else if(t.length>1){const n=`${d.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss")}_files_list.zip`,s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log(`Skipping ${null===t||void 0===t?void 0:t.name} from download.`),e}),[]);return void await(0,r.Fj)(e,s,n)}}})),u=(0,s.zD)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,a.go)(e)),o((0,a.xE)(!0)))}})),m=(0,s.zD)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,a.go)(e)),o((0,a.Lf)(!0)))}})),x=(0,s.zD)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,a.I8)(!0))})),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",(async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return c.F.buckets.getMaxShareLinkExp().then((e=>{s((0,a.QV)(e.data.exp))})).catch((async e=>n(e.error)))}))},8245:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var s=n(6483),o=n(7414),i=n(3445),r=n(6035),a=n(4159);const l=(e,t,n,l)=>{var d;const c=encodeURIComponent(`${t}-${l.name}-${(new Date).getTime()}-${Math.random()}`),h=(0,s.oK)().toLowerCase().includes("win");if(((null===(d=l.name)||void 0===d?void 0:d.length)||0)>200&&h)return void e((0,r.Jl)(!0));const u=(0,o.E0)(8),m=(0,i.RG)(t,n,l.version_id,l.size||0,null,u,(t=>{e((0,r.DW)({instanceID:c,progress:t}))}),(()=>{e((0,r.rx)(c))}),(t=>{e((0,r.iL)({instanceID:c,msg:t}))}),(()=>{e((0,r.Dm)(c))}),(()=>{e((0,a.Hk)("File download will be handled directly by the browser."))}));(0,o.FP)(u,m),e((0,r.cP)({ID:u,bucketName:t,done:!1,instanceID:c,percentage:0,prefix:l.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},2634:()=>{}}]);
//# sourceMappingURL=88.3f29d160.chunk.js.map