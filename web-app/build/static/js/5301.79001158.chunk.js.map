{"version":3,"file":"static/js/5301.79001158.chunk.js","mappings":"wOA0BA,MAgCA,EAhCmBA,KACjB,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MA2BjB,OA1BAC,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAgBA,KACpBL,GAASM,EAAAA,EAAAA,KAAW,IAEpBN,EAAS,CAAEO,KAAM,wBACjBC,aAAaC,QAAQ,eAAgB,IACrCD,aAAaC,QAAQ,gBAAiB,IACtCT,GAASU,EAAAA,EAAAA,QACTC,EAAAA,EAAAA,MAEAT,EAAS,UACTU,OAAOC,SAASC,QAAQ,EAGXC,MACb,MAAMC,EAAQR,aAAaS,QAAQ,cACnCC,EAAAA,EACGC,OAAO,OAAO,iBAAmB,CAAEH,UACnCI,KAAKf,GACLgB,OAAOC,IACNC,QAAQC,MAAMF,GACdjB,GAAe,GACf,EAENU,EAAQ,GACP,CAACf,EAAUE,KACPuB,EAAAA,EAAAA,KAACC,EAAAA,EAAgB,GAAG,C","sources":["screens/LogoutPage/LogoutPage.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAppDispatch } from \"../../store\";\nimport { ErrorResponseHandler } from \"../../common/types\";\nimport { clearSession } from \"../../common/utils\";\nimport { userLogged } from \"../../systemSlice\";\nimport { resetSession } from \"../Console/consoleSlice\";\nimport api from \"../../common/api\";\nimport LoadingComponent from \"../../common/LoadingComponent\";\n\nconst LogoutPage = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const deleteSession = () => {\n      dispatch(userLogged(false));\n      // Disconnect OB Websocket\n      dispatch({ type: \"socket/OBDisconnect\" });\n      localStorage.setItem(\"userLoggedIn\", \"\");\n      localStorage.setItem(\"redirect-path\", \"\");\n      dispatch(resetSession());\n      clearSession();\n\n      navigate(\"/login\");\n      window.location.reload(); //reset-all redux states etc. by force reloading.\n    };\n\n    const logout = () => {\n      const state = localStorage.getItem(\"auth-state\");\n      api\n        .invoke(\"POST\", `/api/v1/logout`, { state })\n        .then(deleteSession)\n        .catch((err: ErrorResponseHandler) => {\n          console.error(err);\n          deleteSession();\n        });\n    };\n    logout();\n  }, [dispatch, navigate]);\n  return <LoadingComponent />;\n};\n\nexport default LogoutPage;\n"],"names":["LogoutPage","dispatch","useAppDispatch","navigate","useNavigate","useEffect","deleteSession","userLogged","type","localStorage","setItem","resetSession","clearSession","window","location","reload","logout","state","getItem","api","invoke","then","catch","err","console","error","_jsx","LoadingComponent"],"sourceRoot":""}