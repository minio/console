"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6577],{96577:(t,e,s)=>{s.r(e),s.d(e,{default:()=>N});var i=s(72791),n=s(29945),a=s(57689),l=s(56087),o=s(44690),r=s(87995),c=s(9505),u=s(31300),x=s(16444),p=s(26181),d=s.n(p),h=s(80184);const m=x.ZP.div((t=>{let{theme:e}=t;return{marginTop:15,table:{width:"100%",borderCollapse:"collapse","& .feature-cell":{fontWeight:600,fontSize:14,paddingLeft:15},"& .status-cell":{textAlign:"center"},"& .header-cell":{textAlign:"center"},"& tr":{height:38,"& td":{borderBottom:"1px solid ".concat(d()(e,"borderColor","#E2E2E2"))},"& th":{borderBottom:"2px solid ".concat(d()(e,"borderColor","#E2E2E2"))}},"& .indicator":{display:"flex",alignItems:"center",justifyContent:"center","& .min-icon":{height:15,width:15},"&.active":{"& .min-icon":{fill:d()(e,"signalColors.good","#4CCB92")}},"&.deactivated":{"& .min-icon":{fill:d()(e,"signalColors.danger","#C51B3F")}}}}}})),g=t=>{let{matrixData:e=[],entityName:s="",entityType:i=""}=t;const[a=[],...l]=e,o=a.map(((t,e)=>(0,h.jsx)("th",{className:"header-cell",children:t},"".concat(0,e)))),r=l.map(((t,e)=>(0,h.jsx)("tr",{children:t.map(((t,s)=>{let i=null;return 0===s?i=t:""===t&&(i=""),!0===t?i=(0,h.jsx)(n.xuv,{className:"indicator active",children:(0,h.jsx)(n.J$M,{})}):!1===t&&(i=(0,h.jsx)(n.xuv,{className:"indicator deactivated",children:(0,h.jsx)(n.J$M,{})})),(0,h.jsx)("td",{className:0===s?"feature-cell":"status-cell",children:i},"".concat(e+1).concat(s))}))},"r-".concat(e+1))));return(0,h.jsxs)(m,{children:[(0,h.jsxs)(n.xuv,{sx:{marginTop:15,marginBottom:15},children:["Replication status for ",i,": ",(0,h.jsx)("strong",{children:s}),"."]}),(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{children:(0,h.jsx)("tr",{children:o})}),(0,h.jsx)("tbody",{children:r})]})]})};function f(t,e){return e?!t:""}function j(t,e,s){return Object.keys(t).find((t=>!(e[t]||{})[s]))}const y=t=>{let{entityType:e,entityValue:s}=t;return(0,h.jsxs)(n.xuv,{sx:{marginTop:"45px",display:"flex",alignItems:"center",justifyContent:"center"},children:[e,":"," ",(0,h.jsx)(n.xuv,{sx:{marginLeft:"5px",marginRight:"5px",fontWeight:600},children:s})," ","not found."]})},v=t=>{let{bucketStats:e={},sites:s={},lookupValue:i=""}=t;const n=["Tags","Policy","Quota","Retention","Encryption","Replication"],a=e[i]||{};if(!i)return null;const l=Object.keys(s),o=[];if(j(s,a,"HasBucket"))return(0,h.jsx)(y,{entityType:"Bucket",entityValue:i});{const t=[];for(let e=0;e<l.length;e++)0===e&&t.push(""),t.push(s[l[e]].name);o.push(t);for(let e=0;e<n.length;e++){const t=[],i=n[e];let r="";for(let n=0;n<l.length;n++){const o=a[s[l[n]].deploymentID];switch(0===n&&t.push(i),e){case 0:r=f(o.TagMismatch,o.HasTagsSet),t.push(r);break;case 1:r=f(o.PolicyMismatch,o.HasPolicySet),t.push(r);break;case 2:r=f(o.QuotaCfgMismatch,o.HasQuotaCfgSet),t.push(r);break;case 3:r=f(o.OLockConfigMismatch,o.HasOLockConfigSet),t.push(r);break;case 4:r=f(o.SSEConfigMismatch,o.HasSSECfgSet),t.push(r);break;case 5:r=f(o.ReplicationCfgMismatch,o.HasReplicationCfg),t.push(r)}}o.push(t)}}return(0,h.jsx)(g,{matrixData:o,entityName:i,entityType:"Bucket"})},b=t=>{let{policyStats:e={},sites:s={},lookupValue:i=""}=t;const n=["Policy"],a=e[i]||{};if(!i)return null;const l=Object.keys(s),o=[];if(j(s,a,"HasPolicy"))return(0,h.jsx)(y,{entityType:"Policy",entityValue:i});{const t=[];for(let e=0;e<l.length;e++)0===e&&t.push(""),t.push(s[l[e]].name);o.push(t);for(let e=0;e<n.length;e++){const t=[],i=n[e];let r="";for(let n=0;n<l.length;n++){const o=a[s[l[n]].deploymentID];if(0===n&&t.push(i),0===e)r=f(o.PolicyMismatch,o.HasPolicy),t.push(r)}o.push(t)}}return(0,h.jsx)(g,{matrixData:o,entityName:i,entityType:"Policy"})},k=t=>{let{groupStats:e={},sites:s={},lookupValue:i=""}=t;const n=["Info","Policy mapping"],a=e[i]||{};if(!i)return null;const l=Object.keys(s),o=[];if(j(s,a,"HasGroup"))return(0,h.jsx)(y,{entityType:"Group",entityValue:i});{const t=[];for(let e=0;e<l.length;e++)0===e&&t.push(""),t.push(s[l[e]].name);o.push(t);for(let e=0;e<n.length;e++){const t=[],i=n[e];let r="";for(let n=0;n<l.length;n++){const o=a[s[l[n]].deploymentID];switch(0===n&&t.push(i),e){case 0:r=f(o.GroupDescMismatch,o.HasGroup),t.push(r);break;case 1:r=f(o.PolicyMismatch,o.HasPolicyMapping),t.push(r)}}o.push(t)}}return(0,h.jsx)(g,{matrixData:o,entityName:i,entityType:"Group"})},S=t=>{let{userStats:e={},sites:s={},lookupValue:i=""}=t;const n=["Info","Policy mapping"],a=e[i]||{};if(!i)return null;const l=Object.keys(s),o=[];if(j(s,a,"HasUser"))return(0,h.jsx)(y,{entityType:"User",entityValue:i});{const t=[];for(let e=0;e<l.length;e++)0===e&&t.push(""),t.push(s[l[e]].name);o.push(t);for(let e=0;e<n.length;e++){const t=[],i=n[e];let r="";for(let n=0;n<l.length;n++){const o=a[s[l[n]].deploymentID];switch(0===n&&t.push(i),e){case 0:r=f(o.UserInfoMismatch,o.HasUser),t.push(r);break;case 1:r=f(o.PolicyMismatch,o.HasPolicyMapping),t.push(r)}}o.push(t)}}return(0,h.jsx)(g,{matrixData:o,entityName:i,entityType:"User"})};var C=s(27454);const T=()=>{const[t,e]=(0,i.useState)("bucket"),[s,a]=(0,i.useState)(""),[l,o]=(0,i.useState)({}),[r,u]=(0,i.useState)(!1),[x,p]=(0,c.Z)((t=>{o(t),u(!0)}),(t=>{o({}),u(!0)})),{bucketStats:d={},sites:m={},userStats:g={},policyStats:f={},groupStats:j={}}=l||{};return(0,h.jsxs)(n.xuv,{children:[(0,h.jsxs)(n.xuv,{sx:{display:"grid",alignItems:"center",gridTemplateColumns:".7fr .9fr 1.2fr .3fr",["@media (max-width: ".concat(n.Egj.sm,"px)")]:{gridTemplateColumns:"1fr"},["@media (max-width: ".concat(n.Egj.md,"px)")]:{gridTemplateColumns:"1.2fr .7fr .7fr .3fr"},gap:"15px"},children:[(0,h.jsx)(n.xuv,{sx:{width:"240px",flexGrow:"0"},children:"View Replication Status for a:"}),(0,h.jsx)(n.xuv,{sx:{marginLeft:-25,["@media (max-width: ".concat(n.Egj.sm,"px)")]:{marginLeft:0}},children:(0,h.jsx)(n.PhF,{id:"replicationEntityLookup",name:"replicationEntityLookup",onChange:t=>{e(t),u(!1)},label:"",value:t,options:[{label:"Bucket",value:"bucket"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Policy",value:"policy"}],disabled:!1})}),(0,h.jsx)(n.xuv,{sx:{flex:2},children:(0,h.jsx)(n.Wzg,{id:"replicationLookupEntityValue",name:"replicationLookupEntityValue",onChange:t=>{a(t.target.value),u(!1)},placeholder:"test-".concat(t),label:"",value:s})}),(0,h.jsx)(n.xuv,{sx:{maxWidth:"80px"},children:(0,h.jsx)(C.Z,{tooltip:"View across sites",children:(0,h.jsx)(n.zxk,{id:"view-across-sites",type:"button",onClick:()=>{!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(u(!1),t&&e){let s="api/v1/admin/site-replication/status?buckets=false&entityType=".concat(t,"&entityValue=").concat(e,"&groups=false&policies=false&users=false");p("GET",s)}}(t,s)},label:"View",icon:(0,h.jsx)(n.aWt,{}),collapseOnSmall:!1,disabled:!s||!t})})})]}),x?(0,h.jsx)(n.rjZ,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:45},children:(0,h.jsx)(n.aNw,{style:{width:25,height:25}})}):null,r?(0,h.jsxs)(n.xuv,{children:[!x&&"bucket"===t&&s?(0,h.jsx)(v,{bucketStats:d,sites:m,lookupValue:s}):null,!x&&"user"===t&&s?(0,h.jsx)(S,{userStats:g,sites:m,lookupValue:s}):null,!x&&"group"===t&&s?(0,h.jsx)(k,{groupStats:j,sites:m,lookupValue:s}):null,!x&&"policy"===t&&s?(0,h.jsx)(b,{policyStats:f,sites:m,lookupValue:s}):null]}):null]})};var w=s(79844),E=s(99670);const P=t=>{var e;let{maxValue:s=0,entityStatObj:i={},entityTextPlural:a="",icon:l=null}=t;const o=null===(e=Object.keys(i||{}))||void 0===e?void 0:e.length;return(0,h.jsx)(n.xuv,{withBorders:!0,sx:{padding:"25px",["@media (min-width: ".concat(n.Egj.sm,"px)")]:{maxWidth:"100%"}},children:(0,h.jsx)(u.Z,{icon:l,onlineCount:s,offlineCount:o,okStatusText:"Synced",notOkStatusText:"Failed",label:a})})},N=()=>{const t=(0,a.s0)(),[e,s]=(0,i.useState)({}),[u,x]=(0,c.Z)((t=>{s(t)}),(t=>{s({})})),{maxBuckets:p=0,bucketStats:d={},maxGroups:m=0,groupStats:g={},maxUsers:f=0,userStats:j={},maxPolicies:y=0,policyStats:v={}}=e||{},b=()=>{x("GET","api/v1/admin/site-replication/status?buckets=true&groups=true&policies=true&users=true")};(0,i.useEffect)((()=>{b()}),[]);const k=(0,o.TL)();return(0,i.useEffect)((()=>{k((0,r.Sc)("replication_status"))}),[]),(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(w.Z,{label:(0,h.jsx)(n.hbI,{label:"Site Replication",onClick:()=>t(l.gA.SITE_REPLICATION)}),actions:(0,h.jsx)(E.Z,{})}),(0,h.jsxs)(n.Xgh,{children:[(0,h.jsx)(n.NZf,{actions:(0,h.jsx)(i.Fragment,{children:(0,h.jsx)(C.Z,{tooltip:"Refresh",children:(0,h.jsx)(n.zxk,{id:"refresh",onClick:()=>{b()},label:"Refresh",icon:(0,h.jsx)(n.DuK,{}),variant:"regular",collapseOnSmall:!1})})}),separator:!0,children:"Replication status from all Sites"}),u?(0,h.jsx)(n.rjZ,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:45},children:(0,h.jsx)(n.aNw,{style:{width:25,height:25}})}):(0,h.jsxs)(n.xuv,{sx:{display:"grid",marginTop:"25px",gridTemplateColumns:"1fr 1fr 1fr 1fr",["@media (max-width: ".concat(n.Egj.md,"px)")]:{gridTemplateColumns:"1fr 1fr"},["@media (max-width: ".concat(n.Egj.sm,"px)")]:{gridTemplateColumns:"1fr"},gap:"30px"},children:[(0,h.jsx)(P,{entityStatObj:d,entityTextPlural:"Buckets",maxValue:p,icon:(0,h.jsx)(n.wNb,{})}),(0,h.jsx)(P,{entityStatObj:j,entityTextPlural:"Users",maxValue:f,icon:(0,h.jsx)(n.oyc,{})}),(0,h.jsx)(P,{entityStatObj:g,entityTextPlural:"Groups",maxValue:m,icon:(0,h.jsx)(n.wws,{})}),(0,h.jsx)(P,{entityStatObj:v,entityTextPlural:"Policies",maxValue:y,icon:(0,h.jsx)(n.v42,{})})]}),(0,h.jsx)(n.xuv,{withBorders:!0,sx:{minHeight:450,["@media (max-width: ".concat(n.Egj.sm,"px)")]:{minHeight:250},marginTop:"25px",padding:"25px"},children:(0,h.jsx)(T,{})})]})]})}},31300:(t,e,s)=>{s.d(e,{Z:()=>c});s(72791);var i=s(16444),n=s(26181),a=s.n(n),l=s(29945),o=s(80184);const r=i.ZP.div((t=>{let{theme:e}=t;return{fontFamily:"Inter,sans-serif",maxWidth:"321px",display:"flex",marginLeft:"auto",marginRight:"auto",cursor:"default",color:a()(e,"signalColors.main","#07193E"),"& .mainBox":{flex:1,display:"flex",padding:"0 8px 0 8px",["@media (max-width: ".concat(l.Egj.sm,"px)")]:{padding:"0 10px 0 10px"},"& .indicatorIcon":{width:"20px",height:"20px",marginTop:"8px",maxWidth:"26px","& .min-icon":{width:"16px",height:"16px"}},"& .indicatorContainer":{flex:1,display:"flex",flexFlow:"column","& .indicatorLabel":{fontSize:"16px",fontWeight:600},"& .counterIndicator":{display:"flex",alignItems:"center",gap:"5px",justifyContent:"space-between",paddingBottom:0,fontSize:"55px",["@media (max-width: ".concat(l.Egj.sm,"px)")]:{paddingBottom:10,fontSize:"35px"},["@media (max-width: ".concat(l.Egj.lg,"px)")]:{fontSize:"45px"},["@media (max-width: ".concat(l.Egj.xl,"px)")]:{fontSize:"50px"},flexFlow:"row",fontWeight:600,"& .stat-text":{color:a()(e,"mutedText","#87888D"),fontSize:"12px",marginTop:"8px"},"& .stat-value":{textAlign:"center",height:"50px"},"& .min-icon":{marginRight:"8px",marginTop:"8px",height:"10px",width:"10px"}},"& .onlineCounter":{display:"flex",alignItems:"center",marginTop:"5px","& .min-icon":{fill:a()(e,"signalColors.good","#4CCB92")}},"& .offlineCount":{display:"flex",alignItems:"center",marginTop:"8px","& .min-icon":{fill:a()(e,"signalColors.danger","#C51B3F")}}}}}})),c=t=>{let{onlineCount:e=0,offlineCount:s=0,icon:i=null,label:n="",okStatusText:a="Online",notOkStatusText:c="Offline"}=t;return(0,o.jsx)(r,{children:(0,o.jsxs)(l.xuv,{className:"mainBox",children:[(0,o.jsxs)(l.xuv,{className:"indicatorContainer",children:[(0,o.jsx)(l.xuv,{className:"indicatorLabel",children:n}),(0,o.jsxs)(l.xuv,{className:"counterIndicator",children:[(0,o.jsxs)(l.xuv,{children:[(0,o.jsx)(l.xuv,{className:"stat-value",children:e}),(0,o.jsxs)(l.xuv,{className:"onlineCounter",children:[(0,o.jsx)(l.J$M,{}),(0,o.jsx)("div",{className:"stat-text",children:a})]})]}),(0,o.jsxs)(l.xuv,{children:[(0,o.jsx)(l.xuv,{className:"stat-value",children:s}),(0,o.jsxs)(l.xuv,{className:"offlineCount",children:[(0,o.jsx)(l.J$M,{})," ",(0,o.jsx)("div",{className:"stat-text",children:c})]})]})]})]}),(0,o.jsx)(l.xuv,{className:"indicatorIcon",children:i})]})})}}}]);
//# sourceMappingURL=6577.d820c471.chunk.js.map