(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[483],{70483:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>g});var l=o(72791),n=o(95087),i=o(29945),a=o(26824),r=o(57689),c=o(9478),s=o(44690),u=o(87995),p=o(31460),b=o(79844),d=o(99670),f=o(80184),h=null;const g=()=>{const e=(0,r.s0)(),[t,o]=(0,l.useState)(!1),[g,x]=(0,l.useState)(["cpu","mem","block","mutex","goroutines"]),w=(0,c.Yc)(),m=e=>{let t=[];t=g.indexOf(e.target.value)>-1?g.filter((t=>t!==e.target.value)):[...g,e.target.value],x(t)},v=(0,s.TL)();return(0,l.useEffect)((()=>{v((0,u.Sc)("profile"))}),[]),(0,f.jsxs)(l.Fragment,{children:[(0,f.jsx)(b.Z,{label:"Profile",actions:(0,f.jsx)(d.Z,{})}),(0,f.jsxs)(i.Xgh,{children:[!w&&(0,f.jsx)(p.Z,{compactMode:!0}),(0,f.jsxs)(i.ltY,{children:[(0,f.jsxs)(i.xuv,{sx:{display:"flex",gap:10,"& div":{width:"initial"},"& .inputItem:not(:last-of-type)":{marginBottom:0}},children:[(0,f.jsx)(i.AZs,{noMinWidth:!0,children:"Types to profile:"}),[{label:"cpu",value:"cpu"},{label:"mem",value:"mem"},{label:"block",value:"block"},{label:"mutex",value:"mutex"},{label:"goroutines",value:"goroutines"}].map((e=>(0,f.jsx)(i.XZJ,{checked:g.indexOf(e.value)>-1,disabled:t||!w,id:"checkbox-".concat(e.label),label:e.label,name:"checkbox-".concat(e.label),onChange:m,value:e.value},"checkbox-".concat(e.label))))]}),(0,f.jsxs)(i.xuv,{sx:{display:"flex",justifyContent:"flex-end",marginTop:24,gap:10},children:[(0,f.jsx)(i.zxk,{id:"start-profiling",type:"submit",variant:w?"callAction":"regular",disabled:t||g.length<1||!w,onClick:()=>{w?(()=>{const e=g.join(","),t=new URL(window.location.toString()),l=t.port,i=new URL(document.baseURI).pathname,r=(0,a.x2)(t.protocol);if(null!==(h=new n.w3cwebsocket("".concat(r,"://").concat(t.hostname,":").concat(l).concat(i,"ws/profile?types=").concat(e))))h.onopen=()=>{o(!0),h.send("ok")},h.onmessage=e=>{let t=new Blob([e.data],{type:"application/zip"});o(!1);var l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download="profile.zip",document.body.appendChild(l),l.click(),document.body.removeChild(l)},h.onclose=()=>{console.log("connection closed by server"),o(!1)}})():e("/support/register")},label:"Start Profiling"}),(0,f.jsx)(i.zxk,{id:"stop-profiling",type:"submit",variant:"callAction",color:"primary",disabled:!t||!w,onClick:()=>{h.close(1e3),o(!1)},label:"Stop Profiling"})]})]})]})]})}},94210:e=>{var t=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},95087:(e,t,o)=>{var l;if("object"===typeof globalThis)l=globalThis;else try{l=o(94210)}catch(r){}finally{if(l||"undefined"===typeof window||(l=window),!l)throw new Error("Could not determine global this")}var n=l.WebSocket||l.MozWebSocket,i=o(51496);function a(e,t){return t?new n(e,t):new n(e)}n&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(a,e,{get:function(){return n[e]}})})),e.exports={w3cwebsocket:n?a:null,version:i}},51496:(e,t,o)=>{e.exports=o(19794).version},19794:e=>{"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=483.d65ba5d6.chunk.js.map