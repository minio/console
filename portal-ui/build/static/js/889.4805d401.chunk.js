"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,a,t){t.r(a);var n=t(70885),i=t(1413),l=t(72791),s=t(60364),r=t(11135),o=t(25787),c=t(36151),d=t(26181),u=t.n(d),m=t(61889),h=t(23814),x=t(42649),g=t(21435),p=t(56028),Z=t(81207),f=t(90673),v=t(37516),j=t(45248),S=t(17420),b=t(74833),y=t(56578),C=t(80184),k=(0,s.$j)(null,{setModalErrorSnackMessage:x.zb});a.default=(0,o.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({buttonContainer:{textAlign:"right"},multiContainer:{display:"flex",alignItems:"center"},sizeFactorContainer:{"& label":{display:"none"},"& div:first-child":{marginBottom:0,"@media (max-width: 600px)":{marginTop:"7px"}}}},h.bK),h.QV),h.DF),h.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},h.ID.modalFormScrollable),{},{paddingRight:10})}))}))(k((function(e){var a=e.open,t=e.closeModalAndRefresh,i=e.classes,s=e.bucketName,r=e.setModalErrorSnackMessage,o=e.setReplicationRules,d=(0,l.useState)(!1),h=(0,n.Z)(d,2),x=h[0],k=h[1],R=(0,l.useState)("1"),N=(0,n.Z)(R,2),P=N[0],w=N[1],F=(0,l.useState)(""),D=(0,n.Z)(F,2),M=D[0],T=D[1],B=(0,l.useState)(""),K=(0,n.Z)(B,2),_=K[0],A=K[1],E=(0,l.useState)(""),I=(0,n.Z)(E,2),L=I[0],U=I[1],O=(0,l.useState)(""),z=(0,n.Z)(O,2),G=z[0],V=z[1],Q=(0,l.useState)(""),q=(0,n.Z)(Q,2),H=q[0],Y=q[1],$=(0,l.useState)(""),J=(0,n.Z)($,2),W=J[0],X=J[1],ee=(0,l.useState)(""),ae=(0,n.Z)(ee,2),te=ae[0],ne=ae[1],ie=(0,l.useState)(!0),le=(0,n.Z)(ie,2),se=le[0],re=le[1],oe=(0,l.useState)(!0),ce=(0,n.Z)(oe,2),de=ce[0],ue=ce[1],me=(0,l.useState)(!0),he=(0,n.Z)(me,2),xe=he[0],ge=he[1],pe=(0,l.useState)(!0),Ze=(0,n.Z)(pe,2),fe=Ze[0],ve=Ze[1],je=(0,l.useState)(""),Se=(0,n.Z)(je,2),be=Se[0],ye=Se[1],Ce=(0,l.useState)("async"),ke=(0,n.Z)(Ce,2),Re=ke[0],Ne=ke[1],Pe=(0,l.useState)("100"),we=(0,n.Z)(Pe,2),Fe=we[0],De=we[1],Me=(0,l.useState)("Gi"),Te=(0,n.Z)(Me,2),Be=Te[0],Ke=Te[1],_e=(0,l.useState)("60"),Ae=(0,n.Z)(_e,2),Ee=Ae[0],Ie=Ae[1];(0,l.useEffect)((function(){if(0!==o.length){var e=o.reduce((function(e,a){return a.priority>e?a.priority:e}),0);w((e+1).toString())}else w("1")}),[o]);return(0,C.jsx)(p.Z,{modalOpen:a,onClose:function(){t()},title:"Set Bucket Replication",titleIcon:(0,C.jsx)(b.xR,{}),children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),k(!0),function(){var e=[{originBucket:s,destinationBucket:W}],a=parseInt(Ee),n="".concat(se?"https://":"http://").concat(L),i={accessKey:M,secretKey:_,targetURL:n,region:te,bucketsRelation:e,syncMode:Re,bandwidth:"async"===Re?parseInt((0,j.Pw)(Fe,Be,!0)):0,healthCheckPeriod:a,prefix:H,tags:be,replicateDeleteMarkers:de,replicateDeletes:xe,priority:parseInt(P),storageClass:G,replicateMetadata:fe};Z.Z.invoke("POST","/api/v1/buckets-replication",i).then((function(e){k(!1);var a=u()(e,"replicationState",[]);if(a.length>0){var n=a[0];return k(!1),n.errorString&&""!==n.errorString?void r({errorMessage:n.errorString,detailedError:""}):void t()}r({errorMessage:"No changes applied",detailedError:""})})).catch((function(e){k(!1),r(e)}))}()},children:(0,C.jsxs)(m.ZP,{container:!0,children:[(0,C.jsxs)(m.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&w(e.target.value)},label:"Priority",value:P,pattern:"[0-9]*"})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"targetURL",name:"targetURL",onChange:function(e){U(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:L})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(v.Z,{checked:se,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){re(e.target.checked)},value:"yes"})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"accessKey",name:"accessKey",onChange:function(e){T(e.target.value)},label:"Access Key",value:M})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"secretKey",name:"secretKey",onChange:function(e){A(e.target.value)},label:"Secret Key",value:_})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){X(e.target.value)},label:"Target Bucket",value:W})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"region",name:"region",onChange:function(e){ne(e.target.value)},label:"Region",value:te})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(f.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){Ne(e.target.value)},label:"Replication Mode",value:Re,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Re&&(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)("div",{className:i.multiContainer,children:(0,C.jsx)(g.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&De(e.target.value)},label:"Bandwidth",value:Fe,min:"0",pattern:"[0-9]*",overlayObject:(0,C.jsx)(y.Z,{id:"quota_unit",onUnitChange:function(e){Ke(e)},unitSelected:Be,unitsList:(0,j.zQ)(["Ki"]),disabled:!1})})})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ie(e.target.value)},label:"Health Check Duration",value:Ee})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,C.jsx)(g.Z,{id:"storageClass",name:"storageClass",onChange:function(e){V(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:G})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(g.Z,{id:"prefix",name:"prefix",onChange:function(e){Y(e.target.value)},placeholder:"prefix",label:"Prefix",value:H})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(S.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){ye(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,C.jsx)(m.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,C.jsxs)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:[(0,C.jsx)(v.Z,{checked:fe,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){ve(e.target.checked)},value:fe,description:"Metadata Sync"}),(0,C.jsx)(v.Z,{checked:de,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){ue(e.target.checked)},value:de,description:"Replicate soft deletes"})]}),(0,C.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(v.Z,{checked:xe,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){ge(e.target.checked)},value:xe,description:"Replicate versioned deletes"})})]})})]}),(0,C.jsxs)(m.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,C.jsx)(c.Z,{type:"button",variant:"outlined",color:"primary",disabled:x,onClick:function(){t()},children:"Cancel"}),(0,C.jsx)(c.Z,{type:"submit",variant:"contained",color:"primary",disabled:x,children:"Save"})]})]})})})})))}}]);
//# sourceMappingURL=889.4805d401.chunk.js.map