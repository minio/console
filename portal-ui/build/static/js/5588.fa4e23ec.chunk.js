"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5588],{45588:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(29439),i=n(1413),a=n(72791),u=n(61889),c=n(36151),o=n(40986),d=n(11135),s=n(25787),l=n(23814),b=n(81207),f=n(21435),m=n(83679),k=n(45248),h=n(62666),x=n(60364),g=n(42209);function p(e,t){return e===t}function v(e){return"function"===typeof e?function(){return e}:e}function j(e,t,n){var r=n&&n.equalityFn||p,i=function(e){var t=(0,a.useState)(v(e)),n=t[0],r=t[1];return[n,(0,a.useCallback)((function(e){return r(v(e))}),[])]}(e),u=i[0],c=i[1],o=function(e,t,n){var r=this,i=(0,a.useRef)(null),u=(0,a.useRef)(0),c=(0,a.useRef)(null),o=(0,a.useRef)([]),d=(0,a.useRef)(),s=(0,a.useRef)(),l=(0,a.useRef)(e),b=(0,a.useRef)(!0);l.current=e;var f=!t&&0!==t&&"undefined"!==typeof window;if("function"!==typeof e)throw new TypeError("Expected a function");t=+t||0;var m=!!(n=n||{}).leading,k=!("trailing"in n)||!!n.trailing,h="maxWait"in n,x=h?Math.max(+n.maxWait||0,t):null;(0,a.useEffect)((function(){return b.current=!0,function(){b.current=!1}}),[]);var g=(0,a.useMemo)((function(){var e=function(e){var t=o.current,n=d.current;return o.current=d.current=null,u.current=e,s.current=l.current.apply(n,t)},n=function(e,t){f&&cancelAnimationFrame(c.current),c.current=f?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!b.current)return!1;var n=e-i.current,r=e-u.current;return!i.current||n>=t||n<0||h&&r>=x},g=function(t){return c.current=null,k&&o.current?e(t):(o.current=d.current=null,s.current)},p=function e(){var r=Date.now();if(a(r))return g(r);if(b.current){var c=r-i.current,o=r-u.current,d=t-c,s=h?Math.min(d,x-o):d;n(e,s)}},v=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var k=Date.now(),x=a(k);if(o.current=l,d.current=r,i.current=k,x){if(!c.current&&b.current)return u.current=i.current,n(p,t),m?e(i.current):s.current;if(h)return n(p,t),e(i.current)}return c.current||n(p,t),s.current};return v.cancel=function(){c.current&&(f?cancelAnimationFrame(c.current):clearTimeout(c.current)),u.current=0,o.current=i.current=d.current=c.current=null},v.isPending=function(){return!!c.current},v.flush=function(){return c.current?g(Date.now()):s.current},v}),[m,h,t,x,k,f]);return g}((0,a.useCallback)((function(e){return c(e)}),[c]),t,n),d=(0,a.useRef)(e);return r(d.current,e)||(o(e),d.current=e),[u,o]}var B=n(37516),Z=n(32291),y=n(84669),R=n(92388),C=n(42649),P=n(74794),S=n(56578),q=n(80184),_=(0,x.$j)((function(e){return{addBucketModalOpen:e.buckets.open,bucketName:e.buckets.addBucketName,versioningEnabled:e.buckets.addBucketVersioningEnabled,lockingEnabled:e.buckets.addBucketLockingEnabled,quotaEnabled:e.buckets.addBucketQuotaEnabled,quotaType:e.buckets.addBucketQuotaType,quotaSize:e.buckets.addBucketQuotaSize,quotaUnit:e.buckets.addBucketQuotaUnit,retentionEnabled:e.buckets.addBucketRetentionEnabled,retentionMode:e.buckets.addBucketRetentionMode,retentionUnit:e.buckets.addBucketRetentionUnit,retentionValidity:e.buckets.addBucketRetentionValidity,distributedSetup:e.system.distributedSetup}}),{addBucketName:g.pK,addBucketVersioned:g.Og,enableObjectLocking:g.YP,addBucketQuota:g.hN,addBucketQuotaType:g.i9,addBucketQuotaSize:g._X,addBucketQuotaUnit:g.FB,addBucketRetention:g._n,addBucketRetentionMode:g.Tv,addBucketRetentionUnit:g.Mf,addBucketRetentionValidity:g.bC,setErrorSnackMessage:C.Ih})((0,s.Z)((function(e){return(0,d.Z)((0,i.Z)({buttonContainer:{marginTop:24,textAlign:"right","& .MuiButton-root":{marginLeft:8}},error:{color:"#b53b4b",border:"1px solid #b53b4b",padding:8,borderRadius:3},title:{marginBottom:8},headTitle:{fontWeight:"bold",fontSize:16,paddingLeft:8},h6title:{fontWeight:"bold",color:"#000000",fontSize:20,paddingBottom:8}},(0,l.Bz)(e.spacing(4))))}))((function(e){var t=e.classes,n=e.addBucketName,i=e.addBucketVersioned,d=e.enableObjectLocking,s=e.addBucketQuota,l=e.addBucketQuotaType,x=e.addBucketQuotaSize,g=e.addBucketQuotaUnit,p=e.addBucketRetention,v=e.addBucketRetentionMode,C=e.addBucketRetentionUnit,_=e.addBucketRetentionValidity,E=e.setErrorSnackMessage,N=e.bucketName,M=e.versioningEnabled,Q=e.lockingEnabled,T=e.quotaEnabled,w=e.quotaType,U=e.quotaSize,z=e.quotaUnit,F=e.retentionEnabled,V=e.retentionMode,O=e.retentionUnit,L=e.retentionValidity,A=e.distributedSetup,D=(0,a.useState)(!1),I=(0,r.Z)(D,2),W=I[0],K=I[1],Y=(0,a.useState)(!1),G=(0,r.Z)(Y,2),X=G[0],$=G[1],H=(0,a.useState)(!1),J=(0,r.Z)(H,2),ee=J[0],te=J[1],ne=j(N,1e3),re=(0,r.Z)(ne,1)[0];(0,a.useEffect)((function(){n(re)}),[re,n]);var ie=function(){n(""),i(!1),d(!1),s(!1),l("hard"),x("1"),g("TiB"),p(!1),v("compliance"),C("days"),_(1)};return(0,a.useEffect)((function(){var e=!1;""!==N.trim()&&(e=!0),T&&e&&(""!==U.trim()&&0!==parseInt(U)||(e=!1)),M&&F||(p(!1),v("compliance"),C("days"),_(1)),F?(d(!0),te(!0)):te(!1),F&&(Number.isNaN(L)||L<1)&&(e=!1),$(e)}),[N,F,Q,w,U,z,T,p,v,C,_,L,M,d]),(0,q.jsxs)(a.Fragment,{children:[(0,q.jsx)(Z.Z,{label:(0,q.jsx)(y.Z,{to:"/buckets",label:"Buckets"})}),(0,q.jsx)(P.Z,{children:(0,q.jsx)(u.ZP,{item:!0,xs:12,className:t.boxy,children:(0,q.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!W){K(!0);var t={name:N,versioning:!!A&&M,locking:!!A&&Q};if(A){if(T){var n=(0,k.Pw)(U,z,!0);t.quota={enabled:!0,quota_type:w,amount:parseInt(n)}}F&&(t.retention={mode:V,unit:O,validity:L})}b.Z.invoke("POST","/api/v1/buckets",t).then((function(e){K(!1);var t="".concat(N);ie(),h.Z.push("/buckets/".concat(t,"/browse"))})).catch((function(e){K(!1),E(e)}))}}(e)},children:(0,q.jsxs)(u.ZP,{container:!0,children:[(0,q.jsxs)(u.ZP,{item:!0,xs:12,container:!0,className:t.title,children:[(0,q.jsx)(u.ZP,{item:!0,xs:"auto",children:(0,q.jsx)(R.wN,{})}),(0,q.jsx)(u.ZP,{item:!0,xs:!0,className:t.headTitle,children:"Create Bucket"})]}),(0,q.jsxs)(u.ZP,{item:!0,xs:12,container:!0,children:[(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(f.Z,{id:"bucket-name",name:"bucket-name",autoFocus:!0,onChange:function(e){n(e.target.value)},label:"Bucket Name",value:N})}),(0,q.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,q.jsx)("div",{className:t.h6title,children:"Features"}),(0,q.jsx)("br",{}),!A&&(0,q.jsxs)(a.Fragment,{children:[(0,q.jsxs)("div",{className:t.error,children:["These features are unavailable in a single-disk setup.",(0,q.jsx)("br",{}),"Please deploy a server in"," ",(0,q.jsx)("a",{href:"https://docs.min.io/minio/baremetal/installation/deploy-minio-distributed.html?ref=con",target:"_blank",rel:"noreferrer",children:"Distributed Mode"})," ","to use these features."]}),(0,q.jsx)("br",{}),(0,q.jsx)("br",{})]})]}),(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(B.Z,{value:"versioned",id:"versioned",name:"versioned",checked:M,onChange:function(e){i(e.target.checked)},description:"Allows to keep multiple versions of the same object under the same key.",label:"Versioning",disabled:!A||Q})}),(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(B.Z,{value:"locking",id:"locking",name:"locking",disabled:ee||!A,checked:Q,onChange:function(e){d(e.target.checked),e.target.checked&&i(!0)},label:"Object Locking",description:"Required to support retention and legal hold. Can only be enabled at bucket creation."})}),(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(B.Z,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:T,onChange:function(e){s(e.target.checked)},label:"Quota",description:"Limit the amount of data in the bucket.",disabled:!A})}),T&&A&&(0,q.jsx)(a.Fragment,{children:(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(f.Z,{type:"number",id:"quota_size",name:"quota_size",onChange:function(e){e.target.validity.valid&&x(e.target.value)},label:"Quota",value:U,required:!0,min:"1",pattern:"[0-9]*",overlayObject:(0,q.jsx)(S.Z,{id:"quota_unit",onUnitChange:function(e){g(e)},unitSelected:z,unitsList:(0,k.zQ)(["Ki"]),disabled:!1})})})}),M&&A&&(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(B.Z,{value:"bucket_retention",id:"bucket_retention",name:"bucket_retention",checked:F,onChange:function(e){p(e.target.checked)},label:"Retention",description:"Impose rules to prevent object deletion for a period of time."})}),F&&A&&(0,q.jsxs)(a.Fragment,{children:[(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(m.Z,{currentSelection:V,id:"retention_mode",name:"retention_mode",label:"Retention Mode",onChange:function(e){v(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(m.Z,{currentSelection:O,id:"retention_unit",name:"retention_unit",label:"Retention Unit",onChange:function(e){C(e.target.value)},selectorOptions:[{value:"days",label:"Days"},{value:"years",label:"Years"}]})}),(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(f.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){_(e.target.valueAsNumber)},label:"Retention Validity",value:String(L),required:!0,min:"1"})})]})]}),(0,q.jsxs)(u.ZP,{item:!0,xs:12,className:t.buttonContainer,children:[(0,q.jsx)(c.Z,{type:"button",variant:"outlined",className:t.clearButton,onClick:ie,children:"Clear"}),(0,q.jsx)(c.Z,{type:"submit",variant:"contained",color:"primary",disabled:W||!X,children:"Create Bucket"})]}),W&&(0,q.jsx)(u.ZP,{item:!0,xs:12,children:(0,q.jsx)(o.Z,{})})]})})})})]})})))}}]);
//# sourceMappingURL=5588.fa4e23ec.chunk.js.map