"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1829],{23804:function(e,n,t){t(72791);var a=t(11135),o=t(25787),i=t(61889),s=t(80184);n.Z=(0,o.Z)((function(e){return(0,a.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,a=e.title,o=e.help;return(0,s.jsx)("div",{className:n.root,children:(0,s.jsxs)(i.ZP,{container:!0,children:[(0,s.jsxs)(i.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,a]}),(0,s.jsx)(i.ZP,{item:!0,xs:12,className:n.helpText,children:o})]})})}))},47986:function(e,n,t){t(72791);var a=t(61889),o=t(64554),i=t(23804),s=t(80184);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,s.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,s.jsx)(a.ZP,{item:!0,xs:12,children:(0,s.jsx)(i.Z,{title:"".concat(t," not available"),iconComponent:n,help:(0,s.jsxs)(o.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,s.jsx)("div",{children:"This feature is not available for a single-disk setup."}),(0,s.jsxs)("div",{children:["Please deploy a server in"," ",(0,s.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noopener",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},34866:function(e,n,t){var a=t(1413),o=t(72791),i=t(61889),s=t(94454),r=t(30829),c=t(20068),l=t(11135),d=t(25787),u=t(23814),f=t(75952),h=t(80184);n.Z=(0,d.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial",flexWrap:"nowrap"}),noTopMargin:{marginTop:0}}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,l=e.id,d=e.name,u=e.checked,p=void 0!==u&&u,x=e.disabled,m=void 0!==x&&x,b=e.noTopMargin,g=void 0!==b&&b,j=e.tooltip,Z=void 0===j?"":j,v=e.overrideLabelClasses,k=void 0===v?"":v,S=e.overrideCheckboxStyles,C=e.classes,y=e.className;return(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)(i.ZP,{item:!0,xs:12,className:"".concat(C.fieldContainer," ").concat(g?C.noTopMargin:""," ").concat(y||""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(s.Z,{name:d,id:l,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:p,onChange:t,checkedIcon:(0,h.jsx)("span",{className:C.checkedIcon}),icon:(0,h.jsx)("span",{className:C.unCheckedIcon}),disabled:m,disableRipple:!0,disableFocusRipple:!0,focusRipple:!1,centerRipple:!1,disableTouchRipple:!0,style:S||{}})}),""!==n&&(0,h.jsxs)(r.Z,{htmlFor:l,className:"".concat(C.noMinWidthLabel," ").concat(k),children:[(0,h.jsx)("span",{children:n}),""!==Z&&(0,h.jsx)("div",{className:C.tooltipContainer,children:(0,h.jsx)(c.Z,{title:Z,placement:"top-start",children:(0,h.jsx)("div",{className:C.tooltip,children:(0,h.jsx)(f.byK,{})})})})]})]})})}))},61829:function(e,n,t){t.r(n);var a=t(29439),o=t(1413),i=t(72791),s=t(78687),r=t(28353),c=t(4834),l=t(61889),d=t(68096),u=t(58406),f=t(23786),h=t(27391),p=t(95087),x=t(75952),m=t(11135),b=t(25787),g=t(26824),j=t(45248),Z=t(23814),v=t(56087),k=t(34866),S=t(32291),C=t(81207),y=t(74794),N=t(38442),w=t(47986),H=t(87995),I=t(72455),R=t(80184),E=(0,I.Z)((function(e){return(0,m.Z)((0,o.Z)((0,o.Z)((0,o.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,o.Z)((0,o.Z)({},Z.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,o.Z)((0,o.Z)({},Z.OR.actionsTray),{},{marginBottom:0})},Z.IX),Z.qg),(0,Z.Bz)(e.spacing(4))))})),F=(0,b.Z)((function(e){return(0,m.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}}})}))(c.ZP);n.default=function(){var e=E(),n=(0,s.v9)(H.N5),t=(0,i.useState)(!1),o=(0,a.Z)(t,2),c=o[0],m=o[1],b=(0,i.useState)(""),Z=(0,a.Z)(b,2),I=Z[0],P=Z[1],T=(0,i.useState)([]),B=(0,a.Z)(T,2),D=B[0],z=B[1],A=(0,i.useState)(""),G=(0,a.Z)(A,2),L=G[0],M=G[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),O=Y[0],U=Y[1],_=(0,i.useState)(!1),q=(0,a.Z)(_,2),J=q[0],K=q[1],V=(0,i.useState)(!1),X=(0,a.Z)(V,2),Q=X[0],$=X[1],ee=(0,i.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),ne=(0,a.Z)(ee,2),te=ne[0],ae=ne[1];(0,i.useEffect)((function(){C.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=[];null!==e.buckets&&(n=e.buckets),z(n)})).catch((function(e){console.error(e)}))}),[]),(0,i.useEffect)((function(){!0===J&&$(!1)}),[J]),(0,i.useEffect)((function(){!0===Q&&K(!1)}),[Q]);var oe=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,i.useEffect)((function(){if(c){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),o=t.port,i=new URL(document.baseURI).pathname,s=(0,g.x2)(t.protocol),r=new p.w3cwebsocket("".concat(s,"://").concat(t.hostname,":").concat(o).concat(i,"ws/heal/").concat(I,"?prefix=").concat(L,"&recursive=").concat(O,"&force-start=").concat(J,"&force-stop=").concat(Q));if(null!==r)return r.onopen=function(){console.log("WebSocket Client Connected"),r.send("ok")},r.onmessage=function(t){for(var o=JSON.parse(t.data.toString()),i=0,s=Object.entries(o.healthAfterCols);i<s.length;i++){var r=(0,a.Z)(s[i],2),c=r[0],l=r[1];n[c]=100*l/o.itemsScanned}for(var d=0,u=Object.entries(o.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],p=f[1];e[h]=100*p/o.itemsScanned}ae({beforeHeal:oe(e),afterHeal:oe(n),objectsHealed:o.objectsHealed,objectsScanned:o.objectsScanned,healDuration:o.healDuration,sizeScanned:(0,j.ae)(o.bytesScanned.toString())})},r.onclose=function(){m(!1),console.log("connection closed by server")},function(){r.close(1e3),console.log("closing websockets")}}}),[c,I,J,Q,L,O]);var ie={labels:["Green","Yellow","Red","Grey"],datasets:[{label:"After Healing",data:te.afterHeal,backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Before Healing",data:te.beforeHeal,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},se=D.map((function(e){return{label:e.name,value:e.name}}));return(0,R.jsxs)(i.Fragment,{children:[(0,R.jsx)(S.Z,{label:"Drives"}),(0,R.jsx)(y.Z,{children:n?(0,R.jsxs)(N.s,{scopes:[v.Ft.ADMIN_HEAL],resource:v.C3,children:[(0,R.jsxs)(l.ZP,{xs:12,item:!0,className:e.formBox,children:[(0,R.jsxs)(l.ZP,{item:!0,xs:12,className:e.actionsTray,children:[(0,R.jsx)(d.Z,{variant:"outlined",className:e.bucketField,children:(0,R.jsxs)(u.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:I,onChange:function(e){P(e.target.value)},className:e.searchField,input:(0,R.jsx)(F,{}),displayEmpty:!0,children:[(0,R.jsx)(f.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),se.map((function(e){return(0,R.jsx)(f.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,R.jsx)(h.Z,{label:"Prefix",className:e.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){M(e.target.value)},variant:"standard"})]}),(0,R.jsxs)(l.ZP,{item:!0,xs:12,className:e.inlineCheckboxes,children:[(0,R.jsx)(k.Z,{name:"recursive",id:"recursive",value:"recursive",checked:O,onChange:function(e){U(e.target.checked)},disabled:!1,label:"Recursive"}),(0,R.jsx)(k.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:J,onChange:function(e){K(e.target.checked)},disabled:!1,label:"Force Start"}),(0,R.jsx)(k.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:Q,onChange:function(e){$(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,R.jsx)(l.ZP,{item:!0,xs:12,className:e.buttonBar,children:(0,R.jsx)(x.zxk,{id:"start-heal",type:"submit",variant:"callAction",color:"primary",disabled:c,onClick:function(){return m(!0)},label:"Start"})})]}),(0,R.jsxs)(l.ZP,{item:!0,xs:12,className:e.graphContainer,children:[(0,R.jsx)(r.n4,{data:ie,width:80,height:30,options:{title:{display:!0,text:"Item's Health Status [%]",fontSize:20},legend:{display:!0,position:"right"}}}),(0,R.jsxs)(l.ZP,{item:!0,xs:12,className:e.scanInfo,children:[(0,R.jsxs)("div",{className:e.scanData,children:[(0,R.jsx)("strong",{children:"Size scanned:"})," ",te.sizeScanned]}),(0,R.jsxs)("div",{className:e.scanData,children:[(0,R.jsx)("strong",{children:"Objects healed:"})," ",te.objectsHealed," /"," ",te.objectsScanned]}),(0,R.jsxs)("div",{className:e.scanData,children:[(0,R.jsx)("strong",{children:"Healing time:"})," ",te.healDuration,"s"]})]})]})]}):(0,R.jsx)(w.Z,{entity:"Heal",iconComponent:(0,R.jsx)(x.lnI,{})})})]})}},26824:function(e,n,t){t.d(n,{HE:function(){return i},V9:function(){return a},ci:function(){return o},x2:function(){return s}});var a=1006,o=1008,i=1011,s=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=1829.33e4fa84.chunk.js.map