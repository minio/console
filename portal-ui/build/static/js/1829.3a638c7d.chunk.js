"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1829],{23804:function(e,n,t){t(72791);var a=t(11135),i=t(25787),o=t(61889),r=t(80184);n.Z=(0,i.Z)((function(e){return(0,a.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,a=e.title,i=e.help;return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(o.ZP,{container:!0,children:[(0,r.jsxs)(o.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,a]}),(0,r.jsx)(o.ZP,{item:!0,xs:12,className:n.helpText,children:i})]})})}))},47986:function(e,n,t){t(72791);var a=t(61889),i=t(64554),o=t(23804),r=t(80184);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,r.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(o.Z,{title:"".concat(t," not available"),iconComponent:n,help:(0,r.jsxs)(i.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,r.jsx)("div",{children:"This feature is not available for a single-disk setup. "}),(0,r.jsxs)("div",{children:["Please deploy a server in"," ",(0,r.jsx)("a",{href:"https://docs.min.io/minio/baremetal/installation/deploy-minio-distributed.html?ref=con",target:"_blank",rel:"noreferrer",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},34866:function(e,n,t){var a=t(1413),i=t(72791),o=t(61889),r=t(94454),s=t(30829),c=t(20068),l=t(11135),d=t(25787),u=t(23814),f=t(84570),h=t(80184);n.Z=(0,d.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial",flexWrap:"nowrap"}),noTopMargin:{marginTop:0}}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,l=e.id,d=e.name,u=e.checked,x=void 0!==u&&u,p=e.disabled,m=void 0!==p&&p,b=e.noTopMargin,g=void 0!==b&&b,j=e.tooltip,Z=void 0===j?"":j,v=e.overrideLabelClasses,S=void 0===v?"":v,k=e.classes;return(0,h.jsx)(i.Fragment,{children:(0,h.jsxs)(o.ZP,{item:!0,xs:12,className:"".concat(k.fieldContainer," ").concat(g?k.noTopMargin:""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(r.Z,{name:d,id:l,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:x,onChange:t,checkedIcon:(0,h.jsx)("span",{className:k.checkedIcon}),icon:(0,h.jsx)("span",{className:k.unCheckedIcon}),disabled:m})}),""!==n&&(0,h.jsxs)(s.Z,{htmlFor:l,className:"".concat(k.noMinWidthLabel," ").concat(S),children:[(0,h.jsx)("span",{children:n}),""!==Z&&(0,h.jsx)("div",{className:k.tooltipContainer,children:(0,h.jsx)(c.Z,{title:Z,placement:"top-start",children:(0,h.jsx)("div",{className:k.tooltip,children:(0,h.jsx)(f.Z,{})})})})]})]})})}))},61829:function(e,n,t){t.r(n);var a=t(29439),i=t(1413),o=t(72791),r=t(60364),s=t(28353),c=t(4834),l=t(61889),d=t(68096),u=t(58406),f=t(23786),h=t(27391),x=t(36151),p=t(95087),m=t(11135),b=t(25787),g=t(26824),j=t(45248),Z=t(23814),v=t(56087),S=t(92388),k=t(34866),C=t(32291),y=t(81207),w=t(74794),N=t(38442),H=t(47986),E=t(80184),I=(0,b.Z)((function(e){return(0,m.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}},input:{height:50,fontSize:13,lineHeight:"50px"}})}))(c.ZP),P=(0,r.$j)((function(e){return{distributedSetup:e.system.distributedSetup}}),null);n.default=P((0,b.Z)((function(e){return(0,m.Z)((0,i.Z)((0,i.Z)((0,i.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,i.Z)((0,i.Z)({},Z.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,i.Z)((0,i.Z)({},Z.OR.actionsTray),{},{marginBottom:0})},Z.IX),Z.qg),(0,Z.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.distributedSetup,i=(0,o.useState)(!1),r=(0,a.Z)(i,2),c=r[0],m=r[1],b=(0,o.useState)(""),Z=(0,a.Z)(b,2),P=Z[0],F=Z[1],B=(0,o.useState)([]),T=(0,a.Z)(B,2),D=T[0],R=T[1],z=(0,o.useState)(""),A=(0,a.Z)(z,2),G=A[0],L=A[1],M=(0,o.useState)(!1),W=(0,a.Z)(M,2),Y=W[0],O=W[1],U=(0,o.useState)(!1),_=(0,a.Z)(U,2),q=_[0],J=_[1],V=(0,o.useState)(!1),X=(0,a.Z)(V,2),$=X[0],K=X[1],Q=(0,o.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),ee=(0,a.Z)(Q,2),ne=ee[0],te=ee[1];(0,o.useEffect)((function(){y.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=[];null!==e.buckets&&(n=e.buckets),R(n)})).catch((function(e){console.error(e)}))}),[]),(0,o.useEffect)((function(){!0===q&&K(!1)}),[q]),(0,o.useEffect)((function(){!0===$&&J(!1)}),[$]);var ae=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,o.useEffect)((function(){if(c){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),i=t.port,o=new URL(document.baseURI).pathname,r=(0,g.x2)(t.protocol),s=new p.w3cwebsocket("".concat(r,"://").concat(t.hostname,":").concat(i).concat(o,"ws/heal/").concat(P,"?prefix=").concat(G,"&recursive=").concat(Y,"&force-start=").concat(q,"&force-stop=").concat($));if(null!==s)return s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok")},s.onmessage=function(t){for(var i=JSON.parse(t.data.toString()),o=0,r=Object.entries(i.healthAfterCols);o<r.length;o++){var s=(0,a.Z)(r[o],2),c=s[0],l=s[1];n[c]=100*l/i.itemsScanned}for(var d=0,u=Object.entries(i.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],x=f[1];e[h]=100*x/i.itemsScanned}te({beforeHeal:ae(e),afterHeal:ae(n),objectsHealed:i.objectsHealed,objectsScanned:i.objectsScanned,healDuration:i.healDuration,sizeScanned:(0,j.ae)(i.bytesScanned.toString())})},s.onclose=function(){m(!1),console.log("connection closed by server")},function(){s.close(1e3),console.log("closing websockets")}}}),[c,P,q,$,G,Y]);var ie={labels:["Green","Yellow","Red","Grey"],datasets:[{label:"After Healing",data:ne.afterHeal,backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Before Healing",data:ne.beforeHeal,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},oe=D.map((function(e){return{label:e.name,value:e.name}}));return(0,E.jsxs)(o.Fragment,{children:[(0,E.jsx)(C.Z,{label:"Drives"}),(0,E.jsx)(w.Z,{children:t?(0,E.jsxs)(N.s,{scopes:[v.Ft.ADMIN_HEAL],resource:v.C3,children:[(0,E.jsxs)(l.ZP,{xs:12,item:!0,className:n.formBox,children:[(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,E.jsx)(d.Z,{variant:"outlined",className:n.bucketField,children:(0,E.jsxs)(u.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:P,onChange:function(e){F(e.target.value)},className:n.searchField,input:(0,E.jsx)(I,{}),displayEmpty:!0,children:[(0,E.jsx)(f.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),oe.map((function(e){return(0,E.jsx)(f.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,E.jsx)(h.Z,{label:"Prefix",className:n.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){L(e.target.value)},variant:"standard"})]}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:n.inlineCheckboxes,children:[(0,E.jsx)(k.Z,{name:"recursive",id:"recursive",value:"recursive",checked:Y,onChange:function(e){O(e.target.checked)},disabled:!1,label:"Recursive"}),(0,E.jsx)(k.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:q,onChange:function(e){J(e.target.checked)},disabled:!1,label:"Force Start"}),(0,E.jsx)(k.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:$,onChange:function(e){K(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,E.jsx)(l.ZP,{item:!0,xs:12,className:n.buttonBar,children:(0,E.jsx)(x.Z,{type:"submit",variant:"contained",color:"primary",disabled:c,onClick:function(){return m(!0)},children:"Start"})})]}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:n.graphContainer,children:[(0,E.jsx)(s.n4,{data:ie,width:80,height:30,options:{title:{display:!0,text:"Item's Health Status [%]",fontSize:20},legend:{display:!0,position:"right"}}}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:n.scanInfo,children:[(0,E.jsxs)("div",{className:n.scanData,children:[(0,E.jsx)("strong",{children:"Size scanned:"})," ",ne.sizeScanned]}),(0,E.jsxs)("div",{className:n.scanData,children:[(0,E.jsx)("strong",{children:"Objects healed:"})," ",ne.objectsHealed," /"," ",ne.objectsScanned]}),(0,E.jsxs)("div",{className:n.scanData,children:[(0,E.jsx)("strong",{children:"Healing time:"})," ",ne.healDuration,"s"]})]})]})]}):(0,E.jsx)(H.Z,{entity:"Heal",iconComponent:(0,E.jsx)(S.ln,{})})})]})})))},26824:function(e,n,t){t.d(n,{HE:function(){return o},V9:function(){return a},ci:function(){return i},x2:function(){return r}});var a=1006,i=1008,o=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=1829.3a638c7d.chunk.js.map