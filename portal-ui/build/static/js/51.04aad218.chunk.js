"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[51],{23804:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(61889),s=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,i=e.title,r=e.help;return(0,s.jsx)("div",{className:n.root,children:(0,s.jsxs)(a.ZP,{container:!0,children:[(0,s.jsxs)(a.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,i]}),(0,s.jsx)(a.ZP,{item:!0,xs:12,className:n.helpText,children:r})]})})}))},51:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var i=t(29439),r=t(1413),a=t(72791),s=t(60364),o=t(11135),l=t(25787),c=t(26181),d=t.n(c),u=t(61889),x=t(23742),p=t(23814),f=t(81207),m=t(89673),h=t(55818),Z=t(20890),v=t(3721),y=t(36151),j=t(40986),g=t(56028),_=t(21435),b=t(37516),S=t(17420),C=t(90673),P=t(83679),k=t(87995),E=t(81551),N=t(80184),T=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({dateSelector:{"& div":{borderBottom:0,marginBottom:0,"& div:nth-child(2)":{border:"1px solid #EAEAEA",paddingLeft:5,"& div":{border:0}}}},formFieldRowAccordion:{"& .MuiPaper-root":{padding:0}}},p.bK),p.ID),p.DF),p.QV))}))((function(e){var n,t,s,o,l,c=e.classes,p=e.closeModalAndRefresh,T=e.selectedBucket,F=e.lifecycleRule,I=e.open,A=(0,E.TL)(),L=(0,a.useState)(!0),R=(0,i.Z)(L,2),O=R[0],B=R[1],w=(0,a.useState)(!1),D=(0,i.Z)(w,2),M=D[0],V=D[1],z=(0,a.useState)(""),G=(0,i.Z)(z,2),K=G[0],H=G[1],W=(0,a.useState)(!1),Y=(0,i.Z)(W,2),Q=Y[0],U=Y[1],q=(0,a.useState)([]),J=(0,i.Z)(q,2),X=J[0],$=J[1],ee=(0,a.useState)(""),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,a.useState)(""),ae=(0,i.Z)(re,2),se=ae[0],oe=ae[1],le=(0,a.useState)(""),ce=(0,i.Z)(le,2),de=ce[0],ue=ce[1],xe=(0,a.useState)(!1),pe=(0,i.Z)(xe,2),fe=pe[0],me=pe[1],he=(0,a.useState)("0"),Ze=(0,i.Z)(he,2),ve=Ze[0],ye=Ze[1],je=(0,a.useState)("0"),ge=(0,i.Z)(je,2),_e=ge[0],be=ge[1],Se=(0,a.useState)("expiry"),Ce=(0,i.Z)(Se,2),Pe=Ce[0],ke=Ce[1],Ee=(0,a.useState)("0"),Ne=(0,i.Z)(Ee,2),Te=Ne[0],Fe=Ne[1],Ie=(0,a.useState)("0"),Ae=(0,i.Z)(Ie,2),Le=Ae[0],Re=Ae[1],Oe=(0,a.useState)(!1),Be=(0,i.Z)(Oe,2),we=Be[0],De=Be[1];(0,a.useEffect)((function(){O&&f.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=d()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=d()(e,"".concat(n,".name"),"");return{label:t,value:t}}));$(t),t.length>0&&oe(t[0].value)}B(!1)})).catch((function(e){B(!1)}))}),[O]),(0,a.useEffect)((function(){var e=!0;"expiry"!==Pe&&""===se&&(e=!1),De(e)}),[Pe,Te,Le,se]),(0,a.useEffect)((function(){var e;"Enabled"===F.status&&U(!0);var n,t,i,r,a,s,o=!1;(F.transition&&(F.transition.days&&0!==F.transition.days&&(Re(F.transition.days.toString()),ke("transition"),o=!0),F.transition.noncurrent_transition_days&&0!==F.transition.noncurrent_transition_days&&(be(F.transition.noncurrent_transition_days.toString()),ke("transition"),o=!0),F.transition.date&&"0001-01-01T00:00:00Z"!==F.transition.date&&(ke("transition"),o=!0)),F.expiration&&(F.expiration.days&&0!==F.expiration.days&&(Fe(F.expiration.days.toString()),ke("expiry"),o=!1),F.expiration.noncurrent_expiration_days&&0!==F.expiration.noncurrent_expiration_days&&(ye(F.expiration.noncurrent_expiration_days.toString()),ke("expiry"),o=!1),F.expiration.date&&"0001-01-01T00:00:00Z"!==F.expiration.date&&(ke("expiry"),o=!1)),o)?(oe((null===(n=F.transition)||void 0===n?void 0:n.storage_class)||""),be((null===(t=F.transition)||void 0===t||null===(i=t.noncurrent_transition_days)||void 0===i?void 0:i.toString())||"0"),ue((null===(r=F.transition)||void 0===r?void 0:r.noncurrent_storage_class)||"")):ye((null===(a=F.expiration)||void 0===a||null===(s=a.noncurrent_expiration_days)||void 0===s?void 0:s.toString())||"0");if(me(!(null===(e=F.expiration)||void 0===e||!e.delete_marker)),ie(F.prefix||""),F.tags){var l=F.tags.reduce((function(e,n,t){return"".concat(e).concat(0!==t?"&":"").concat(n.key,"=").concat(n.value)}),"");H(l)}}),[F]);return(0,N.jsx)(g.Z,{onClose:function(){p(!1)},modalOpen:I,title:"Edit Lifecycle Configuration",titleIcon:(0,N.jsx)(x.QIv,{}),children:(0,N.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),!M&&(V(!0),null!==T&&null!==F)){var n={};if("expiry"===Pe){var t,i,a,s={};null!==(t=F.expiration)&&void 0!==t&&t.days&&(null===(i=F.expiration)||void 0===i?void 0:i.days)>0&&(s.expiry_days=parseInt(Te)),null!==(a=F.expiration)&&void 0!==a&&a.noncurrent_expiration_days&&(s.noncurrentversion_expiration_days=parseInt(ve)),n=(0,r.Z)({},s)}else{var o,l,c,d={};null!==(o=F.expiration)&&void 0!==o&&o.days&&(null===(l=F.expiration)||void 0===l?void 0:l.days)>0&&(d.transition_days=parseInt(Te),d.storage_class=se),null!==(c=F.expiration)&&void 0!==c&&c.noncurrent_expiration_days&&(d.noncurrentversion_transition_days=parseInt(ve),d.noncurrentversion_transition_storage_class=de),n=(0,r.Z)({},d)}var u=(0,r.Z)({type:Pe,disable:!Q,prefix:te,tags:K,expired_object_delete_marker:fe},n);f.Z.invoke("PUT","/api/v1/buckets/".concat(T,"/lifecycle/").concat(F.id),u).then((function(e){V(!1),p(!0)})).catch((function(e){V(!1),A((0,k.zb)(e))}))}}(e)},children:(0,N.jsxs)(u.ZP,{container:!0,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,className:c.formScrollable,children:(0,N.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{id:"id",name:"id",label:"Id",value:F.id,onChange:function(){},disabled:!0})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(b.Z,{label:"Status",indicatorLabels:["Enabled","Disabled"],checked:Q,value:"user_enabled",id:"rule_status",name:"rule_status",onChange:function(e){U(e.target.checked)}})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(P.Z,{currentSelection:Pe,id:"rule_type",name:"rule_type",label:"Rule Type",selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],onChange:function(){},disableOptions:!0})}),"expiry"===Pe&&(null===(n=F.expiration)||void 0===n?void 0:n.days)&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{type:"number",id:"expiry_days",name:"expiry_days",onChange:function(e){Fe(e.target.value)},label:"Expiry Days",value:Te,min:"0"})}),"expiry"===Pe&&(null===(t=F.expiration)||void 0===t?void 0:t.noncurrent_expiration_days)&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{type:"number",id:"noncurrentversion_expiration_days",name:"noncurrentversion_expiration_days",onChange:function(e){ye(e.target.value)},label:"Non-current Expiration Days",value:ve,min:"0"})}),"transition"===Pe&&(null===(s=F.transition)||void 0===s?void 0:s.days)&&(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{type:"number",id:"transition_days",name:"transition_days",onChange:function(e){Re(e.target.value)},label:"Transition Days",value:Le,min:"0"})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(C.Z,{label:"Storage Class",id:"storage_class",name:"storage_class",value:se,onChange:function(e){oe(e.target.value)},options:X})})]}),"transition"===Pe&&(null===(o=F.transition)||void 0===o?void 0:o.noncurrent_transition_days)&&(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{type:"number",id:"noncurrentversion_transition_days",name:"noncurrentversion_transition_days",onChange:function(e){be(e.target.value)},label:"Non-current Transition Days",value:_e,min:"0"})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{id:"noncurrentversion_t_SC",name:"noncurrentversion_t_SC",onChange:function(e){ue(e.target.value)},placeholder:"Set Non-current Version Transition Storage Class",label:"Non-current Version Transition Storage Class",value:de})})]}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,N.jsxs)(m.Z,{children:[(0,N.jsx)(h.Z,{children:(0,N.jsx)(Z.Z,{children:"Filters"})}),(0,N.jsxs)(v.Z,{children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){ie(e.target.value)},label:"Prefix",value:te})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(S.Z,{name:"tags",label:"Tags",elements:K,onChange:function(e){H(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===Pe&&(null===(l=F.expiration)||void 0===l?void 0:l.noncurrent_expiration_days)&&(0,N.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRowAccordion,children:(0,N.jsxs)(m.Z,{children:[(0,N.jsx)(h.Z,{children:(0,N.jsx)(Z.Z,{children:"Advanced"})}),(0,N.jsx)(v.Z,{children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(b.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:fe,onChange:function(e){me(e.target.checked)},label:"Expired Object Delete Marker"})})})]})})]})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,N.jsx)(y.Z,{type:"button",variant:"outlined",color:"primary",disabled:M,onClick:function(){p(!1)},children:"Cancel"}),(0,N.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",disabled:M||!we,children:"Save"})]}),M&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(j.Z,{})})]})})})})),F=t(56578),I=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({dateSelector:{"& div":{borderBottom:0,marginBottom:0,"& div:nth-child(2)":{border:"1px solid #EAEAEA",paddingLeft:5,"& div":{border:0}}}},formFieldRowFilter:{"& .MuiPaper-root":{padding:0}}},p.bK),p.ID),p.DF),p.QV))}))((function(e){var n=e.open,t=e.closeModalAndRefresh,o=e.classes,l=e.bucketName,c=(0,E.TL)(),p=(0,s.v9)(k.N5),T=(0,a.useState)(!0),I=(0,i.Z)(T,2),A=I[0],L=I[1],R=(0,a.useState)([]),O=(0,i.Z)(R,2),B=O[0],w=O[1],D=(0,a.useState)(!1),M=(0,i.Z)(D,2),V=M[0],z=M[1],G=(0,a.useState)(!1),K=(0,i.Z)(G,2),H=K[0],W=K[1],Y=(0,a.useState)(""),Q=(0,i.Z)(Y,2),U=Q[0],q=Q[1],J=(0,a.useState)(""),X=(0,i.Z)(J,2),$=X[0],ee=X[1],ne=(0,a.useState)(""),te=(0,i.Z)(ne,2),ie=te[0],re=te[1],ae=(0,a.useState)("expiry"),se=(0,i.Z)(ae,2),oe=se[0],le=se[1],ce=(0,a.useState)("current"),de=(0,i.Z)(ce,2),ue=de[0],xe=de[1],pe=(0,a.useState)(""),fe=(0,i.Z)(pe,2),me=fe[0],he=fe[1],Ze=(0,a.useState)(!1),ve=(0,i.Z)(Ze,2),ye=ve[0],je=ve[1],ge=(0,a.useState)(!1),_e=(0,i.Z)(ge,2),be=_e[0],Se=_e[1],Ce=(0,a.useState)(!0),Pe=(0,i.Z)(Ce,2),ke=Pe[0],Ee=Pe[1];(0,a.useEffect)((function(){A&&f.Z.invoke("GET","/api/v1/admin/tiers").then((function(e){var n=d()(e,"items",[]);if(null!==n&&n.length>=1){var t=n.map((function(e){var n=e.type,t=d()(e,"".concat(n,".name"),"");return{label:t,value:t}}));w(t),t.length>0&&re(t[0].value)}L(!1)})).catch((function(e){L(!1)}))}),[A]),(0,a.useEffect)((function(){var e=!0;"expiry"!==oe&&""===ie&&(e=!1),je(e)}),[oe,me,ie]),(0,a.useEffect)((function(){ke&&p&&f.Z.invoke("GET","/api/v1/buckets/".concat(l,"/versioning")).then((function(e){W(e.is_versioned),Ee(!1)})).catch((function(e){c((0,k.zb)(e)),Ee(!1)}))}),[ke,c,l,p]);return(0,N.jsxs)(g.Z,{modalOpen:n,onClose:function(){t(!1)},title:"Add Lifecycle Rule",titleIcon:(0,N.jsx)(x.QIv,{}),children:[A&&(0,N.jsx)(u.ZP,{container:!0,className:o.loadingBox,children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(j.Z,{})})}),!A&&(0,N.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),z(!0),function(){var e={};if("expiry"===oe){var n={};"current"===ue?n.expiry_days=parseInt(me):n.noncurrentversion_expiration_days=parseInt(me),e=(0,r.Z)({},n)}else{var i={};"current"===ue?(i.transition_days=parseInt(me),i.storage_class=ie):(i.noncurrentversion_transition_days=parseInt(me),i.noncurrentversion_transition_storage_class=ie),e=(0,r.Z)({},i)}var a=(0,r.Z)({type:oe,prefix:U,tags:$,expired_object_delete_marker:be},e);f.Z.invoke("POST","/api/v1/buckets/".concat(l,"/lifecycle"),a).then((function(){z(!1),t(!0)})).catch((function(e){z(!1),c((0,k.zb)(e))}))}()},children:(0,N.jsxs)(u.ZP,{container:!0,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,className:o.formScrollable,children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(P.Z,{currentSelection:oe,id:"ilm_type",name:"ilm_type",label:"Type of lifecycle",onChange:function(e){le(e.target.value)},selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}]})}),H&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(C.Z,{value:ue,id:"object_version",name:"object_version",label:"Object Version",onChange:function(e){xe(e.target.value)},options:[{value:"current",label:"Current Version"},{value:"noncurrent",label:"Non-Current Version"}]})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{id:"expiry_days",name:"expiry_days",onChange:function(e){e.target.validity.valid&&he(e.target.value)},pattern:"[0-9]*",label:"After",value:me,overlayObject:(0,N.jsx)(F.Z,{id:"expire-current-unit",unitSelected:"days",unitsList:[{label:"Days",value:"days"}],disabled:!0})})}),"expiry"===oe?(0,N.jsx)(a.Fragment,{}):(0,N.jsx)(a.Fragment,{children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(C.Z,{label:"To Tier",id:"storage_class",name:"storage_class",value:ie,onChange:function(e){re(e.target.value)},options:B})})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:o.formFieldRowFilter,children:(0,N.jsxs)(m.Z,{children:[(0,N.jsx)(h.Z,{children:(0,N.jsx)(Z.Z,{children:"Filters"})}),(0,N.jsxs)(v.Z,{children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(_.Z,{id:"prefix",name:"prefix",onChange:function(e){q(e.target.value)},label:"Prefix",value:U})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(S.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){ee(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})]})}),"expiry"===oe&&"noncurrent"===ue&&(0,N.jsx)(u.ZP,{item:!0,xs:12,className:o.formFieldRowFilter,children:(0,N.jsxs)(m.Z,{children:[(0,N.jsx)(h.Z,{children:(0,N.jsx)(Z.Z,{children:"Advanced"})}),(0,N.jsx)(v.Z,{children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(b.Z,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:be,onChange:function(e){Se(e.target.checked)},label:"Expire Delete Marker",description:"Remove the reference to the object if no versions are left"})})})]})})]})})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:o.modalButtonBar,children:[(0,N.jsx)(y.Z,{type:"button",variant:"outlined",color:"primary",disabled:V,onClick:function(){t(!1)},children:"Cancel"}),(0,N.jsx)(y.Z,{type:"submit",variant:"contained",color:"primary",disabled:V||!ye,children:"Save"})]}),V&&(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(j.Z,{})})]})})]})})),A=t(92983),L=t(23804),R=t(60680),O=t(38442),B=t(56087),w=t(40603),D=t(51691),M=t(2148),V=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)({},p.oO))}))((function(e){var n=e.onCloseAndRefresh,t=e.deleteOpen,r=e.bucket,s=e.id,o=(0,E.TL)(),l=(0,a.useState)(!1),c=(0,i.Z)(l,2),d=c[0],u=c[1];(0,a.useEffect)((function(){d&&f.Z.invoke("DELETE","/api/v1/buckets/".concat(r,"/lifecycle/").concat(s)).then((function(e){u(!1),n(!0)})).catch((function(e){u(!1),o((0,k.Ih)(e))}))}),[d,r,s,n,o]);return(0,N.jsx)(M.Z,{title:"Delete Lifecycle Rule",confirmText:"Delete",isOpen:t,isLoading:d,onConfirm:function(){u(!0)},titleIcon:(0,N.jsx)(x.NvT,{}),onClose:function(){return n(!1)},confirmationContent:(0,N.jsxs)(D.Z,{children:["Are you sure you want to delete the ",(0,N.jsx)("strong",{children:s})," rule?"]})})})),z=t(9859),G=t(16871),K=(0,l.Z)((function(e){return(0,o.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},p.qg),p.OR),{},{twHeight:{minHeight:400}}))}))((function(e){var n=e.classes,t=(0,s.v9)(z.HQ),r=(0,G.UO)(),o=(0,a.useState)(!0),l=(0,i.Z)(o,2),c=l[0],p=l[1],m=(0,a.useState)([]),h=(0,i.Z)(m,2),Z=h[0],v=h[1],y=(0,a.useState)(!1),j=(0,i.Z)(y,2),g=j[0],_=j[1],b=(0,a.useState)(!1),S=(0,i.Z)(b,2),C=S[0],P=S[1],k=(0,a.useState)(null),E=(0,i.Z)(k,2),F=E[0],D=E[1],M=(0,a.useState)(!1),K=(0,i.Z)(M,2),H=K[0],W=K[1],Y=(0,a.useState)(null),Q=(0,i.Z)(Y,2),U=Q[0],q=Q[1],J=r.bucketName||"",X=(0,O.F)(J,[B.Ft.S3_GET_LIFECYCLE_CONFIGURATION]);(0,a.useEffect)((function(){t&&p(!0)}),[t,p]),(0,a.useEffect)((function(){c&&(X?f.Z.invoke("GET","/api/v1/buckets/".concat(J,"/lifecycle")).then((function(e){var n=d()(e,"lifecycle",[]);v(n||[]),p(!1)})).catch((function(e){console.error(e),v([]),p(!1)})):p(!1))}),[c,p,J,X]);var $=[{label:"Type",renderFullObject:!0,renderFunction:function(e){return e?e.expiration&&(e.expiration.days>0||e.expiration.noncurrent_expiration_days)?(0,N.jsx)("span",{children:"Expiry"}):e.transition&&(e.transition.days>0||e.transition.noncurrent_transition_days)?(0,N.jsx)("span",{children:"Transition"}):(0,N.jsx)(a.Fragment,{}):(0,N.jsx)(a.Fragment,{})}},{label:"Version",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,N.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,N.jsx)("span",{children:"Current"});if(e.expiration.noncurrent_expiration_days)return(0,N.jsx)("span",{children:"Non-Current"})}if(e.transition){if(e.transition.days>0)return(0,N.jsx)("span",{children:"Current"});if(e.transition.noncurrent_transition_days)return(0,N.jsx)("span",{children:"Non-Current"})}}},{label:"Tier",elementKey:"storage_class",renderFunction:function(e){var n=d()(e,"transition.storage_class","");return n=d()(e,"transition.noncurrent_storage_class",n)},renderFullObject:!0},{label:"Prefix",elementKey:"prefix"},{label:"After",renderFullObject:!0,renderFunction:function(e){if(!e)return(0,N.jsx)(a.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,N.jsxs)("span",{children:[e.expiration.days," days"]});if(e.expiration.noncurrent_expiration_days)return(0,N.jsxs)("span",{children:[e.expiration.noncurrent_expiration_days," days"]})}if(e.transition){if(e.transition.days>0)return(0,N.jsxs)("span",{children:[e.transition.days," days"]});if(e.transition.noncurrent_transition_days)return(0,N.jsxs)("span",{children:[e.transition.noncurrent_transition_days," days"]})}}},{label:"Status",elementKey:"status"}],ee=[{type:"view",onClick:function(e){D(e),P(!0)}},{type:"delete",onClick:function(e){q(e),W(!0)},sendOnlyId:!0}];return(0,N.jsxs)(a.Fragment,{children:[C&&F&&(0,N.jsx)(T,{open:C,closeModalAndRefresh:function(e){P(!1),D(null),e&&p(!0)},selectedBucket:J,lifecycleRule:F}),g&&(0,N.jsx)(I,{open:g,bucketName:J,closeModalAndRefresh:function(e){_(!1),e&&p(!0)}}),H&&U&&(0,N.jsx)(V,{id:U,bucket:J,deleteOpen:H,onCloseAndRefresh:function(e){W(!1),q(null),e&&p(!0)}}),(0,N.jsxs)(u.ZP,{container:!0,children:[(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,N.jsx)(R.Z,{children:"Lifecycle Rules"}),(0,N.jsx)(O.s,{scopes:[B.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,B.Ft.ADMIN_LIST_TIERS],resource:J,matchAll:!0,errorProps:{disabled:!0},children:(0,N.jsx)(w.Z,{tooltip:"Add Lifecycle Rule",onClick:function(){_(!0)},text:"Add Lifecycle Rule",icon:(0,N.jsx)(x.dtP,{}),color:"primary",variant:"contained"})})]}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(O.s,{scopes:[B.Ft.S3_GET_LIFECYCLE_CONFIGURATION],resource:J,errorProps:{disabled:!0},children:(0,N.jsx)(A.Z,{itemActions:ee,columns:$,isLoading:c,records:Z,entityName:"Lifecycle",customEmptyMessage:"There are no Lifecycle rules yet",idField:"id",customPaperHeight:n.twHeight})})}),!c&&(0,N.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,N.jsx)("br",{}),(0,N.jsx)(L.Z,{title:"Lifecycle Rules",iconComponent:(0,N.jsx)(x.y2Y,{}),help:(0,N.jsxs)(a.Fragment,{children:["MinIO Object Lifecycle Management allows creating rules for time or date based automatic transition or expiry of objects. For object transition, MinIO automatically moves the object to a configured remote storage tier.",(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),"You can learn more at our"," ",(0,N.jsx)("a",{href:"https://docs.min.io/minio/baremetal/lifecycle-management/lifecycle-management-overview.html?ref=con",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})]})]})]})}))},17420:function(e,n,t){var i=t(93433),r=t(29439),a=t(1413),s=t(72791),o=t(26181),l=t.n(o),c=t(48573),d=t.n(c),u=t(11135),x=t(25787),p=t(61889),f=t(77961),m=t(30829),h=t(20068),Z=t(23814),v=t(21435),y=t(47919),j=t(80184);n.Z=(0,x.Z)((function(e){return(0,u.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},Z.YI),Z.Hr),{},{inputWithBorder:{border:"1px solid #EAEAEA",padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},lineInputBoxes:{display:"flex",marginBottom:10},queryDiv:{alignSelf:"center",margin:"0 4px",fontWeight:600}}))}))((function(e){var n=e.elements,t=e.name,a=e.label,o=e.tooltip,c=void 0===o?"":o,u=e.keyPlaceholder,x=void 0===u?"":u,Z=e.valuePlaceholder,g=void 0===Z?"":Z,_=e.onChange,b=e.withBorder,S=void 0!==b&&b,C=e.classes,P=(0,s.useState)([""]),k=(0,r.Z)(P,2),E=k[0],N=k[1],T=(0,s.useState)([""]),F=(0,r.Z)(T,2),I=F[0],A=F[1],L=(0,s.createRef)();(0,s.useEffect)((function(){if(1===E.length&&""===E[0]&&1===I.length&&""===I[0]&&n&&""!==n){var e=n.split("&"),t=[],i=[];e.forEach((function(e){var n=e.split("=");2===n.length&&(t.push(n[0]),i.push(n[1]))})),t.push(""),i.push(""),N(t),A(i)}}),[E,I,n]),(0,s.useEffect)((function(){var e=L.current;e&&E.length>1&&e.scrollIntoView(!1)}),[E]);var R=(0,s.useRef)(!0);(0,s.useLayoutEffect)((function(){R.current?R.current=!1:w()}),[E,I]);var O=function(e){e.persist();var n=(0,i.Z)(E);n[l()(e.target,"dataset.index",0)]=e.target.value,N(n)},B=function(e){e.persist();var n=(0,i.Z)(I);n[l()(e.target,"dataset.index",0)]=e.target.value,A(n)},w=d()((function(){var e="";E.forEach((function(n,t){if(E[t]&&I[t]){var i="".concat(n,"=").concat(I[t]);0!==t&&(i="&".concat(i)),e="".concat(e).concat(i)}})),_(e)}),500),D=I.map((function(e,n){return(0,j.jsxs)(p.ZP,{item:!0,xs:12,className:C.lineInputBoxes,children:[(0,j.jsx)(v.Z,{id:"".concat(t,"-key-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:E[n],onChange:O,index:n,placeholder:x}),(0,j.jsx)("span",{className:C.queryDiv,children:":"}),(0,j.jsx)(v.Z,{id:"".concat(t,"-value-").concat(n.toString()),label:"",name:"".concat(t,"-").concat(n.toString()),value:I[n],onChange:B,index:n,placeholder:g,overlayIcon:n===I.length-1?(0,j.jsx)(y.Z,{}):null,overlayAction:function(){!function(){if(""!==E[E.length-1].trim()&&""!==I[I.length-1].trim()){var e=(0,i.Z)(E),n=(0,i.Z)(I);e.push(""),n.push(""),N(e),A(n)}}()}})]},"query-pair-".concat(t,"-").concat(n.toString()))}));return(0,j.jsx)(s.Fragment,{children:(0,j.jsxs)(p.ZP,{item:!0,xs:12,className:C.fieldContainer,children:[(0,j.jsxs)(m.Z,{className:C.inputLabel,children:[(0,j.jsx)("span",{children:a}),""!==c&&(0,j.jsx)("div",{className:C.tooltipContainer,children:(0,j.jsx)(h.Z,{title:c,placement:"top-start",children:(0,j.jsx)(f.Z,{className:C.tooltip})})})]}),(0,j.jsxs)(p.ZP,{item:!0,xs:12,className:"".concat(S?C.inputWithBorder:""),children:[D,(0,j.jsx)("div",{ref:L})]})]})})}))},56028:function(e,n,t){var i=t(29439),r=t(1413),a=t(72791),s=t(60364),o=t(13400),l=t(55646),c=t(5574),d=t(65661),u=t(39157),x=t(11135),p=t(25787),f=t(23814),m=t(81551),h=t(29823),Z=t(28057),v=t(87995),y=t(80184);n.Z=(0,p.Z)((function(e){return(0,x.Z)((0,r.Z)((0,r.Z)({},f.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},f.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,x=e.title,p=e.children,f=e.classes,j=e.wideLimit,g=void 0===j||j,_=e.noContentPadding,b=e.titleIcon,S=void 0===b?null:b,C=(0,m.TL)(),P=(0,a.useState)(!1),k=(0,i.Z)(P,2),E=k[0],N=k[1],T=(0,s.v9)((function(e){return e.system.modalSnackBar}));(0,a.useEffect)((function(){C((0,v.MK)(""))}),[C]),(0,a.useEffect)((function(){if(T){if(""===T.message)return void N(!1);"error"!==T.type&&N(!0)}}),[T]);var F=g?{classes:{paper:f.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},I="";return T&&(I=T.detailedErrorMsg,(""===T.detailedErrorMsg||T.detailedErrorMsg.length<5)&&(I=T.message)),(0,y.jsxs)(c.Z,(0,r.Z)((0,r.Z)({open:t,classes:f},F),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:f.root,children:[(0,y.jsxs)(d.Z,{className:f.title,children:[(0,y.jsxs)("div",{className:f.titleText,children:[S," ",x]}),(0,y.jsx)("div",{className:f.closeContainer,children:(0,y.jsx)(o.Z,{"aria-label":"close",id:"close",className:f.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,y.jsx)(h.Z,{})})})]}),(0,y.jsx)(Z.Z,{isModal:!0}),(0,y.jsx)(l.Z,{open:E,className:f.snackBarModal,onClose:function(){N(!1),C((0,v.MK)(""))},message:I,ContentProps:{className:"".concat(f.snackBar," ").concat(T&&"error"===T.type?f.errorSnackBar:"")},autoHideDuration:T&&"error"===T.type?1e4:5e3}),(0,y.jsx)(u.Z,{className:_?"":f.content,children:p})]}))}))},60680:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({root:{padding:0,margin:0,fontSize:".9rem"}})}))((function(e){var n=e.classes,t=e.children;return(0,a.jsx)("h1",{className:n.root,children:t})}))}}]);
//# sourceMappingURL=51.04aad218.chunk.js.map