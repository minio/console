{"version":3,"file":"static/js/5961.04fd21a3.chunk.js","mappings":"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","sources":["screens/Console/Common/FormComponents/PredefinedList/PredefinedList.tsx","screens/Console/Users/AddUser.tsx","screens/shared/tabs.tsx"],"sourcesContent":["import React, { Fragment } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { predefinedList } from \"../common/styleLibrary\";\n\ninterface IPredefinedList {\n  classes: any;\n  label?: string;\n  content: any;\n  multiLine?: boolean;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...predefinedList,\n  });\n\nconst PredefinedList = ({\n  classes,\n  label = \"\",\n  content,\n  multiLine = false,\n}: IPredefinedList) => {\n  return (\n    <Fragment>\n      <Grid className={classes.prefinedContainer}>\n        {label !== \"\" && (\n          <Grid item xs={12} className={classes.predefinedTitle}>\n            {label}\n          </Grid>\n        )}\n        <Grid item xs={12} className={classes.predefinedList}>\n          <Grid\n            item\n            xs={12}\n            className={\n              multiLine ? classes.innerContentMultiline : classes.innerContent\n            }\n          >\n            {content}\n          </Grid>\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(PredefinedList);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Grid from \"@mui/material/Grid\";\nimport { Button, LinearProgress, Tab, Tabs } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  formFieldStyles,\n  modalStyleUtils,\n  spacingUtils,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { User } from \"./types\";\nimport { setModalErrorSnackMessage } from \"../../../actions\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport api from \"../../../common/api\";\nimport GroupsSelectors from \"./GroupsSelectors\";\nimport ModalWrapper from \"../Common/ModalWrapper/ModalWrapper\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport FormSwitchWrapper from \"../Common/FormComponents/FormSwitchWrapper/FormSwitchWrapper\";\nimport PredefinedList from \"../Common/FormComponents/PredefinedList/PredefinedList\";\nimport PolicySelectors from \"../Policies/PolicySelectors\";\nimport { TabPanel } from \"../../shared/tabs\";\nimport { CreateUserIcon } from \"../../../icons\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    tabsHeader: {\n      marginBottom: \"1rem\",\n    },\n    ...modalStyleUtils,\n    ...formFieldStyles,\n    ...spacingUtils,\n  });\n\ninterface IAddUserContentProps {\n  classes: any;\n  closeModalAndRefresh: () => void;\n  selectedUser: User | null;\n  open: boolean;\n  setModalErrorSnackMessage: typeof setModalErrorSnackMessage;\n}\n\nconst AddUser = ({\n  classes,\n  closeModalAndRefresh,\n  selectedUser,\n  open,\n  setModalErrorSnackMessage,\n}: IAddUserContentProps) => {\n  const [addLoading, setAddLoading] = useState<boolean>(false);\n  const [accessKey, setAccessKey] = useState<string>(\"\");\n  const [secretKey, setSecretKey] = useState<string>(\"\");\n  const [enabled, setEnabled] = useState<boolean>(false);\n  const [selectedGroups, setSelectedGroups] = useState<string[]>([]);\n  const [selectedPolicies, setSelectedPolicies] = useState<string[]>([]);\n  const [currentGroups, setCurrentGroups] = useState<string[]>([]);\n  const [currenTab, setCurrenTab] = useState<number>(0);\n\n  const getUserInformation = useCallback(() => {\n    if (!selectedUser) {\n      return null;\n    }\n\n    api\n      .invoke(\"GET\", `/api/v1/user?name=${encodeURI(selectedUser.accessKey)}`)\n      .then((res) => {\n        setAddLoading(false);\n        setAccessKey(res.accessKey);\n        setSelectedGroups(res.memberOf || []);\n        setCurrentGroups(res.memberOf || []);\n        setEnabled(res.status === \"enabled\");\n      })\n      .catch((err: ErrorResponseHandler) => {\n        setAddLoading(false);\n        setModalErrorSnackMessage(err);\n      });\n  }, [selectedUser, setModalErrorSnackMessage]);\n\n  useEffect(() => {\n    if (selectedUser === null) {\n      setAccessKey(\"\");\n      setSecretKey(\"\");\n      setSelectedGroups([]);\n    } else {\n      getUserInformation();\n    }\n  }, [selectedUser, getUserInformation]);\n\n  const saveRecord = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (secretKey.length < 8) {\n      setModalErrorSnackMessage({\n        errorMessage: \"Passwords must be at least 8 characters long\",\n        detailedError: \"\",\n      });\n      setAddLoading(false);\n      return;\n    }\n\n    if (addLoading) {\n      return;\n    }\n    setAddLoading(true);\n    if (selectedUser !== null) {\n      api\n        .invoke(\n          \"PUT\",\n          `/api/v1/user?name=${encodeURI(selectedUser.accessKey)}`,\n          {\n            status: enabled ? \"enabled\" : \"disabled\",\n            groups: selectedGroups,\n            policies: selectedPolicies,\n          }\n        )\n        .then((res) => {\n          setAddLoading(false);\n          closeModalAndRefresh();\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setAddLoading(false);\n          setModalErrorSnackMessage(err);\n        });\n    } else {\n      api\n        .invoke(\"POST\", \"/api/v1/users\", {\n          accessKey,\n          secretKey,\n          groups: selectedGroups,\n          policies: selectedPolicies,\n        })\n        .then((res) => {\n          setAddLoading(false);\n          closeModalAndRefresh();\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setAddLoading(false);\n          setModalErrorSnackMessage(err);\n        });\n    }\n  };\n\n  const resetForm = () => {\n    if (selectedUser !== null) {\n      setSelectedGroups([]);\n      return;\n    }\n    setAccessKey(\"\");\n    setSecretKey(\"\");\n    setSelectedGroups([]);\n  };\n\n  const sendEnabled =\n    accessKey.trim() !== \"\" &&\n    ((secretKey.trim() !== \"\" && selectedUser === null) ||\n      selectedUser !== null);\n  return (\n    <ModalWrapper\n      onClose={() => {\n        closeModalAndRefresh();\n      }}\n      modalOpen={open}\n      title={selectedUser !== null ? \"Edit User\" : \"Create User\"}\n      titleIcon={<CreateUserIcon />}\n    >\n      {selectedUser !== null && (\n        <div className={classes.floatingEnabled}>\n          <FormSwitchWrapper\n            indicatorLabels={[\"Enabled\", \"Disabled\"]}\n            checked={enabled}\n            value={\"user_enabled\"}\n            id=\"user-status\"\n            name=\"user-status\"\n            onChange={(e) => {\n              setEnabled(e.target.checked);\n            }}\n            switchOnly\n          />\n        </div>\n      )}\n\n      <React.Fragment>\n        <form\n          noValidate\n          autoComplete=\"off\"\n          onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n            saveRecord(e);\n          }}\n        >\n          <Grid container>\n            <Grid item xs={12}>\n              <div className={classes.formFieldRow}>\n                <InputBoxWrapper\n                  id=\"accesskey-input\"\n                  name=\"accesskey-input\"\n                  label=\"Access Key\"\n                  value={accessKey}\n                  autoFocus={true}\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                    setAccessKey(e.target.value);\n                  }}\n                  disabled={selectedUser !== null}\n                />\n              </div>\n\n              {selectedUser !== null ? (\n                <PredefinedList\n                  label={\"Current Groups\"}\n                  content={currentGroups.join(\", \")}\n                />\n              ) : (\n                <div className={classes.formFieldRow}>\n                  <InputBoxWrapper\n                    id=\"standard-multiline-static\"\n                    name=\"standard-multiline-static\"\n                    label=\"Secret Key\"\n                    type=\"password\"\n                    value={secretKey}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      setSecretKey(e.target.value);\n                    }}\n                    autoComplete=\"current-password\"\n                  />\n                </div>\n              )}\n              <Grid item xs={12} className={classes.tabsHeader}>\n                <Tabs\n                  value={currenTab}\n                  onChange={(e, nv) => {\n                    setCurrenTab(nv);\n                  }}\n                >\n                  <Tab label=\"Policies\" />\n                  <Tab label=\"Groups\" />\n                </Tabs>\n              </Grid>\n              <TabPanel value={currenTab} index={0}>\n                <Grid item xs={12}>\n                  <PolicySelectors\n                    selectedPolicy={selectedPolicies}\n                    setSelectedPolicy={setSelectedPolicies}\n                  />\n                </Grid>\n              </TabPanel>\n              <TabPanel value={currenTab} index={1}>\n                <Grid item xs={12}>\n                  <GroupsSelectors\n                    selectedGroups={selectedGroups}\n                    setSelectedGroups={(elements: string[]) => {\n                      setSelectedGroups(elements);\n                    }}\n                  />\n                </Grid>\n              </TabPanel>\n\n              {addLoading && (\n                <Grid item xs={12}>\n                  <LinearProgress />\n                </Grid>\n              )}\n            </Grid>\n            <Grid item xs={12} className={classes.modalButtonBar}>\n              <Button\n                type=\"button\"\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={resetForm}\n              >\n                Clear\n              </Button>\n\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={addLoading || !sendEnabled}\n              >\n                Save\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </React.Fragment>\n    </ModalWrapper>\n  );\n};\n\nconst mapDispatchToProps = {\n  setModalErrorSnackMessage,\n};\n\nconst connector = connect(null, mapDispatchToProps);\n\nexport default withStyles(styles)(connector(AddUser));\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: any;\n  value: any;\n}\n\nexport const TabPanel = (props: TabPanelProps) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      style={{ marginTop: \"5px\" }}\n      {...other}\n    >\n      {value === index && <Fragment>{children}</Fragment>}\n    </div>\n  );\n};\n"],"names":["withStyles","theme","createStyles","predefinedList","classes","label","content","multiLine","Fragment","className","prefinedContainer","item","xs","predefinedTitle","innerContentMultiline","innerContent","mapDispatchToProps","setModalErrorSnackMessage","connector","connect","tabsHeader","marginBottom","modalStyleUtils","formFieldStyles","spacingUtils","closeModalAndRefresh","selectedUser","open","useState","addLoading","setAddLoading","accessKey","setAccessKey","secretKey","setSecretKey","enabled","setEnabled","selectedGroups","setSelectedGroups","selectedPolicies","setSelectedPolicies","currentGroups","setCurrentGroups","currenTab","setCurrenTab","getUserInformation","useCallback","api","encodeURI","then","res","memberOf","status","catch","err","useEffect","sendEnabled","trim","onClose","modalOpen","title","titleIcon","floatingEnabled","indicatorLabels","checked","value","id","name","onChange","e","target","switchOnly","noValidate","autoComplete","onSubmit","event","preventDefault","length","errorMessage","detailedError","groups","policies","saveRecord","container","formFieldRow","autoFocus","disabled","join","type","nv","index","selectedPolicy","setSelectedPolicy","elements","modalButtonBar","variant","color","onClick","TabPanel","props","children","other","role","hidden","style","marginTop"],"sourceRoot":""}