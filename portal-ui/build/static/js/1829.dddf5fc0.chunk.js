"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1829],{23804:function(e,n,t){t(72791);var a=t(11135),o=t(25787),i=t(61889),r=t(80184);n.Z=(0,o.Z)((function(e){return(0,a.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,a=e.title,o=e.help;return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(i.ZP,{container:!0,children:[(0,r.jsxs)(i.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,a]}),(0,r.jsx)(i.ZP,{item:!0,xs:12,className:n.helpText,children:o})]})})}))},47986:function(e,n,t){t(72791);var a=t(61889),o=t(64554),i=t(23804),r=t(80184);n.Z=function(e){var n=e.iconComponent,t=e.entity;return(0,r.jsx)(a.ZP,{container:!0,alignItems:"center",children:(0,r.jsx)(a.ZP,{item:!0,xs:12,children:(0,r.jsx)(i.Z,{title:"".concat(t," not available"),iconComponent:n,help:(0,r.jsxs)(o.Z,{sx:{fontSize:"14px",display:"flex",border:"none",flexFlow:{xs:"column",md:"row"},"& a":{color:function(e){return e.colors.link},textDecoration:"underline"}},children:[(0,r.jsx)("div",{children:"This feature is not available for a single-disk setup."}),(0,r.jsxs)("div",{children:["Please deploy a server in"," ",(0,r.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noreferrer",children:"Distributed Mode"})," ","to use this feature."]})]})})})})}},34866:function(e,n,t){var a=t(1413),o=t(72791),i=t(61889),r=t(94454),s=t(30829),c=t(20068),l=t(11135),d=t(25787),u=t(23814),f=t(84570),h=t(80184);n.Z=(0,d.Z)((function(e){return(0,l.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},u.YI),u.Hr),u.lM),{},{fieldContainer:(0,a.Z)((0,a.Z)({},u.YI.fieldContainer),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",margin:"15px 0",marginBottom:0,flexBasis:"initial",flexWrap:"nowrap"}),noTopMargin:{marginTop:0}}))}))((function(e){var n=e.label,t=e.onChange,a=e.value,l=e.id,d=e.name,u=e.checked,p=void 0!==u&&u,x=e.disabled,m=void 0!==x&&x,b=e.noTopMargin,g=void 0!==b&&b,j=e.tooltip,Z=void 0===j?"":j,v=e.overrideLabelClasses,k=void 0===v?"":v,S=e.overrideCheckboxStyles,C=e.classes,y=e.className;return(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)(i.ZP,{item:!0,xs:12,className:"".concat(C.fieldContainer," ").concat(g?C.noTopMargin:""," ").concat(y||""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(r.Z,{name:d,id:l,value:a,color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:p,onChange:t,checkedIcon:(0,h.jsx)("span",{className:C.checkedIcon}),icon:(0,h.jsx)("span",{className:C.unCheckedIcon}),disabled:m,disableRipple:!0,disableFocusRipple:!0,focusRipple:!1,centerRipple:!1,disableTouchRipple:!0,style:S||{}})}),""!==n&&(0,h.jsxs)(s.Z,{htmlFor:l,className:"".concat(C.noMinWidthLabel," ").concat(k),children:[(0,h.jsx)("span",{children:n}),""!==Z&&(0,h.jsx)("div",{className:C.tooltipContainer,children:(0,h.jsx)(c.Z,{title:Z,placement:"top-start",children:(0,h.jsx)("div",{className:C.tooltip,children:(0,h.jsx)(f.Z,{})})})})]})]})})}))},61829:function(e,n,t){t.r(n);var a=t(29439),o=t(1413),i=t(72791),r=t(78687),s=t(28353),c=t(4834),l=t(61889),d=t(68096),u=t(58406),f=t(23786),h=t(27391),p=t(95087),x=t(75952),m=t(11135),b=t(25787),g=t(26824),j=t(45248),Z=t(23814),v=t(56087),k=t(56096),S=t(34866),C=t(32291),y=t(81207),N=t(74794),w=t(38442),H=t(47986),I=t(87995),R=t(72455),E=t(80184),F=(0,R.Z)((function(e){return(0,m.Z)((0,o.Z)((0,o.Z)((0,o.Z)({graphContainer:{backgroundColor:"#fff",border:"#EAEDEE 1px solid",borderRadius:3,padding:"19px 38px",marginTop:15},scanInfo:{marginTop:20,display:"flex",flexDirection:"row",justifyContent:"space-between"},scanData:{fontSize:13},formBox:{padding:15,border:"1px solid #EAEAEA"},buttonBar:{display:"flex",alignItems:"center",justifyContent:"flex-end"},bucketField:{flex:1},prefixField:(0,o.Z)((0,o.Z)({},Z.qg.searchField),{},{marginLeft:10,flex:1}),actionsTray:(0,o.Z)((0,o.Z)({},Z.OR.actionsTray),{},{marginBottom:0})},Z.IX),Z.qg),(0,Z.Bz)(e.spacing(4))))})),P=(0,b.Z)((function(e){return(0,m.Z)({root:{lineHeight:"50px",marginRight:15,"label + &":{marginTop:e.spacing(3)},"& .MuiSelect-select:focus":{backgroundColor:"transparent"}}})}))(c.ZP);n.default=function(){var e=F(),n=(0,r.v9)(I.N5),t=(0,i.useState)(!1),o=(0,a.Z)(t,2),c=o[0],m=o[1],b=(0,i.useState)(""),Z=(0,a.Z)(b,2),R=Z[0],T=Z[1],B=(0,i.useState)([]),D=(0,a.Z)(B,2),z=D[0],A=D[1],G=(0,i.useState)(""),L=(0,a.Z)(G,2),M=L[0],W=L[1],Y=(0,i.useState)(!1),O=(0,a.Z)(Y,2),U=O[0],_=O[1],q=(0,i.useState)(!1),J=(0,a.Z)(q,2),V=J[0],X=J[1],K=(0,i.useState)(!1),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],ne=(0,i.useState)({beforeHeal:[0,0,0,0],afterHeal:[0,0,0,0],objectsHealed:0,objectsScanned:0,healDuration:0,sizeScanned:""}),te=(0,a.Z)(ne,2),ae=te[0],oe=te[1];(0,i.useEffect)((function(){y.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=[];null!==e.buckets&&(n=e.buckets),A(n)})).catch((function(e){console.error(e)}))}),[]),(0,i.useEffect)((function(){!0===V&&ee(!1)}),[V]),(0,i.useEffect)((function(){!0===$&&X(!1)}),[$]);var ie=function(e){return[e.Green,e.Yellow,e.Red,e.Grey]};(0,i.useEffect)((function(){if(c){var e={Green:0,Yellow:0,Red:0,Grey:0},n={Green:0,Yellow:0,Red:0,Grey:0},t=new URL(window.location.toString()),o=t.port,i=new URL(document.baseURI).pathname,r=(0,g.x2)(t.protocol),s=new p.w3cwebsocket("".concat(r,"://").concat(t.hostname,":").concat(o).concat(i,"ws/heal/").concat(R,"?prefix=").concat(M,"&recursive=").concat(U,"&force-start=").concat(V,"&force-stop=").concat($));if(null!==s)return s.onopen=function(){console.log("WebSocket Client Connected"),s.send("ok")},s.onmessage=function(t){for(var o=JSON.parse(t.data.toString()),i=0,r=Object.entries(o.healthAfterCols);i<r.length;i++){var s=(0,a.Z)(r[i],2),c=s[0],l=s[1];n[c]=100*l/o.itemsScanned}for(var d=0,u=Object.entries(o.healthBeforeCols);d<u.length;d++){var f=(0,a.Z)(u[d],2),h=f[0],p=f[1];e[h]=100*p/o.itemsScanned}oe({beforeHeal:ie(e),afterHeal:ie(n),objectsHealed:o.objectsHealed,objectsScanned:o.objectsScanned,healDuration:o.healDuration,sizeScanned:(0,j.ae)(o.bytesScanned.toString())})},s.onclose=function(){m(!1),console.log("connection closed by server")},function(){s.close(1e3),console.log("closing websockets")}}}),[c,R,V,$,M,U]);var re={labels:["Green","Yellow","Red","Grey"],datasets:[{label:"After Healing",data:ae.afterHeal,backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Before Healing",data:ae.beforeHeal,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]},se=z.map((function(e){return{label:e.name,value:e.name}}));return(0,E.jsxs)(i.Fragment,{children:[(0,E.jsx)(C.Z,{label:"Drives"}),(0,E.jsx)(N.Z,{children:n?(0,E.jsxs)(w.s,{scopes:[v.Ft.ADMIN_HEAL],resource:v.C3,children:[(0,E.jsxs)(l.ZP,{xs:12,item:!0,className:e.formBox,children:[(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:e.actionsTray,children:[(0,E.jsx)(d.Z,{variant:"outlined",className:e.bucketField,children:(0,E.jsxs)(u.Z,{label:"Bucket",id:"bucket-name",name:"bucket-name",value:R,onChange:function(e){T(e.target.value)},className:e.searchField,input:(0,E.jsx)(P,{}),displayEmpty:!0,children:[(0,E.jsx)(f.Z,{value:"",children:"Select Bucket"},"select-bucket-name-default"),se.map((function(e){return(0,E.jsx)(f.Z,{value:e.value,children:e.label},"select-bucket-name-".concat(e.label))}))]})}),(0,E.jsx)(h.Z,{label:"Prefix",className:e.prefixField,id:"prefix-resource",disabled:!1,InputProps:{disableUnderline:!0},onChange:function(e){W(e.target.value)},variant:"standard"})]}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:e.inlineCheckboxes,children:[(0,E.jsx)(S.Z,{name:"recursive",id:"recursive",value:"recursive",checked:U,onChange:function(e){_(e.target.checked)},disabled:!1,label:"Recursive"}),(0,E.jsx)(S.Z,{name:"forceStart",id:"forceStart",value:"forceStart",checked:V,onChange:function(e){X(e.target.checked)},disabled:!1,label:"Force Start"}),(0,E.jsx)(S.Z,{name:"forceStop",id:"forceStop",value:"forceStop",checked:$,onChange:function(e){ee(e.target.checked)},disabled:!1,label:"Force Stop"})]}),(0,E.jsx)(l.ZP,{item:!0,xs:12,className:e.buttonBar,children:(0,E.jsx)(x.zx,{id:"start-heal",type:"submit",variant:"callAction",color:"primary",disabled:c,onClick:function(){return m(!0)},label:"Start"})})]}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:e.graphContainer,children:[(0,E.jsx)(s.n4,{data:re,width:80,height:30,options:{title:{display:!0,text:"Item's Health Status [%]",fontSize:20},legend:{display:!0,position:"right"}}}),(0,E.jsxs)(l.ZP,{item:!0,xs:12,className:e.scanInfo,children:[(0,E.jsxs)("div",{className:e.scanData,children:[(0,E.jsx)("strong",{children:"Size scanned:"})," ",ae.sizeScanned]}),(0,E.jsxs)("div",{className:e.scanData,children:[(0,E.jsx)("strong",{children:"Objects healed:"})," ",ae.objectsHealed," /"," ",ae.objectsScanned]}),(0,E.jsxs)("div",{className:e.scanData,children:[(0,E.jsx)("strong",{children:"Healing time:"})," ",ae.healDuration,"s"]})]})]})]}):(0,E.jsx)(H.Z,{entity:"Heal",iconComponent:(0,E.jsx)(k.lnI,{})})})]})}},26824:function(e,n,t){t.d(n,{HE:function(){return i},V9:function(){return a},ci:function(){return o},x2:function(){return r}});var a=1006,o=1008,i=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=1829.dddf5fc0.chunk.js.map