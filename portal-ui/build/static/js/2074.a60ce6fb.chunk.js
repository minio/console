"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2074,8896,9134],{88896:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var l=t(72791),i=t(29945),n=t(45248),r=t(87995),o=t(44690),c=t(23508),a=t(9505),d=t(80184);const u=e=>{let{selectedGroups:s,deleteOpen:t,closeDeleteModalAndRefresh:u}=e;const x=(0,o.TL)(),[h,p]=(0,a.Z)((()=>u(!0)),(e=>{x((0,r.Ih)(e)),u(!1)}));if(!s)return null;const m=s.map((e=>(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:e})},e)));return(0,d.jsx)(c.Z,{title:"Delete Group".concat(s.length>1?"s":""),confirmText:"Delete",isOpen:t,titleIcon:(0,d.jsx)(i.NvT,{}),isLoading:h,onConfirm:()=>{for(let e of s)p("DELETE","/api/v1/group/".concat((0,n.LL)(e)))},onClose:()=>u(!1),confirmationContent:(0,d.jsxs)(l.Fragment,{children:["Are you sure you want to delete the following"," ",1===s.length?"":s.length," group",s.length>1?"s?":"?",m]})})}},22074:(e,s,t)=>{t.r(s),t.d(s,{default:()=>P,formatPolicy:()=>k});var l=t(72791),i=t(57689),n=t(29945),r=t(31776),o=t(82342),c=t(56087),a=t(38442),d=t(45248),u=t(87995),x=t(44690),h=t(74616),p=t(39134),m=t(23814),j=t(40228),g=t(56028),b=t(80184);const v=e=>{let{title:s="",groupStatus:t="enabled",preSelectedUsers:i=[],selectedGroup:c="",open:a,onClose:h}=e;const p=(0,x.TL)(),[v,f]=(0,l.useState)(i);return(0,b.jsxs)(g.Z,{modalOpen:a,onClose:h,title:s,titleIcon:(0,b.jsx)(n.ZmA,{}),children:[(0,b.jsxs)(n.ltY,{withBorders:!1,containerPadding:!1,children:[(0,b.jsx)(n.bSr,{label:"Selected Group",sx:{width:"100%"},children:c}),(0,b.jsx)(j.Z,{selectedUsers:v,setSelectedUsers:f,editMode:!c})]}),(0,b.jsxs)(n.rjZ,{item:!0,xs:12,sx:m.ID.modalButtonBar,children:[(0,b.jsx)(n.zxk,{id:"reset-add-group-member",type:"button",variant:"regular",onClick:()=>{f(i)},label:"Reset"}),(0,b.jsx)(n.zxk,{id:"save-add-group-member",type:"button",variant:"callAction",onClick:()=>{r.h.group.updateGroup((0,d.LL)(c),{members:v,status:t}).then((()=>{h()})).catch((e=>{h(),p((0,u.zb)((0,o.g)(e.error)))}))},label:"Save"})]})]})};var f=t(88896),y=t(59114),S=t(27454),C=t(99670),Z=t(79844);const k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<=0?[]:e.split(",")},P=()=>{const e=(0,x.TL)(),s=(0,i.s0)(),t=(0,i.UO)(),[m,j]=(0,l.useState)({}),[g,P]=(0,l.useState)(!1),[L,A]=(0,l.useState)(!1),[U,w]=(0,l.useState)(!1),[G,F]=(0,l.useState)(""),[K,M]=(0,l.useState)("members"),E=(0,d.IO)(t.groupName||""),{members:I=[],policy:z="",status:N}=m,T=I.filter((e=>e.includes(G))),D=(0,a.F)(c.C3,c.iw,!0);(0,l.useEffect)((()=>{e((0,u.Sc)("group_details"))}),[]),(0,l.useEffect)((()=>{E&&X()}),[E]);const O=k(z),B="enabled"===N,R=I.length>0?"Edit Members":"Add Members",Q=(0,a.F)(c.C3,c.k_),_=(0,a.F)(c.C3,c.kt,!0),H=(0,a.F)(c.C3,c.UA,!0),W=(0,a.F)(c.C3,c.GD,!0);function X(){Q&&r.h.group.groupInfo((0,d.LL)(E)).then((e=>{j(e.data)})).catch((s=>{e((0,u.zb)((0,o.g)(s.error))),j({})}))}const Y=(0,b.jsxs)(n.xuv,{onMouseMove:()=>{e((0,u.Sc)("groups_members"))},children:[(0,b.jsx)(n.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,b.jsxs)(n.xuv,{sx:{display:"flex",gap:10},children:[(0,b.jsx)(y.Z,{placeholder:"Search members",onChange:e=>{F(e)},value:G,sx:{maxWidth:280}}),(0,b.jsx)(a.s,{resource:c.C3,scopes:c.uH,errorProps:{disabled:!0},children:(0,b.jsx)(S.Z,{tooltip:_?R:(0,c.MK)(c.vN,"edit Group membership"),children:(0,b.jsx)(n.zxk,{id:"add-user-group",label:R,variant:"callAction",icon:(0,b.jsx)(n.dtP,{}),onClick:()=>{A(!0)},disabled:!_})})})]}),children:"Members"}),(0,b.jsx)(n.rjZ,{item:!0,xs:12,children:(0,b.jsx)(a.s,{resource:c.C3,scopes:c.Rs,errorProps:{disabled:!0},children:(0,b.jsx)(S.Z,{tooltip:D?"":(0,c.MK)(c.iw,"view User details"),children:(0,b.jsx)(n.wQF,{itemActions:[{type:"view",onClick:e=>{s("".concat(c.gA.USERS,"/").concat((0,d.LL)(e)))},isDisabled:!D}],columns:[{label:"Access Key"}],selectedItems:[],isLoading:!1,records:T,entityName:"Users"})})})})]}),J=(0,b.jsxs)(l.Fragment,{children:[(0,b.jsx)(n.xuv,{onMouseMove:()=>{e((0,u.Sc)("groups_policies"))},children:(0,b.jsx)(n.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,b.jsx)(S.Z,{tooltip:H?"Set Policies":(0,c.MK)(c.UA,"assign Policies"),children:(0,b.jsx)(n.zxk,{id:"set-policies",label:"Set Policies",variant:"callAction",icon:(0,b.jsx)(n.v42,{}),onClick:()=>{P(!0)},disabled:!H})}),children:"Policies"})}),(0,b.jsx)(n.rjZ,{item:!0,xs:12,children:(0,b.jsx)(S.Z,{tooltip:W?"":(0,c.MK)(c.GD,"view Policy details"),children:(0,b.jsx)(n.wQF,{itemActions:[{type:"view",onClick:e=>{s("".concat(c.gA.POLICIES,"/").concat((0,d.LL)(e)))},isDisabled:!W}],columns:[{label:"Policy"}],isLoading:!1,records:O,entityName:"Policies"})})})]});return(0,b.jsxs)(l.Fragment,{children:[g?(0,b.jsx)(p.default,{open:g,selectedGroups:[E],selectedUser:null,closeModalAndRefresh:()=>{P(!1),X(),e((0,h.ue)([]))}}):null,L?(0,b.jsx)(v,{selectedGroup:E,onSaveClick:()=>{},title:R,groupStatus:N,preSelectedUsers:I,open:L,onClose:()=>{A(!1),X()}}):null,U&&(0,b.jsx)(f.default,{deleteOpen:U,selectedGroups:[E],closeDeleteModalAndRefresh:e=>{w(!1),e&&s(c.gA.GROUPS)}}),(0,b.jsx)(Z.Z,{label:(0,b.jsx)(l.Fragment,{children:(0,b.jsx)(n.hbI,{label:"Groups",onClick:()=>s(c.gA.GROUPS)})}),actions:(0,b.jsx)(C.Z,{})}),(0,b.jsxs)(n.Xgh,{children:[(0,b.jsx)(n.rjZ,{item:!0,xs:12,children:(0,b.jsx)(n.UHn,{icon:(0,b.jsx)(l.Fragment,{children:(0,b.jsx)(n.wws,{width:40})}),title:E,subTitle:null,bottomBorder:!0,actions:(0,b.jsxs)(n.xuv,{sx:{display:"flex",fontSize:14,alignItems:"center",gap:15},children:[(0,b.jsx)("span",{children:"Group Status:"}),(0,b.jsx)("span",{id:"group-status-label",style:{fontWeight:"bold"},children:B?"Enabled":"Disabled"}),(0,b.jsx)(S.Z,{tooltip:(0,a.F)(c.C3,c.xh,!0)?"":(0,c.MK)(c.xh,"enable or disable Groups"),children:(0,b.jsx)(a.s,{resource:c.C3,scopes:c.xh,errorProps:{disabled:!0},matchAll:!0,children:(0,b.jsx)(n.rsf,{indicatorLabels:["Enabled","Disabled"],checked:B,value:"group_enabled",id:"group-status",name:"group-status",onChange:()=>{var s;s=!B,r.h.group.updateGroup((0,d.LL)(E),{members:I,status:s?"enabled":"disabled"}).then((()=>{X()})).catch((s=>{e((0,u.zb)((0,o.g)(s.error)))}))},switchOnly:!0})})}),(0,b.jsx)(S.Z,{tooltip:"Delete Group",children:(0,b.jsx)(n.zxk,{id:"delete-user-group",variant:"secondary",icon:(0,b.jsx)(n.XHJ,{}),onClick:()=>{w(!0)}})})]}),sx:{marginBottom:15}})}),(0,b.jsx)(n.rjZ,{item:!0,xs:12,children:(0,b.jsx)(n.mQc,{options:[{tabConfig:{id:"members",label:"Members"},content:Y},{tabConfig:{id:"policies",label:"Policies"},content:J}],currentTabOrPath:K,onTabClick:M})})]})]})}},40228:(e,s,t)=>{t.d(s,{Z:()=>p});var l=t(72791),i=t(26181),n=t.n(i),r=t(31776),o=t(82342),c=t(29945),a=t(21639),d=t(87995),u=t(44690),x=t(59114),h=t(80184);const p=e=>{let{selectedUsers:s,setSelectedUsers:t,editMode:i=!1}=e;const p=(0,u.TL)(),[m,j]=(0,l.useState)([]),[g,b]=(0,l.useState)(!1),[v,f]=(0,l.useState)(""),y=(0,l.useCallback)((()=>{r.h.users.listUsers().then((e=>{let s=n()(e.data,"users",[]);s||(s=[]),j(s.sort(a.LQ)),b(!1)})).catch((e=>{p((0,d.zb)((0,o.g)(e.error))),b(!1)}))}),[p]);(0,l.useEffect)((()=>{b(!0)}),[]),(0,l.useEffect)((()=>{g&&y()}),[g,y]);const S=s||[],C=m.filter((e=>e.accessKey.includes(v)));return(0,h.jsx)(c.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,h.jsxs)(c.xuv,{children:[g&&(0,h.jsx)(c.kod,{}),(null===m||void 0===m?void 0:m.length)>0?(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(c.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,h.jsx)(x.Z,{label:i?"Edit Members":"Assign Users",placeholder:"Filter Users",onChange:f,value:v})}),(0,h.jsx)(c.wQF,{columns:[{label:"Access Key",elementKey:"accessKey"}],onSelect:e=>{const s=e.target,l=s.value,i=s.checked;let n=[...S];return i?n.push(l):n=n.filter((e=>e!==l)),t(n),n},selectedItems:S,isLoading:g,records:C,entityName:"Users",idField:"accessKey",customPaperHeight:"200px"})]}):(0,h.jsx)(c.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Users to display"})]})})}},58400:(e,s,t)=>{t.d(s,{Z:()=>h});var l=t(72791),i=t(29945),n=t(21639),r=t(59114),o=t(87995),c=t(44690),a=t(74616),d=t(78687),u=t(31776),x=t(80184);const h=e=>{let{noTitle:s=!1}=e;const t=(0,c.TL)(),[h,p]=(0,l.useState)([]),[m,j]=(0,l.useState)(!1),[g,b]=(0,l.useState)(""),v=(0,d.v9)((e=>e.createUser.selectedPolicies)),f=(0,l.useCallback)((()=>{j(!0),u.h.policies.listPolicies().then((e=>{var s;const t=null!==(s=e.data.policies)&&void 0!==s?s:[];j(!1),p(t.sort(n.g4))})).catch((e=>{j(!1),t((0,o.zb)(e))}))}),[t]);(0,l.useEffect)((()=>{j(!0)}),[]),(0,l.useEffect)((()=>{m&&f()}),[m,f]);const y=h.filter((e=>e.name.includes(g)));return(0,x.jsxs)(i.rjZ,{item:!0,xs:12,className:"inputItem",children:[m&&(0,x.jsx)(i.kod,{}),h.length>0?(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(i.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,x.jsx)(r.Z,{placeholder:"Start typing to search for a Policy",onChange:e=>{b(e)},value:g,label:s?"":"Assign Policies"})}),(0,x.jsx)(i.wQF,{columns:[{label:"Policy",elementKey:"name"}],onSelect:e=>{const s=e.target,l=s.value,i=s.checked;let n=[...v];i?n.push(l):n=n.filter((e=>e!==l)),n=n.filter((e=>""!==e)),t((0,a.ue)(n))},selectedItems:v,isLoading:m,records:y,entityName:"Policies",idField:"name",customPaperHeight:"200px"})]}):(0,x.jsx)(i.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Policies Available"})]})}},39134:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var l=t(72791),i=t(26181),n=t.n(i),r=t(78687),o=t(29945),c=t(45248),a=t(87995),d=t(44690),u=t(23814),x=t(74616),h=t(56028),p=t(58400),m=t(81207),j=t(80184);const g=e=>{let{closeModalAndRefresh:s,selectedUser:t,selectedGroups:i,open:g}=e;const b=(0,d.TL)(),[v,f]=(0,l.useState)(!1),[y,S]=(0,l.useState)([]),[C,Z]=(0,l.useState)([]),k=(0,r.v9)((e=>e.createUser.selectedPolicies));(0,l.useEffect)((()=>{if(g){if(1===(null===i||void 0===i?void 0:i.length))return void(1===(null===i||void 0===i?void 0:i.length)&&m.Z.invoke("GET","/api/v1/group/".concat((0,c.LL)(i[0]))).then((e=>{const s=n()(e,"policy","");S(s.split(",")),Z(s.split(",")),b((0,x.ue)(s.split(",")))})).catch((e=>{b((0,a.zb)(e)),f(!1)})));const e=n()(t,"policy",[]);S(e),Z(e),b((0,x.ue)(e))}}),[g,null===i||void 0===i?void 0:i.length,t]);const P=n()(t,"accessKey","");return(0,j.jsxs)(h.Z,{onClose:()=>{s()},modalOpen:g,title:"Set Policies",children:[(0,j.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[(1===(null===i||void 0===i?void 0:i.length)||null!=t)&&(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)(o.bSr,{label:"Selected ".concat(null!==i?"Group":"User"),sx:{width:"100%"},children:null!==i?i[0]:P}),(0,j.jsx)(o.bSr,{label:"Current Policy",sx:{width:"100%"},children:y.join(", ")})]}),i&&(null===i||void 0===i?void 0:i.length)>1&&(0,j.jsx)(o.bSr,{label:"Selected Groups",sx:{width:"100%"},children:i.join(", ")}),(0,j.jsx)(o.rjZ,{item:!0,xs:12,children:(0,j.jsx)(p.Z,{selectedPolicy:C})})]}),(0,j.jsxs)(o.rjZ,{item:!0,xs:12,sx:u.ID.modalButtonBar,children:[(0,j.jsx)(o.zxk,{id:"reset",type:"button",variant:"regular",onClick:()=>{Z(y),b((0,x.ue)(y))},label:"Reset"}),(0,j.jsx)(o.zxk,{id:"save",type:"button",variant:"callAction",color:"primary",disabled:v,onClick:()=>{let e=null,l=null;null!==i?l=i:null!==t&&(e=[t.accessKey]||0),f(!0),m.Z.invoke("PUT","/api/v1/set-policy-multi",{name:k,groups:l,users:e}).then((()=>{f(!1),s()})).catch((e=>{f(!1),b((0,a.zb)(e))}))},label:"Save"})]}),v&&(0,j.jsx)(o.rjZ,{item:!0,xs:12,children:(0,j.jsx)(o.kod,{})})]})}},21639:(e,s,t)=>{t.d(s,{KE:()=>r,LQ:()=>l,V2:()=>n,g4:()=>i});const l=(e,s)=>{if(e.accessKey&&s.accessKey){if(e.accessKey>s.accessKey)return 1;if(e.accessKey<s.accessKey)return-1}return 0},i=(e,s)=>e.name>s.name?1:e.name<s.name?-1:0,n=(e,s)=>e>s?1:e<s?-1:0,r=(e,s)=>e.policy>s.policy?1:e.policy<s.policy?-1:0}}]);
//# sourceMappingURL=2074.a60ce6fb.chunk.js.map