"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6526],{76526:function(e,n,t){t.r(n);var i=t(29439),s=t(1413),a=t(72791),l=t(11135),r=t(23814),o=t(25787),c=t(64554),x=t(36151),d=t(23060),p=t(32291),u=t(74794),g=t(38734),m=t(3579),f=t(20165),h=t(12590),j=t(55335),Z=t(21435),b=t(81207),v=t(30403),y=t(90673),k=t(38442),w=t(56087),S=t(60364),C=t(65810),I=t(87995),T=t(25469),F=t(18073),N=t(43896),z=t(19847),L=t(79786),B=t(13438),R=t(80184);n.default=(0,o.Z)((function(e){return(0,l.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({registerActivationIcon:{color:e.palette.primary.main,fontSize:16,fontWeight:"bold",marginBottom:20,"& .min-icon":{width:32.12,height:25,marginRight:10,verticalAlign:"middle"}},registerActivationMode:{textAlign:"right","& a":{cursor:"pointer"}},subnetDescription:{textAlign:"left",Font:"normal normal normal 14px/17px Lato",letterSpacing:0,color:"#000000","& span":{fontWeight:"bold"}},registeredStatus:{border:"1px solid #E2E2E2",padding:"24px 24px 24px 24px",borderRadius:2,marginBottom:25,backgroundColor:"#FBFAFA","& .min-icon":{width:20,height:20,marginLeft:48,marginRight:13,verticalAlign:"middle",marginTop:-3},"& span":{fontWeight:"bold"}},copyInputBox:{"& button":{border:"1px solid #5E5E5E",borderRadius:2}},link:{color:"#2781B0",cursor:"pointer"},sizedLabel:{minWidth:"75px"}},r.OR),r.qg),r.bK),(0,r.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=(0,T.TL)(),s=(0,S.v9)(I.bf),l=(0,a.useState)(""),r=(0,i.Z)(l,2),o=r[0],A=r[1],E=(0,a.useState)(""),_=(0,i.Z)(E,2),O=_[0],P=_[1],W=(0,a.useState)(""),M=(0,i.Z)(W,2),K=M[0],U=M[1],D=(0,a.useState)(""),G=(0,i.Z)(D,2),q=G[0],V=G[1],H=(0,a.useState)(""),J=(0,i.Z)(H,2),Q=J[0],X=J[1],Y=(0,a.useState)(""),$=(0,i.Z)(Y,2),ee=$[0],ne=$[1],te=(0,a.useState)(""),ie=(0,i.Z)(te,2),se=ie[0],ae=ie[1],le=(0,a.useState)(""),re=(0,i.Z)(le,2),oe=re[0],ce=re[1],xe=(0,a.useState)([]),de=(0,i.Z)(xe,2),pe=de[0],ue=de[1],ge=(0,a.useState)(!1),me=(0,i.Z)(ge,2),fe=me[0],he=me[1],je=(0,a.useState)(!1),Ze=(0,i.Z)(je,2),be=Ze[0],ve=Ze[1],ye=(0,a.useState)(!1),ke=(0,i.Z)(ye,2),we=ke[0],Se=ke[1],Ce=(0,a.useState)(!1),Ie=(0,i.Z)(Ce,2),Te=Ie[0],Fe=Ie[1],Ne=(0,a.useState)(),ze=(0,i.Z)(Ne,2),Le=ze[0],Be=ze[1],Re=(0,a.useState)(0),Ae=(0,i.Z)(Re,2),Ee=Ae[0],_e=Ae[1],Oe=(0,a.useState)(!0),Pe=(0,i.Z)(Oe,2),We=Pe[0],Me=Pe[1],Ke=function(){ne(""),ae(""),ce(""),he(!1),ue([]),A(""),P(""),U(""),V(""),X("")},Ue=(0,k.F)(w.C3,w.LC[w.gA.LICENSE],!0),De=(0,a.useCallback)((function(){we||(Ue?(Se(!0),b.Z.invoke("GET","/api/v1/subnet/info").then((function(e){Be(e),Fe(!0),Se(!1)})).catch((function(e){"License not found"!==e.errorMessage&&t((0,I.Ih)(e)),Fe(!1),Se(!1)}))):Se(!1))}),[we,Ue,t]),Ge=function(e,n){var i={token:e,account_id:n};b.Z.invoke("POST","/api/v1/subnet/register",i).then((function(){ve(!1),Ke(),De()})).catch((function(e){t((0,I.Ih)(e)),ve(!1)}))},qe=function(){if(!be){ve(!0);var e={username:K,password:O,apiKey:o};b.Z.invoke("POST","/api/v1/subnet/login",e).then((function(e){ve(!1),e&&e.registered?(Ke(),De()):e&&e.mfa_token?V(e.mfa_token):e&&e.access_token&&e.organizations.length>0&&(ne(e.access_token),ue(e.organizations),ae(e.organizations[0].accountId.toString()))})).catch((function(e){t((0,I.Ih)(e)),ve(!1),Ke()}))}};(0,a.useEffect)((function(){We&&(De(),Me(!1))}),[De,We,Me]);var Ve=(0,R.jsx)(a.Fragment,{});Ve=ee&&pe.length>0?(0,R.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,R.jsxs)(c.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,R.jsx)(c.Z,{sx:{marginTop:"15px",marginBottom:"15px","& .title-text":{marginLeft:"0px"}},children:(0,R.jsx)(L.vw,{title:"Register MinIO cluster"})}),(0,R.jsxs)(c.Z,{children:[(0,R.jsx)(y.Z,{id:"subnet-organization",name:"subnet-organization",onChange:function(e){return ae(e.target.value)},label:"Select an organization",value:se,options:pe.map((function(e){return{label:e.company,value:e.accountId.toString()}}))}),(0,R.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:"15px"},children:(0,R.jsx)(x.Z,{className:n.button,color:"primary",onClick:function(){be||(ve(!0),ee&&se&&Ge(ee,se))},disabled:be||0===ee.trim().length,variant:"contained",children:"Register"})})]})]}),(0,R.jsx)(C.Z,{})]}):q?(0,R.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,R.jsxs)(c.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,R.jsx)(c.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"30px",marginBottom:"30px"},children:"Two-Factor Authentication"}),(0,R.jsx)(c.Z,{children:"Please enter the 6-digit verification code that was sent to your email address. This code will be valid for 5 minutes."}),(0,R.jsx)(c.Z,{sx:{flex:"1",marginTop:"30px"},children:(0,R.jsx)(Z.Z,{overlayIcon:(0,R.jsx)(v.Z,{}),id:"subnet-otp",name:"subnet-otp",onChange:function(e){return X(e.target.value)},placeholder:"",label:"",value:Q})}),(0,R.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,R.jsx)(x.Z,{color:"primary",onClick:function(){return function(){if(!be){ve(!0);var e={username:K,otp:Q,mfa_token:q};b.Z.invoke("POST","/api/v1/subnet/login/mfa",e).then((function(e){ve(!1),e&&e.access_token&&e.organizations.length>0&&(1===e.organizations.length?Ge(e.access_token,e.organizations[0].accountId.toString()):(ne(e.access_token),ue(e.organizations),ae(e.organizations[0].accountId.toString())))})).catch((function(e){t((0,I.Ih)(e)),ve(!1),X("")}))}}()},disabled:be||0===Q.trim().length||0===q.trim().length,variant:"contained",children:"Verify"})})]}),(0,R.jsx)(C.Z,{})]}):(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(c.Z,{sx:{"& .title-text":{marginLeft:"27px",fontWeight:600}},children:(0,R.jsx)(L.vw,{icon:(0,R.jsx)(h.Z,{}),title:"Online activation of MinIO Subscription Network License"})}),(0,R.jsxs)(c.Z,{sx:{display:"flex",flexFlow:{xs:"column",md:"row"}},children:[(0,R.jsxs)(c.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,R.jsx)(c.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"30px",marginBottom:"30px"},children:"Use your MinIO Subscription Network login credentials to register this cluster."}),(0,R.jsxs)(c.Z,{sx:{flex:"1"},children:[(0,R.jsx)(Z.Z,{className:n.spacerBottom,classes:{inputLabel:n.sizedLabel},id:"subnet-email",name:"subnet-email",onChange:function(e){return U(e.target.value)},label:"Email",value:K,overlayIcon:(0,R.jsx)(g.oyc,{})}),(0,R.jsx)(Z.Z,{className:n.spacerBottom,classes:{inputLabel:n.sizedLabel},id:"subnet-password",name:"subnet-password",onChange:function(e){return P(e.target.value)},label:"Password",type:fe?"text":"password",value:O,overlayIcon:fe?(0,R.jsx)(f.Z,{}):(0,R.jsx)(m.Z,{}),overlayAction:function(){return he(!fe)}}),(0,R.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,R.jsx)(x.Z,{type:"submit",className:n.spacerRight,variant:"outlined",onClick:function(e){e.preventDefault(),window.open("https://min.io/signup?ref=".concat(s?"op":"con"),"_blank")},children:"Sign up"}),(0,R.jsx)(x.Z,{type:"submit",variant:"contained",color:"primary",disabled:be||0===K.trim().length||0===O.trim().length,onClick:function(){return qe()},children:"Register"})]})]})]}),(0,R.jsx)(C.Z,{})]})]});var He=(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(c.Z,{sx:{border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"43px"},children:Te&&Le?(0,R.jsx)(L.xr,{email:Le.email,linkClass:n.link}):(0,R.jsx)(B.Z,{afterRegister:De,registerEndpoint:"/api/v1/subnet/login"})}),(0,R.jsx)(L.B4,{linkClass:n.link})]}),Je=(0,R.jsx)(a.Fragment,{children:(0,R.jsxs)(c.Z,{sx:{border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"43px"},children:[Te&&Le?(0,R.jsx)(L.xr,{email:Le.email,linkClass:n.link}):null,(0,R.jsx)(c.Z,{sx:{"& .title-text":{marginLeft:"27px",fontWeight:600}},children:(0,R.jsx)(L.vw,{icon:(0,R.jsx)(j.Z,{}),title:"Register cluster in an Airgap environment"})}),(0,R.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,R.jsxs)(c.Z,{sx:{display:"flex",flexFlow:"column",flex:"2",marginTop:"15px","& .step-number":{color:"#ffffff",height:"25px",width:"25px",background:"#081C42",marginRight:"10px",textAlign:"center",fontWeight:600,borderRadius:"50%"},"& .step-row":{fontSize:"16px",display:"flex",marginTop:"15px",marginBottom:"15px"}},children:[(0,R.jsxs)(c.Z,{children:[(0,R.jsxs)(c.Z,{className:"step-row",children:[(0,R.jsx)("div",{className:"step-number",children:"1"})," ",(0,R.jsx)("div",{className:"step-text",children:"Copy the following registration token"})]}),(0,R.jsx)(c.Z,{sx:{flex:"1",marginTop:"15px",marginLeft:"35px","& input":{color:"#737373"}},children:(0,R.jsx)(Z.Z,{id:"registration-token",name:"registration-token",placeholder:"",label:"",type:"text",onChange:function(){},value:oe,overlayIcon:(0,R.jsx)(g.TIy,{}),extraInputProps:{readOnly:!0},overlayAction:function(){return navigator.clipboard.writeText(oe)}})})]}),(0,R.jsxs)(c.Z,{children:[(0,R.jsxs)(c.Z,{className:"step-row",children:[(0,R.jsx)("div",{className:"step-number",children:"2"}),(0,R.jsx)("div",{className:"step-text",children:"Navigate to SUBNET and register your cluster"})]}),(0,R.jsx)(c.Z,{sx:{flex:"1",marginLeft:"35px"},children:(0,R.jsx)(d.Z,{className:n.link,color:"inherit",href:"https://subnet.min.io/cluster/register",target:"_blank",children:"https://subnet.min.io/cluster/register"})})]}),(0,R.jsxs)(c.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"15px",marginBottom:"15px"},children:[(0,R.jsxs)(c.Z,{className:"step-row",children:[(0,R.jsx)("div",{className:"step-number",children:"3"})," ",(0,R.jsx)("div",{className:"step-text",children:"Enter the API key generated by SUBNET"})]}),(0,R.jsx)(c.Z,{sx:{flex:"1",marginTop:"15px",marginLeft:"35px"},children:(0,R.jsx)(Z.Z,{value:o,onChange:function(e){return A(e.target.value)},id:"api-key",name:"api-key",placeholder:"",label:"",type:"text"})})]}),(0,R.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:"15px"},children:(0,R.jsx)(x.Z,{variant:"contained",color:"primary",onClick:function(){return qe()},disabled:be||0===o.trim().length,children:"Register"})})]}),(0,R.jsx)(C.Z,{})]})]})}),Qe=(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(c.Z,{sx:{border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"43px"},children:Te&&Le?(0,R.jsx)(L.xr,{email:Le.email,linkClass:n.link}):Ve}),!Te&&(0,R.jsx)(L.B4,{linkClass:n.link})]}),Xe=we?(0,R.jsx)("div",{children:"Loading.."}):Qe;return(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(p.Z,{label:"Register to MinIO Subscription Network",actions:(0,R.jsx)(a.Fragment,{})}),(0,R.jsxs)(u.Z,{children:[(0,R.jsxs)(F.Z,{value:Ee,onChange:function(e,n){_e(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[(0,R.jsx)(N.Z,{label:"Credentials",id:"simple-tab-0","aria-controls":"simple-tabpanel-0"}),(0,R.jsx)(N.Z,{label:"API Key",id:"simple-tab-1","aria-controls":"simple-tabpanel-1"}),(0,R.jsx)(N.Z,{label:"Airgap",id:"simple-tab-2","aria-controls":"simple-tabpanel-2",onClick:function(){be||oe||(ve(!0),b.Z.invoke("GET","/api/v1/subnet/registration-token").then((function(e){ve(!1),e&&e.regToken&&ce(e.regToken)})).catch((function(e){console.error(e),t((0,I.Ih)(e)),ve(!1)})))}})]}),(0,R.jsx)(z.x,{index:0,value:Ee,children:Xe}),(0,R.jsx)(z.x,{index:1,value:Ee,children:He}),(0,R.jsx)(z.x,{index:2,value:Ee,children:Je})]})]})}))}}]);
//# sourceMappingURL=6526.56cb8ed2.chunk.js.map