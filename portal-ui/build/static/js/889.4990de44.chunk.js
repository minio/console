"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,a,t){t.r(a);var l=t(29439),n=t(1413),i=t(72791),s=t(75952),r=t(11135),c=t(25787),o=t(26181),d=t.n(o),u=t(61889),m=t(23814),h=t(21435),x=t(56028),g=t(81207),f=t(90673),Z=t(37516),p=t(45248),v=t(17420),j=t(56578),b=t(87995),S=t(25469),y=t(80184);a.default=(0,c.Z)((function(e){return(0,r.Z)((0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({multiContainer:{display:"flex",alignItems:"center"}},m.bK),m.QV),m.DF),m.ID),{},{modalFormScrollable:(0,n.Z)((0,n.Z)({},m.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var a=e.open,t=e.closeModalAndRefresh,n=e.classes,r=e.bucketName,c=e.setReplicationRules,o=(0,S.TL)(),m=(0,i.useState)(!1),C=(0,l.Z)(m,2),k=C[0],R=C[1],N=(0,i.useState)("1"),P=(0,l.Z)(N,2),w=P[0],F=P[1],D=(0,i.useState)(""),T=(0,l.Z)(D,2),M=T[0],K=T[1],B=(0,i.useState)(""),L=(0,l.Z)(B,2),_=L[0],A=L[1],I=(0,i.useState)(""),U=(0,l.Z)(I,2),z=U[0],E=U[1],O=(0,i.useState)(""),G=(0,l.Z)(O,2),V=G[0],Q=G[1],q=(0,i.useState)(""),H=(0,l.Z)(q,2),Y=H[0],J=H[1],W=(0,i.useState)(""),X=(0,l.Z)(W,2),$=X[0],ee=X[1],ae=(0,i.useState)(""),te=(0,l.Z)(ae,2),le=te[0],ne=te[1],ie=(0,i.useState)(!0),se=(0,l.Z)(ie,2),re=se[0],ce=se[1],oe=(0,i.useState)(!0),de=(0,l.Z)(oe,2),ue=de[0],me=de[1],he=(0,i.useState)(!0),xe=(0,l.Z)(he,2),ge=xe[0],fe=xe[1],Ze=(0,i.useState)(!0),pe=(0,l.Z)(Ze,2),ve=pe[0],je=pe[1],be=(0,i.useState)(""),Se=(0,l.Z)(be,2),ye=Se[0],Ce=Se[1],ke=(0,i.useState)("async"),Re=(0,l.Z)(ke,2),Ne=Re[0],Pe=Re[1],we=(0,i.useState)("100"),Fe=(0,l.Z)(we,2),De=Fe[0],Te=Fe[1],Me=(0,i.useState)("Gi"),Ke=(0,l.Z)(Me,2),Be=Ke[0],Le=Ke[1],_e=(0,i.useState)("60"),Ae=(0,l.Z)(_e,2),Ie=Ae[0],Ue=Ae[1];(0,i.useEffect)((function(){if(0!==c.length){var e=c.reduce((function(e,a){return a.priority>e?a.priority:e}),0);F((e+1).toString())}else F("1")}),[c]);return(0,y.jsx)(x.Z,{modalOpen:a,onClose:function(){t()},title:"Set Bucket Replication",titleIcon:(0,y.jsx)(s.xRg,{}),children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),R(!0),function(){var e=[{originBucket:r,destinationBucket:$}],a=parseInt(Ie),l="".concat(re?"https://":"http://").concat(z),n={accessKey:M,secretKey:_,targetURL:l,region:le,bucketsRelation:e,syncMode:Ne,bandwidth:"async"===Ne?parseInt((0,p.Pw)(De,Be,!0)):0,healthCheckPeriod:a,prefix:Y,tags:ye,replicateDeleteMarkers:ue,replicateDeletes:ge,priority:parseInt(w),storageClass:V,replicateMetadata:ve};g.Z.invoke("POST","/api/v1/buckets-replication",n).then((function(e){R(!1);var a=d()(e,"replicationState",[]);if(a.length>0){var l=a[0];return R(!1),l.errorString&&""!==l.errorString?void o((0,b.zb)({errorMessage:l.errorString,detailedError:""})):void t()}o((0,b.zb)({errorMessage:"No changes applied",detailedError:""}))})).catch((function(e){R(!1),o((0,b.zb)(e))}))}()},children:(0,y.jsxs)(u.ZP,{container:!0,children:[(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&F(e.target.value)},label:"Priority",value:w,pattern:"[0-9]*"})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"targetURL",name:"targetURL",onChange:function(e){E(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:z})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(Z.Z,{checked:re,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){ce(e.target.checked)},value:"yes"})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"accessKey",name:"accessKey",onChange:function(e){K(e.target.value)},label:"Access Key",value:M})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"secretKey",name:"secretKey",onChange:function(e){A(e.target.value)},label:"Secret Key",value:_})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){ee(e.target.value)},label:"Target Bucket",value:$})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"region",name:"region",onChange:function(e){ne(e.target.value)},label:"Region",value:le})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(f.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){Pe(e.target.value)},label:"Replication Mode",value:Ne,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Ne&&(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)("div",{className:n.multiContainer,children:(0,y.jsx)(h.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&Te(e.target.value)},label:"Bandwidth",value:De,min:"0",pattern:"[0-9]*",overlayObject:(0,y.jsx)(j.Z,{id:"quota_unit",onUnitChange:function(e){Le(e)},unitSelected:Be,unitsList:(0,p.zQ)(["Ki"]),disabled:!1})})})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ue(e.target.value)},label:"Health Check Duration",value:Ie})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(n.spacerTop," ").concat(n.formFieldRow),children:(0,y.jsx)(h.Z,{id:"storageClass",name:"storageClass",onChange:function(e){Q(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:V})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,y.jsx)("legend",{className:n.descriptionText,children:"Object Filters"}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(h.Z,{id:"prefix",name:"prefix",onChange:function(e){J(e.target.value)},placeholder:"prefix",label:"Prefix",value:Y})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(v.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){Ce(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,y.jsx)("legend",{className:n.descriptionText,children:"Replication Options"}),(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:[(0,y.jsx)(Z.Z,{checked:ve,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){je(e.target.checked)},value:ve,description:"Metadata Sync"}),(0,y.jsx)(Z.Z,{checked:ue,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){me(e.target.checked)},value:ue,description:"Replicate soft deletes"})]}),(0,y.jsx)(u.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,y.jsx)(Z.Z,{checked:ge,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){fe(e.target.checked)},value:ge,description:"Replicate versioned deletes"})})]})})]}),(0,y.jsxs)(u.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,y.jsx)(s.zxk,{id:"cancel",type:"button",variant:"regular",disabled:k,onClick:function(){t()},label:"Cancel"}),(0,y.jsx)(s.zxk,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:k,label:"Save"})]})]})})})}))}}]);
//# sourceMappingURL=889.4990de44.chunk.js.map