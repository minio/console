"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9918],{79918:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var s=t(29439),i=t(1413),l=t(72791),o=t(78687),a=t(57689),r=t(11135),c=t(25787),u=t(61889),d=t(64554),f=t(26181),x=t.n(f),h=t(23814),p=t(81207),Z=t(56087),m=t(38442),T=t(75578),j=t(45902),_=t(84861),S=t(75952),E=t(45987),v=t(36151),g=t(80184),b=["isLoading","onClick","label"],C=function(e){var n=e.isLoading,t=e.onClick,s=e.label,l=(0,E.Z)(e,b);return(0,g.jsx)(v.Z,(0,i.Z)((0,i.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},l),{},{children:n?(0,g.jsx)(S.aNw,{style:{width:16,height:16}}):s}))},N=t(13400),I=["disabled","onClick"],y=(0,c.Z)((function(e){return(0,r.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,s=(0,E.Z)(e,I);return(0,g.jsx)(N.Z,(0,i.Z)((0,i.Z)({size:"small",disabled:n,onClick:t},s),{},{children:(0,g.jsx)(S.dY8,{})}))})),O=function(e){var n=e.resourceName,t=e.iamScopes,s=e.secureCmpProps,l=void 0===s?{}:s,o=e.children;return(0,g.jsx)(m.s,(0,i.Z)((0,i.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},l),{},{children:o}))},k=function(e){var n=e.isLoading,t=void 0===n||n,s=e.resourceName,i=void 0===s?"":s,l=e.iamScopes,o=e.secureCmpProps,a=void 0===o?{}:o,r=e.property,c=void 0===r?null:r,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,g.jsx)(j.Z,{label:c,value:(0,g.jsx)(O,{resourceName:i,iamScopes:l,secureCmpProps:a,children:(0,g.jsx)(C,{isLoading:t,onClick:x,label:f})})}),(0,g.jsx)(O,{resourceName:i,iamScopes:l,secureCmpProps:a,children:(0,g.jsx)(y,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},F=t(45248),G=function(e){var n=e.bucketSize;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(S.Mhr,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,g.jsx)("label",{children:(0,F.ae)(n)})]})]})},A=function(e){var n=e.quota;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(S.sjJ,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===n||void 0===n?void 0:n.type," Quota"]}),(0,g.jsxs)("label",{children:[" ",(0,F.ae)("".concat(null===n||void 0===n?void 0:n.quota),!0)]})]})]})},U=t(50896),P=t(87995),R=t(9859),L=t(25469),B=(0,T.Z)(l.lazy((function(){return Promise.all([t.e(7266),t.e(9682)]).then(t.bind(t,33690))}))),w=(0,T.Z)(l.lazy((function(){return t.e(1604).then(t.bind(t,1604))}))),K=(0,T.Z)(l.lazy((function(){return t.e(9952).then(t.bind(t,99952))}))),z=(0,T.Z)(l.lazy((function(){return t.e(402).then(t.bind(t,70402))}))),M=(0,T.Z)(l.lazy((function(){return Promise.all([t.e(1918),t.e(1705)]).then(t.bind(t,71705))}))),D=(0,T.Z)(l.lazy((function(){return t.e(1581).then(t.bind(t,1581))}))),V={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},Y=(0,c.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)({},h.bK),h.VI))}))((function(e){var n=e.classes,t=(0,L.TL)(),r=(0,a.UO)(),c=(0,o.v9)(R.HQ),f=(0,o.v9)(R.G6),h=(0,o.v9)(P.N5),T=(0,l.useState)(null),E=(0,s.Z)(T,2),v=E[0],b=E[1],C=(0,l.useState)("0"),N=(0,s.Z)(C,2),I=N[0],y=N[1],O=(0,l.useState)(!1),F=(0,s.Z)(O,2),Y=F[0],Q=F[1],q=(0,l.useState)(!1),J=(0,s.Z)(q,2),W=J[0],H=J[1],X=(0,l.useState)(!1),$=(0,s.Z)(X,2),ee=$[0],ne=$[1],te=(0,l.useState)(!0),se=(0,s.Z)(te,2),ie=se[0],le=se[1],oe=(0,l.useState)(!0),ae=(0,s.Z)(oe,2),re=ae[0],ce=ae[1],ue=(0,l.useState)(!0),de=(0,s.Z)(ue,2),fe=de[0],xe=de[1],he=(0,l.useState)(!0),pe=(0,s.Z)(he,2),Ze=pe[0],me=pe[1],Te=(0,l.useState)(!0),je=(0,s.Z)(Te,2),_e=je[0],Se=je[1],Ee=(0,l.useState)(!0),ve=(0,s.Z)(Ee,2),ge=ve[0],be=ve[1],Ce=(0,l.useState)(!0),Ne=(0,s.Z)(Ce,2),Ie=Ne[0],ye=Ne[1],Oe=(0,l.useState)(!0),ke=(0,s.Z)(Oe,2),Fe=ke[0],Ge=ke[1],Ae=(0,l.useState)(!1),Ue=(0,s.Z)(Ae,2),Pe=Ue[0],Re=Ue[1],Le=(0,l.useState)(!1),Be=(0,s.Z)(Le,2),we=Be[0],Ke=Be[1],ze=(0,l.useState)(null),Me=(0,s.Z)(ze,2),De=Me[0],Ve=Me[1],Ye=(0,l.useState)(!1),Qe=(0,s.Z)(Ye,2),qe=Qe[0],Je=Qe[1],We=(0,l.useState)(!1),He=(0,s.Z)(We,2),Xe=He[0],$e=He[1],en=(0,l.useState)(null),nn=(0,s.Z)(en,2),tn=nn[0],sn=nn[1],ln=(0,l.useState)(!1),on=(0,s.Z)(ln,2),an=on[0],rn=on[1],cn=(0,l.useState)(!1),un=(0,s.Z)(cn,2),dn=un[0],fn=un[1],xn=(0,l.useState)(!1),hn=(0,s.Z)(xn,2),pn=hn[0],Zn=hn[1],mn=(0,l.useState)(!1),Tn=(0,s.Z)(mn,2),jn=Tn[0],_n=Tn[1],Sn=r.bucketName||"",En="n/a",vn="";null!==f&&(En=f.access,vn=f.definition);var gn=(0,m.F)(Sn,[Z.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION,Z.Ft.S3_GET_ACTIONS]),bn=(0,m.F)(Sn,[Z.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,Z.Ft.S3_GET_ACTIONS]),Cn=(0,m.F)(Sn,[Z.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,l.useEffect)((function(){xe(!!c)}),[c,xe]),(0,l.useEffect)((function(){Ze&&(bn?p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/encryption/info")).then((function(e){e.algorithm&&(Je(!0),b(e)),me(!1)})).catch((function(e){"The server side encryption configuration was not found"===e.errorMessage&&(Je(!1),b(null)),me(!1)})):(Je(!1),b(null),me(!1)))}),[Ze,Sn,bn]),(0,l.useEffect)((function(){_e&&h&&p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/versioning")).then((function(e){Re(e.is_versioned),Se(!1)})).catch((function(e){t((0,P.Ih)(e)),Se(!1)}))}),[_e,t,Sn,h]),(0,l.useEffect)((function(){ge&&h&&(Cn?p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/quota")).then((function(e){Ve(e),e.quota?Ke(!0):Ke(!1),be(!1)})).catch((function(e){t((0,P.Ih)(e)),Ke(!1),be(!1)})):(Ke(!1),be(!1)))}),[ge,Se,t,Sn,h,Cn]),(0,l.useEffect)((function(){_e&&h&&(gn?p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/object-locking")).then((function(e){Q(e.object_locking_enabled),le(!1)})).catch((function(e){t((0,P.Ih)(e)),le(!1)})):le(!1))}),[ie,t,Sn,_e,h,gn]),(0,l.useEffect)((function(){re&&p.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===Sn})),t=x()(n,"size","0");ce(!1),y(t)})).catch((function(e){ce(!1),t((0,P.Ih)(e))}))}),[re,t,Sn]),(0,l.useEffect)((function(){Ie&&h&&p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/replication")).then((function(e){var n=e.rules?e.rules:[];ne(n.length>0),ye(!1)})).catch((function(e){t((0,P.Ih)(e)),ye(!1)}))}),[Ie,t,Sn,h]),(0,l.useEffect)((function(){Fe&&Y&&p.Z.invoke("GET","/api/v1/buckets/".concat(Sn,"/retention")).then((function(e){Ge(!1),$e(!0),sn(e)})).catch((function(e){$e(!1),Ge(!1),sn(null)}))}),[Fe,Y,Sn]);var Nn=function(){t((0,R.d5)(!0)),xe(!0),ce(!0),Se(!0),me(!0),Ge(!0)};return(0,g.jsxs)(l.Fragment,{children:[dn&&(0,g.jsx)(K,{open:dn,selectedBucket:Sn,encryptionEnabled:qe,encryptionCfg:v,closeModalAndRefresh:function(){fn(!1),me(!0)}}),pn&&(0,g.jsx)(D,{open:pn,selectedBucket:Sn,enabled:we,cfg:De,closeModalAndRefresh:function(){Zn(!1),be(!0)}}),W&&(0,g.jsx)(B,{bucketName:Sn,open:W,actualPolicy:En,actualDefinition:vn,closeModalAndRefresh:function(){H(!1),Nn()}}),an&&(0,g.jsx)(w,{bucketName:Sn,open:an,closeModalAndRefresh:function(){rn(!1),Nn()}}),jn&&(0,g.jsx)(z,{closeVersioningModalAndRefresh:function(e){_n(!1),e&&Nn()},modalOpen:jn,selectedBucket:Sn,versioningCurrentState:Pe}),(0,g.jsx)(U.Z,{children:"Summary"}),(0,g.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsxs)(d.Z,{sx:(0,i.Z)({},V),children:[(0,g.jsxs)(d.Z,{sx:(0,i.Z)({},V),children:[(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsx)(k,{iamScopes:[Z.Ft.S3_PUT_BUCKET_POLICY,Z.Ft.S3_PUT_ACTIONS],resourceName:Sn,property:"Access Policy:",value:En.toLowerCase(),onEdit:function(){H(!0)},isLoading:fe})}),(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsx)(k,{iamScopes:[Z.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,Z.Ft.S3_PUT_ACTIONS],resourceName:Sn,property:"Encryption:",value:qe?"Enabled":"Disabled",onEdit:function(){fn(!0)},isLoading:Ze})}),(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_REPLICATION_CONFIGURATION,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsx)(j.Z,{label:"Replication:",value:(0,g.jsx)(_.Z,{icon:ee?(0,g.jsx)(S.E31,{}):(0,g.jsx)(S.dRf,{}),label:(0,g.jsx)("label",{className:n.textMuted,children:ee?"Enabled":"Disabled"})})})}),(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsx)(j.Z,{label:"Object Locking:",value:(0,g.jsx)(_.Z,{icon:Y?(0,g.jsx)(S.E31,{}):(0,g.jsx)(S.dRf,{}),label:(0,g.jsx)("label",{className:n.textMuted,children:Y?"Enabled":"Disabled"})})})}),(0,g.jsx)(d.Z,{className:n.spacerTop,children:(0,g.jsx)(j.Z,{label:"Tags:",value:(0,g.jsx)(M,{bucketName:Sn})})}),(0,g.jsx)(k,{iamScopes:[Z.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Sn,property:"Quota:",value:we?"Enabled":"Disabled",onEdit:function(){Zn(!0)},isLoading:ge})]}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:[(0,g.jsx)(G,{bucketSize:I}),we&&De?(0,g.jsx)(A,{quota:De}):null]})]})})}),h&&(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_VERSIONING,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(U.Z,{children:"Versioning"}),(0,g.jsx)(d.Z,{sx:(0,i.Z)({},V),children:(0,g.jsx)(d.Z,{sx:(0,i.Z)({},V),children:(0,g.jsx)(k,{iamScopes:[Z.Ft.S3_PUT_BUCKET_VERSIONING,Z.Ft.S3_PUT_ACTIONS],resourceName:Sn,property:"Current Status:",value:Pe?"Versioned":"Unversioned (Default)",onEdit:function(){_n(!0)},isLoading:_e})})})]})}),Y&&(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_OBJECT_RETENTION,Z.Ft.S3_GET_ACTIONS],resource:Sn,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(U.Z,{children:"Retention"}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsx)(k,{iamScopes:[Z.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Sn,property:"Retention:",value:Xe?"Enabled":"Disabled",onEdit:function(){rn(!0)},isLoading:Fe}),(0,g.jsx)(j.Z,{label:"Mode:",value:(0,g.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:tn&&tn.mode?tn.mode:"-"})}),(0,g.jsx)(j.Z,{label:"Validity:",value:(0,g.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[tn&&tn.validity," ",tn&&(1===tn.validity?tn.unit.slice(0,-1):tn.unit)]})})]}),(0,g.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},84861:function(e,n,t){t(72791);var s=t(64554),i=t(80184);n.Z=function(e){var n=e.icon,t=void 0===n?null:n,l=e.label,o=void 0===l?null:l;return(0,i.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,i.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,i.jsx)("div",{style:{marginLeft:t?5:"none"},children:o})]})}},45902:function(e,n,t){var s=t(1413),i=(t(72791),t(53767)),l=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,a=void 0===o?"-":o,r=e.orientation,c=void 0===r?"column":r,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,h=e.valProps,p=void 0===h?{}:h;return(0,l.jsxs)(i.Z,(0,s.Z)((0,s.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,l.jsx)("label",(0,s.Z)((0,s.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,l.jsx)("label",(0,s.Z)((0,s.Z)({style:{marginRight:5,fontWeight:500}},p),{},{children:a}))]}))}}}]);
//# sourceMappingURL=9918.f3a86123.chunk.js.map