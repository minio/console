"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1581],{1581:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(72791),o=a(29945),l=a(45248),r=a(23814),i=a(56028),u=a(84741),s=a(87995),d=a(44690),c=a(31776),b=a(82342),h=a(80184);const x=e=>{let{open:t,enabled:a,cfg:x,selectedBucket:p,closeModalAndRefresh:g}=e;const k=(0,d.TL)(),[j,m]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[C,S]=(0,n.useState)("1"),[q,B]=(0,n.useState)("Ti"),[_,z]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(a&&(v(!0),x)){const e=(0,l.Am)(x.quota||0,!0,!1,!0);S(e.total.toString()),B(e.unit),z(!0)}}),[a,x]),(0,n.useEffect)((()=>{z(!f||/^\d*(?:\.\d{1,2})?$/.test(C))}),[f,C]);return(0,h.jsx)(i.Z,{modalOpen:t,onClose:()=>{g()},title:"Enable Bucket Quota",titleIcon:(0,h.jsx)(o.Wqw,{}),children:(0,h.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),!j&&_&&c.h.buckets.setBucketQuota(p,{enabled:f,amount:parseInt((0,l.Pw)(C,q,!0)),quota_type:"hard"}).then((()=>{m(!1),g()})).catch((e=>{m(!1),k((0,s.zb)((0,b.g)(e.error)))}))},children:(0,h.jsxs)(o.ltY,{withBorders:!1,containerPadding:!1,children:[(0,h.jsx)(o.rsf,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:f,onChange:e=>{v(e.target.checked)},label:"Enabled"}),f&&(0,h.jsx)(o.Wzg,{id:"quota_size",name:"quota_size",onChange:e=>{S(e.target.value),e.target.validity.valid?z(!0):z(!1)},label:"Quota",value:C,required:!0,min:"1",overlayObject:(0,h.jsx)(u.Z,{id:"quota_unit",onUnitChange:e=>{B(e)},unitSelected:q,unitsList:(0,l.zQ)(["Ki"]),disabled:!1}),error:_?"":"Please enter a valid quota"}),(0,h.jsxs)(o.rjZ,{item:!0,xs:12,sx:r.ID.modalButtonBar,children:[(0,h.jsx)(o.zxk,{id:"cancel",type:"button",variant:"regular",disabled:j,onClick:()=>{g()},label:"Cancel"}),(0,h.jsx)(o.zxk,{id:"save",type:"submit",variant:"callAction",disabled:j||!_,label:"Save"})]}),j&&(0,h.jsx)(o.rjZ,{item:!0,xs:12,children:(0,h.jsx)(o.kod,{})})]})})})}},84741:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(72791),o=a(29945),l=a(16444),r=a(26181),i=a.n(r),u=a(80184);const s=l.ZP.button((e=>{let{theme:t}=e;return{border:"1px solid ".concat(i()(t,"borderColor","#E2E2E2")),borderRadius:3,color:i()(t,"secondaryText","#5B5C5C"),backgroundColor:i()(t,"boxBackground","#FBFAFA"),fontSize:12}})),d=e=>{let{id:t,unitSelected:a,unitsList:l,disabled:r=!1,onUnitChange:i}=e;const[d,c]=n.useState(null),b=Boolean(d),h=e=>{c(null),""!==e&&i&&i(e)};return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(s,{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":b?"true":void 0,onClick:e=>{c(e.currentTarget)},disabled:r,type:"button",children:a}),(0,u.jsx)(o.udT,{id:"upload-main-menu",options:l,selectedOption:"",onSelect:e=>h(e),hideTriggerAction:()=>{h("")},open:b,anchorEl:d,anchorOrigin:"end"})]})}}}]);
//# sourceMappingURL=1581.74c2c762.chunk.js.map