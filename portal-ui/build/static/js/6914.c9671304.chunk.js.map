{"version":3,"file":"static/js/6914.c9671304.chunk.js","mappings":"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","sources":["screens/LoginPage/LoginCallback.tsx","../node_modules/@mui/icons-material/ErrorOutline.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, useState } from \"react\"; // eslint-disable-line @typescript-eslint/no-unused-vars\nimport api from \"../../common/api\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport history, { baseUrl } from \"../../history\";\nimport { Paper } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    paper: {\n      borderRadius: 8,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      width: 800,\n      height: 424,\n      margin: \"auto\",\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      marginLeft: -400,\n      marginTop: -212,\n      \"&.MuiPaper-root\": {\n        borderRadius: 8,\n      },\n    },\n    submit: {\n      margin: \"30px 0px 16px\",\n      height: 40,\n      boxShadow: \"none\",\n      padding: \"16px 30px\",\n    },\n    mainContainer: {\n      position: \"relative\",\n      height: 424,\n    },\n    theOcean: {\n      borderTopLeftRadius: 8,\n      borderBottomLeftRadius: 8,\n      background:\n        \"transparent linear-gradient(to bottom, #073052 0%,#05122b 100%); 0% 0% no-repeat padding-box;\",\n    },\n    oceanBg: {\n      backgroundImage: \"url(/images/BG_Illustration.svg)\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition: \"bottom left\",\n      height: \"100%\",\n      width: 324,\n    },\n    theLogin: {\n      padding: \"40px 45px 20px 45px\",\n    },\n    extraDetailsContainer: {\n      fontStyle: \"italic\",\n      color: \"#9C9C9C\",\n      transition: \"all .2s ease-in-out\",\n      padding: \"0 5px\",\n      marginTop: 5,\n      overflow: \"auto\",\n    },\n    errorLabel: {\n      color: \"#000\",\n      fontSize: 18,\n      fontWeight: 500,\n      marginLeft: 5,\n    },\n    simpleError: {\n      marginTop: 5,\n      padding: \"2px 5px\",\n      fontSize: 16,\n      color: \"#000\",\n    },\n    messageIcon: {\n      color: \"#C72C48\",\n      display: \"flex\",\n      \"& svg\": {\n        width: 32,\n        height: 32,\n      },\n    },\n    errorTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  });\n\ninterface ILoginCallBackProps {\n  classes: any;\n}\n\nconst LoginCallback = ({ classes }: ILoginCallBackProps) => {\n  const [error, setError] = useState<string>(\"\");\n  const [errorDescription, setErrorDescription] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    if (loading) {\n      const queryString = window.location.search;\n      const urlParams = new URLSearchParams(queryString);\n      const code = urlParams.get(\"code\");\n      const state = urlParams.get(\"state\");\n      const error = urlParams.get(\"error\");\n      const errorDescription = urlParams.get(\"errorDescription\");\n      if (error || errorDescription) {\n        setError(error || \"\");\n        setErrorDescription(errorDescription || \"\");\n        setLoading(false);\n      } else {\n        api\n          .invoke(\"POST\", \"/api/v1/login/oauth2/auth\", { code, state })\n          .then(() => {\n            // We push to history the new URL.\n            let targetPath = \"/\";\n            if (\n              localStorage.getItem(\"redirect-path\") &&\n              localStorage.getItem(\"redirect-path\") !== \"\"\n            ) {\n              targetPath = `${localStorage.getItem(\"redirect-path\")}`;\n              localStorage.setItem(\"redirect-path\", \"\");\n            }\n            setLoading(false);\n            history.push(targetPath);\n          })\n          .catch((error) => {\n            setError(error.errorMessage);\n            setErrorDescription(error.detailedError);\n            setLoading(false);\n          });\n      }\n    }\n  }, [loading]);\n  return error !== \"\" || errorDescription !== \"\" ? (\n    <React.Fragment>\n      <Paper className={classes.paper}>\n        <Grid container className={classes.mainContainer}>\n          <Grid item xs={7} className={classes.theOcean}>\n            <div className={classes.oceanBg} />\n          </Grid>\n          <Grid item xs={5} className={classes.theLogin}>\n            <div className={classes.errorTitle}>\n              <span className={classes.messageIcon}>\n                <ErrorOutlineIcon />\n              </span>\n              <span className={classes.errorLabel}>Error from IDP</span>\n            </div>\n            <div className={classes.simpleError}>{error}</div>\n            <Typography\n              variant=\"body1\"\n              gutterBottom\n              component=\"div\"\n              className={classes.extraDetailsContainer}\n            >\n              {errorDescription}\n            </Typography>\n            <Button\n              component={\"a\"}\n              href={`${baseUrl}login`}\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n            >\n              Back to Login\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </React.Fragment>\n  ) : null;\n};\n\nexport default withStyles(styles)(LoginCallback);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'ErrorOutline');\n\nexports.default = _default;"],"names":["withStyles","theme","createStyles","paper","borderRadius","display","flexDirection","alignItems","width","height","margin","position","top","left","marginLeft","marginTop","submit","boxShadow","padding","mainContainer","theOcean","borderTopLeftRadius","borderBottomLeftRadius","background","oceanBg","backgroundImage","backgroundRepeat","backgroundPosition","theLogin","extraDetailsContainer","fontStyle","color","transition","overflow","errorLabel","fontSize","fontWeight","simpleError","messageIcon","errorTitle","classes","useState","error","setError","errorDescription","setErrorDescription","loading","setLoading","useEffect","queryString","window","location","search","urlParams","URLSearchParams","code","get","state","api","then","targetPath","localStorage","getItem","setItem","history","catch","errorMessage","detailedError","className","container","item","xs","variant","gutterBottom","component","href","baseUrl","type","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}